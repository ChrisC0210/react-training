import{c as ge,a as _e,j as e,L as E,N as T,C as me,b as N,u as oe,d as z,r as u,O as Se,R as Q,M,e as ae,f as W,g as Me,h as Ue,H as qe,i as Ae,k as L,l as Ie,P as Fe}from"./vendor-BCyBYEEH.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))c(d);new MutationObserver(d=>{for(const s of d)if(s.type==="childList")for(const m of s.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&c(m)}).observe(document,{childList:!0,subtree:!0});function a(d){const s={};return d.integrity&&(s.integrity=d.integrity),d.referrerPolicy&&(s.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?s.credentials="include":d.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function c(d){if(d.ep)return;d.ep=!0;const s=a(d);fetch(d.href,s)}})();const Pe={message:"",visible:!1},Ne=ge({name:"toast",initialState:Pe,reducers:{showToast:(n,r)=>{n.message=r.payload,n.visible=!0},hideToast:n=>{n.visible=!1}}}),{showToast:P,hideToast:he}=Ne.actions,Ee=Ne.reducer,xe=[],fe=ge({name:"cart",initialState:xe,reducers:{addToCart:(n,r)=>{const{product:a,quantity:c}=r.payload,d=n.find(s=>s.id===a.id);d?d.quantity+=c:n.push({...a,imageUrl:a.imageUrl||"",quantity:c})},removeFromCart:(n,r)=>{const a=r.payload;return n.filter(c=>c.id!==a)},updateCartItemQuantity:(n,r)=>{const{id:a,quantity:c}=r.payload,d=n.find(s=>s.id===a);d&&(d.quantity=c)},clearCart:()=>xe}}),{addToCart:V,removeFromCart:ue,updateCartItemQuantity:je,clearCart:B}=fe.actions,Le=fe.reducer,Re=_e({reducer:{toast:Ee,cart:Le}}),de=({isAuth:n,onLogout:r,cartCount:a=0})=>{const c=async()=>{try{await N.post("https://ec-course-api.hexschool.io/v2/logout",{},{withCredentials:!0}),document.cookie="hexToken=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",N.defaults.headers.common.Authorization="",r&&r(),alert("登出成功"),window.location.href="https://chrisc0210.github.io/react-training/#/"}catch(s){console.error("登出失敗",s),alert("登出失敗")}},d=()=>{const s=document.getElementById("navbarNav");if(s){let m=me.getInstance(s);m||(m=new me(s,{toggle:!1})),m.toggle()}};return e.jsx("nav",{className:"navbar navbar-expand-lg py-2",children:e.jsxs("div",{className:"container",children:[e.jsxs(E,{className:"navbar-brand",to:"/",style:{display:"flex",alignItems:"center",transition:"transform 0.3s ease"},onMouseOver:s=>s.currentTarget.style.transform="scale(1.05)",onMouseOut:s=>s.currentTarget.style.transform="scale(1)",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"40",height:"40",viewBox:"0 0 128 128",children:[e.jsx("path",{fill:"#2f2f2f",d:"M74.92 113.83s-5.7-.45-5.93-3.79l-3.24-9.41l14.09-13.1s10.33-.2 10.92-.2c.6 0 3.37 13.3 3.37 13.3l-4.96 8.14z"}),e.jsx("path",{fill:"#f79329",d:"M75.03 53.73c.31 2.76.9 5.17 2.83 7.2c1.55 1.62 3.17 3 4.6 4.73c4.12 4.99 11.06 6.71 15.32 11.94c2.84 3.49 4.77 7.77 5.75 12.11c1.1 4.88 1.78 10.27.42 15.07c-1.87 6.58-7.62 7.38-13.63 8.29c-2.76.42-5.57.66-8.37.74c-2.23.06-4.81.34-7.04.03c-1.95-.28-2.32-2.92-1.79-4.47c.56-1.67 2.24-2.3 3.81-2.6c.77-.15 1.58.07 2.36-.06c1.45-.23 2.06-1.18 2.09-2.63c.03-1.98.71-3.63 1.62-5.36c.41-.78 1.1-1.47 1.76-2.06c.67-.62 1.83-1.47 1.19-2.55c-1.1-1.88-4.44-.15-5.57.66c-1.75 1.24-2.99 3.12-3.53 5.19c-.77 2.87-1.36 3.06-4.04 4.08c-1.58.61-3.04 1.62-3.64 3.19c-.73 1.95.49 4.25-.77 5.95c-.99 1.36-2.91 2.11-4.67 2.04c-4.54-.2-7.58-1.31-6.63-5.93c.6-2.9.41-6.08.59-9.09c.06-1.13.17-2.86-.96-3.65c-.44-.32-1.05-.37-1.56-.34c-.35.01-1.23-.04-1.56.07c-.97.31-.74 1.87-.73 2.69c.01 1.58-.02 3.19-.06 4.75c-.04 1.85.16 3.68.18 5.51c.01 1.2.12 2.68-.87 3.53c-1.13 1-2.86 1.22-4.4 1.27c-1.85.07-3.96-.07-5.5-1.15c-3.15-2.22-2.08-7.31-1.79-10.28c.19-1.93.05-3.94 0-5.92c-.04-1.78-.09-3.57-.13-5.37c-.02-.74-.12-1.54-.08-2.3c.15-2.1-.28-4.25-.34-6.43c-.1-4-.31-8.07-.31-12.14c0-1.74.3-3.65.8-5.3c.27-.88.56-2.06 1.03-2.83c.74-1.23 2.02-2.33 3.09-3.29c1.38-1.23 3.02-1.85 4.6-2.8c2.05-1.24 4.19-2.41 6.41-3.36c3.9-1.66 8.07-3.08 12.43-3.24c1.53-.06 2.68-.3 4.16-.64c1.49-.34 2.23.66 2.5 2.06c.23.87.33 1.78.43 2.69m-15.9-28.8s-2.13-2.61-7.09-9.78C48.98 10.71 39.33-1.79 34.45.8c-7.53 3.98-6.69 32.18-6.69 32.18zm3.16.34s2.63-2.1 8.97-8.1c3.93-3.7 15.96-13.91 20.2-10.38c6.54 5.46-.15 32.87-.15 32.87z"}),e.jsx("defs",{children:e.jsx("path",{id:"notoV1Cat0",d:"M95.31 51.88c.33-8.71-3.73-18.15-10.88-24.49c-5.78-5.14-14.36-8.35-22.99-9.24c-8.63-.92-17.68.44-24.4 4.25c-8.32 4.72-14.24 13.1-15.74 21.7c-1.42 8.16-.62 16.61 6.43 23.13c3.91 3.61 8.96 6.32 14.28 8.05c2.02.66 7.26 2.25 12.85 2.84c5.61.59 11.57.18 13.69-.05c5.56-.59 11.07-2.18 15.64-4.89c8.27-4.92 10.81-13.02 11.12-21.3"})}),e.jsx("use",{fill:"#f79329",href:"#notoV1Cat0"}),e.jsxs("g",{fill:"#2f2f2f",children:[e.jsx("path",{d:"M45.82 48.62c-.34 3.21-2.93 5.57-5.78 5.27s-4.9-3.14-4.56-6.36s2.93-5.58 5.78-5.28c2.85.31 4.89 3.15 4.56 6.37m24.05 2.53c-.34 3.21 1.7 6.06 4.55 6.36s5.44-2.06 5.78-5.27c.34-3.22-1.7-6.07-4.55-6.37c-2.86-.29-5.44 2.06-5.78 5.28M56.72 64.69c-.05 0-.11 0-.16-.01c-.85-.09-1.47-.85-1.38-1.71l.6-5.71c.09-.85.86-1.43 1.71-1.38c.85.09 1.47.85 1.38 1.71l-.6 5.7c-.09.8-.76 1.4-1.55 1.4"}),e.jsx("path",{d:"M52.19 68.42c-1.57-.01-3.15-.49-4.3-1.37c-.91-.7-2.36-2.82-.87-3.63c.24-.13.51-.2.78-.23c.43-.06.78.05 1.14.32c.58.43 1.07 1.2 1.79 1.34c2.25.46 4.19-.69 4.73-2.95c.14-.61.19-.9.91-.97c1.75-.16 2.17 2.04 1.69 3.35c-.43 1.17-.99 2.43-2.08 3.13c-1.12.71-2.47 1.02-3.79 1.01"}),e.jsx("path",{d:"M60.38 69.16c1.55.28 3.19.09 4.49-.56c1.02-.53 2.84-2.34 1.52-3.41c-.83-.67-1.56-.4-2.37.12c-2.06 1.33-4.88.39-5.57-2.01c-.15-.55.06-1.42-.19-1.91c-.12-.23-.31-.18-.59-.28c-.19-.07-.31-.15-.52-.16c-.97-.06-1.53.98-1.68 1.8c-.08.44-.17.81-.1 1.25c.21 1.24.53 2.57 1.48 3.46c.96.92 2.23 1.46 3.53 1.7"}),e.jsx("path",{d:"M52 57.63c-.03 1.07.58 2.25 1.61 3.05c.84.65 2.08 1.07 3.31 1.19c1.23.13 2.53-.02 3.48-.47c1.18-.57 2.02-1.59 2.21-2.65c.19-1 .06-2.06-.97-2.88c-.56-.46-1.29-.8-2.06-1.02c-.28-.09-1.04-.3-1.84-.38c-.81-.09-1.66-.05-1.96-.02c-.79.06-1.58.25-2.23.57c-1.17.59-1.52 1.58-1.55 2.61"})]}),e.jsx("path",{fill:"#f79329",d:"M97.64 99.25c1.22-.81 2.5-.45 3.86-.29c5.86.68 12.5 5.82 12.74 11.94c.29 7.86-6.7 13.54-13.66 15.41c-5.07 1.36-10.56 1.36-15.78 1.15c-2.28-.09-6.4.29-8.41-.99c-.72-.45-1.35-1.39-1.68-2.16c-1.21-2.81 1.23-4.77 3.84-4.76c1.9.01 3.8.04 5.71.02c4.16-.03 8.34.28 12.45-.54c3.74-.74 9.22-3.67 8.99-8.23c-.17-3.35-3.89-4.01-6.57-4.41c-.68-.1-1.35-.32-2.13-.34c-1.53-.04-1.46-1.48-1.35-2.6c.16-1.59.41-2.92 1.74-4.01c.05-.06.15-.13.25-.19M23.75 49.72q-.15 0-.3-.03l-8.22-1.61c-.84-.16-1.39-.98-1.22-1.82c.16-.84 1-1.4 1.82-1.22l8.22 1.62c.84.16 1.39.98 1.22 1.81c-.15.73-.8 1.25-1.52 1.25m-8.45 6.3c-.77 0-1.43-.57-1.53-1.35c-.12-.85.48-1.62 1.33-1.74l8.31-1.09c.83-.12 1.62.48 1.74 1.33c.11.85-.49 1.63-1.33 1.74L15.51 56c-.07.02-.13.02-.21.02m2.45 7c-.67 0-1.29-.44-1.49-1.13c-.24-.82.24-1.67 1.07-1.91l8.05-2.3c.82-.23 1.68.24 1.92 1.07c.23.82-.24 1.68-1.07 1.91l-8.05 2.3c-.15.04-.29.06-.43.06m73.96-7.31c-.78 0-1.45-.59-1.54-1.38a1.55 1.55 0 0 1 1.37-1.71l8.33-.93c.83-.07 1.62.52 1.71 1.37c.1.86-.52 1.62-1.37 1.71l-8.33.93c-.06 0-.12.01-.17.01m7.88 6.99c-.11 0-.22-.01-.34-.04l-8.18-1.79a1.55 1.55 0 0 1-1.18-1.84c.19-.83 1.01-1.36 1.84-1.18l8.19 1.79c.83.18 1.37 1.01 1.18 1.84c-.15.72-.8 1.22-1.51 1.22m-3.01 6.76c-.18 0-.37-.03-.55-.1L88.2 66.4c-.8-.3-1.21-1.2-.9-2c.3-.8 1.2-1.2 2-.9l7.84 2.96c.8.31 1.2 1.2.9 2c-.24.62-.83 1-1.46 1"}),e.jsx("path",{fill:"#fcd4b5",d:"M36 12.52c-.73 1.9-2.2 7.37-1.28 11.26c.27 1.16 1.75 1.68 2.8 1.18c2.19-1.05 5.61-2.9 6.89-3.54c2.18-1.07 2.93-2.4 1.75-4.03c-1.5-2.08-5.24-6.39-7.45-6.81c-1.26-.24-2.23.71-2.71 1.94m51.6 5.26c.41 2 .93 7.63-.63 11.33c-.46 1.09-2.01 1.36-2.96.69c-1.98-1.4-5.03-3.8-6.2-4.64c-1.96-1.42-2.49-2.86-1.05-4.27c1.82-1.8 6.23-5.43 8.48-5.47c1.29-.03 2.1 1.07 2.36 2.36"})]}),e.jsx("span",{className:"fw-bold ms-2",style:{color:"#5a3e36",fontSize:"1.4rem",letterSpacing:"0.5px",fontFamily:"'Noto Sans TC', sans-serif"},children:"Cat's Store"})]}),e.jsx("button",{className:"navbar-toggler",type:"button","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation",onClick:d,children:e.jsx("span",{className:"navbar-toggler-icon"})}),e.jsx("div",{className:"collapse navbar-collapse",id:"navbarNav",children:e.jsxs("ul",{className:"navbar-nav ms-auto align-items-center",children:[e.jsx("li",{className:"nav-item mx-1",children:e.jsx(T,{className:({isActive:s})=>s?"nav-link active px-3 py-2 rounded-pill fw-medium":"nav-link px-3 py-2 rounded-pill fw-medium",style:({isActive:s})=>({background:s?"#f79329":"transparent",color:s?"white":"#5a3e36",transition:"all 0.3s ease"}),to:"/",children:"首頁"})}),e.jsx("li",{className:"nav-item mx-1",children:e.jsx(T,{className:({isActive:s})=>s?"nav-link active px-3 py-2 rounded-pill fw-medium":"nav-link px-3 py-2 rounded-pill fw-medium",style:({isActive:s})=>({background:s?"#f79329":"transparent",color:s?"white":"#5a3e36",transition:"all 0.3s ease"}),to:"/products",children:"產品頁"})}),e.jsx("li",{className:"nav-item position-relative mx-1",children:e.jsxs(T,{className:({isActive:s})=>s?"nav-link active px-3 py-2 rounded-pill fw-medium":"nav-link px-3 py-2 rounded-pill fw-medium",style:({isActive:s})=>({background:s?"#f79329":"transparent",color:s?"white":"#5a3e36",transition:"all 0.3s ease"}),to:"/cart",children:[e.jsx("i",{className:"bi bi-cart me-1"}),"購物車",a>0&&e.jsx("span",{className:"position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger",style:{transform:"translate(-50%, -30%)"},children:a})]})}),e.jsx("li",{className:"nav-item mx-1",children:e.jsx(T,{className:({isActive:s})=>s?"nav-link active px-3 py-2 rounded-pill fw-medium":"nav-link px-3 py-2 rounded-pill fw-medium",style:({isActive:s})=>({background:s?"#f79329":"transparent",color:s?"white":"#5a3e36",transition:"all 0.3s ease"}),to:"/about",children:"關於我們"})}),e.jsx("li",{className:"nav-item mx-1",children:e.jsx(T,{className:({isActive:s})=>s?"nav-link active px-3 py-2 rounded-pill fw-medium":"nav-link px-3 py-2 rounded-pill fw-medium",style:({isActive:s})=>({background:s?"#f79329":"transparent",color:s?"white":"#5a3e36",transition:"all 0.3s ease"}),to:"/Admin",children:"後台登入"})}),n&&e.jsx("li",{className:"nav-item mx-1",children:e.jsxs("button",{className:"nav-link btn px-3 py-2 rounded-pill fw-medium",style:{background:"#5a3e36",color:"white",border:"none",transition:"all 0.3s ease"},onClick:c,onMouseOver:s=>s.currentTarget.style.background="#7a5e56",onMouseOut:s=>s.currentTarget.style.background="#5a3e36",children:[e.jsx("i",{className:"bi bi-box-arrow-right me-1"}),"登出"]})})]})})]})})};function Z(){const{message:n,visible:r}=oe(s=>s.toast),a=z();if(u.useEffect(()=>{if(r){const s=setTimeout(()=>{a(he())},3e3);return()=>clearTimeout(s)}},[r,a]),!r)return null;const d=n.includes("移除")?"toast-header bg-danger text-white":"toast-header bg-success text-white";return e.jsx("div",{className:"position-fixed top-0 end-0 p-3",style:{zIndex:1500},children:e.jsxs("div",{className:"toast show",role:"alert","aria-live":"assertive","aria-atomic":"true",style:{opacity:1,backgroundColor:"#fff",boxShadow:"0 0.5rem 1rem rgba(0, 0, 0, 0.15)"},children:[e.jsxs("div",{className:d,children:[e.jsx("strong",{className:"me-auto",children:"通知"}),e.jsx("button",{type:"button",className:"btn-close","aria-label":"Close",onClick:()=>a(he())})]}),e.jsx("div",{className:"toast-body",children:n})]})})}const ze=()=>{const[n,r]=u.useState(!0),[a]=u.useState(0);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{background:"linear-gradient(to right, #ffecd2 0%, #fcb69f 100%)",boxShadow:"0 2px 10px rgba(0,0,0,0.1)"},children:[e.jsx(de,{isAuth:n,onLogout:()=>r(!1),cartCount:a}),e.jsx(Z,{})]}),e.jsx(Se,{}),e.jsx("footer",{style:{background:"linear-gradient(to right, #5a3e36, #9c7a6b)",color:"white",padding:"2rem 0",marginTop:"3rem"},children:e.jsxs("div",{className:"container",children:[e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-12 col-md-4 mb-4 text-center text-md-start",children:[e.jsx("h5",{className:"fw-bold mb-3",children:"Cat's Store"}),e.jsx("p",{children:"為您的貓咪提供最優質的商品和服務"}),e.jsxs("div",{className:"d-flex justify-content-center justify-content-md-start",children:[e.jsx("a",{href:"#",className:"me-3 text-white fs-5",children:e.jsx("i",{className:"bi bi-facebook"})}),e.jsx("a",{href:"#",className:"me-3 text-white fs-5",children:e.jsx("i",{className:"bi bi-instagram"})}),e.jsx("a",{href:"#",className:"text-white fs-5",children:e.jsx("i",{className:"bi bi-line"})})]})]}),e.jsxs("div",{className:"col-12 col-md-4 mb-4 text-center text-md-start",children:[e.jsx("h5",{className:"fw-bold mb-3",children:"聯絡資訊"}),e.jsxs("p",{children:[e.jsx("i",{className:"bi bi-geo-alt me-2"}),"台北市貓貓區喵喵路88號"]}),e.jsxs("p",{children:[e.jsx("i",{className:"bi bi-telephone me-2"}),"(02) 1234-5678"]}),e.jsxs("p",{children:[e.jsx("i",{className:"bi bi-envelope me-2"}),"service@catsstore.com"]})]}),e.jsxs("div",{className:"col-12 col-md-4 mb-4 text-center text-md-start",children:[e.jsx("h5",{className:"fw-bold mb-3",children:"營業時間"}),e.jsx("p",{children:"週一至週五: 10:00 - 21:00"}),e.jsx("p",{children:"週六至週日: 11:00 - 22:00"})]})]}),e.jsx("hr",{className:"mt-4 mb-4",style:{borderColor:"rgba(255,255,255,0.2)"}}),e.jsx("p",{className:"text-center mb-0",children:"© 2025 Cat's Store. All Rights Reserved."})]})})]})},He=()=>e.jsxs("div",{children:[e.jsxs("section",{className:"bg-light text-center py-4",style:{backgroundImage:"url('https://storage.googleapis.com/vue-course-api.appspot.com/product-backend/1742749472222.jpg')",backgroundSize:"cover",backgroundPosition:"center",height:"350px"},children:[e.jsx("h1",{className:"display-4 mt-4 fw-bold text-gradient",children:"歡迎來到 Cat's Store"}),e.jsx("p",{className:"lead fw-bold text-gradient-blue text-shadow",children:"為您的毛孩選最棒的商品"}),e.jsx(E,{to:"/products",className:"btn btn-warning btn-lg mt-3",children:"立即選購"})]}),e.jsxs("section",{className:"container my-5",children:[e.jsxs("h2",{className:"text-center mb-4 fw-bold text-gradient",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",fill:"currentColor",className:"bi bi-fire text-orange me-2",viewBox:"0 0 16 16",children:e.jsx("path",{d:"M8 16c3.314 0 6-2 6-5.5 0-1.5-.5-4-2.5-6 .25 1.5-1.25 2-1.25 2C11 4 9 .5 6 0c.357 2 .5 4-2 6-1.25 1-2 2.729-2 4.5C2 14 4.686 16 8 16m0-1c-1.657 0-3-1-3-2.75 0-.75.25-2 1.25-3C6.125 10 7 10.5 7 10.5c-.375-1.25.5-3.25 2-3.5-.179 1-.25 2 1 3 .625.5 1 1.364 1 2.25C11 14 9.657 15 8 15"})}),"熱門分類",e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",fill:"currentColor",className:"bi bi-fire text-orange me-2",viewBox:"0 0 16 16",children:e.jsx("path",{d:"M8 16c3.314 0 6-2 6-5.5 0-1.5-.5-4-2.5-6 .25 1.5-1.25 2-1.25 2C11 4 9 .5 6 0c.357 2 .5 4-2 6-1.25 1-2 2.729-2 4.5C2 14 4.686 16 8 16m0-1c-1.657 0-3-1-3-2.75 0-.75.25-2 1.25-3C6.125 10 7 10.5 7 10.5c-.375-1.25.5-3.25 2-3.5-.179 1-.25 2 1 3 .625.5 1 1.364 1 2.25C11 14 9.657 15 8 15"})})]}),e.jsxs("div",{className:"row text-center",children:[e.jsx("div",{className:"col-md-4 mb-3",children:e.jsxs(E,{to:"/products",className:"card p-3 text-decoration-none",children:[e.jsx("div",{children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"40",height:"40",viewBox:"0 0 512 512",children:e.jsx("path",{fill:"currentColor",d:"M373.344 38.504c-.43.009-18.834 14.371-18.834 14.371l-28.965-5.792c-.212.06-24.143 22.862-24.143 22.862l-25.648-1.539l-15.46 16.824l-28.073-.722l-18.516 20.615l-25.371 2.928l-17.123 18.37l-27.215 8.95l-16.062 22.598l-23.72 6.224L91.21 184.67l-21.152 11.289l-7.401 21.78l-23.668 13.95l-3.076 23.899c14.712-5.336 28.468.705 38.951 8.4l25.725-15.97l34.922-5.55l30.017-27.085l45.21-5.291l32.97-29.707l32.682-8.178l20.254-26.588c10.445-5.84 25.525-9.99 38.857-15.558l9.799-24.895l28.314-10.77c.154-.168.32-.341.473-.51l3.082-18.761l20.486-15.564q.071-.185.139-.368L381.87 53.25zM256 207.496l-.705.004a864 864 0 0 1-8.63 5.045a852 852 0 0 1-24.214 13.402a1238 1238 0 0 1 33.549-.45c61.422 0 117.054 4.476 156.81 11.575c19.879 3.55 35.834 7.816 46.086 12.145c5.127 2.164 8.794 4.391 10.635 5.998c.795.693 1.053 1.042 1.23 1.281c-.177.24-.435.588-1.23 1.281c-1.84 1.607-5.508 3.834-10.635 5.998c-10.252 4.329-26.207 8.595-46.085 12.145c-39.757 7.1-95.39 11.576-156.811 11.576c-60.185 0-114.771-4.304-154.35-11.156c-1.062.294-2.148.61-3.197.89c-14.957 3.99-28.503 6.543-40.469 7.438c10.618 3.378 23.344 6.348 38.041 8.973c41.316 7.377 97.685 11.855 159.975 11.855s118.659-4.478 159.975-11.855c20.658-3.69 37.506-8.041 49.923-13.284c6.21-2.62 11.343-5.418 15.47-9.02c4.126-3.6 7.632-8.675 7.632-14.84c0-6.167-3.506-11.242-7.633-14.843c-4.126-3.6-9.26-6.398-15.469-9.02c-12.417-5.242-29.265-9.594-49.923-13.282c-41.316-7.378-97.685-11.856-159.975-11.856m224 80.926c-17.886 9.361-42.297 15.703-70.854 21.017c-44.267 8.238-98.66 12.433-153.084 12.815c-54.423.382-108.8-3.051-153.021-10.316c-22.11-3.633-41.675-8.208-57.629-13.9c-4.795-1.712-9.272-3.5-13.412-5.42v112.495c54.727 19.858 139.481 30.383 224 30.383s169.273-10.525 224-30.383zM23.354 421.135a16.2 16.2 0 0 0-.354 3.361c0 6.166 3.506 11.24 7.633 14.842c4.126 3.601 9.26 6.398 15.469 9.02c12.417 5.242 29.265 9.594 49.923 13.283c41.316 7.377 97.685 11.855 159.975 11.855s118.659-4.478 159.975-11.855c20.658-3.69 37.506-8.041 49.923-13.284c6.21-2.62 11.343-5.418 15.47-9.02c4.126-3.6 7.632-8.675 7.632-14.84c0-1.16-.125-2.282-.354-3.362c-58.527 21.982-145.45 32.361-232.646 32.361s-174.119-10.38-232.646-32.361"})})}),e.jsx("h5",{children:"貓咪飼料"})]})}),e.jsx("div",{className:"col-md-4 mb-3",children:e.jsxs(E,{to:"/products",className:"card p-3 text-decoration-none",children:[e.jsx("div",{children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"40",height:"40",viewBox:"0 0 24 24",children:e.jsxs("g",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",children:[e.jsx("path",{d:"M3.5 17.5q8.5 7 17 0"}),e.jsx("path",{d:"M19 18.5L17 10l1-2l2 1l1.5-1.5L19 3c-5.052.218-5.99 3.133-7 6H6a3 3 0 0 0-3 3m2 6.5L7 9"}),e.jsx("path",{d:"m8 20l2-5h4l2 5"})]})})}),e.jsx("h5",{children:"玩具 & 配件"})]})}),e.jsx("div",{className:"col-md-4 mb-3",children:e.jsxs(E,{to:"/products",className:"card p-3 text-decoration-none",children:[e.jsx("div",{children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"40",height:"40",viewBox:"0 0 24 24",children:e.jsxs("g",{fill:"none",children:[e.jsx("path",{fill:"currentColor",d:"m19.98 9.063l.75.002v-.002zm-15.96 0h-.75v.002zM19.1 10.66l-.573.485l.084.1l.114.065zm-.272-1.265a.75.75 0 0 0-.888 1.21zM4.02 15h-.75zm2.04-4.395a.75.75 0 1 0-.888-1.21zM12 5.656c-.772 0-1.21.041-1.556.084c-.34.042-.512.072-.838.072v1.5c.44 0 .725-.047 1.02-.083c.29-.036.666-.073 1.374-.073zm0 1.5c.708 0 1.085.037 1.373.073c.296.036.58.083 1.021.083v-1.5c-.326 0-.498-.03-.838-.072A12 12 0 0 0 12 5.656zm2.394.157c.213 0 .412-.061.555-.114c.156-.058.317-.134.472-.214c.305-.157.659-.367.983-.554c.34-.195.66-.373.947-.503c.308-.14.484-.178.554-.178v-1.5c-.408 0-.83.157-1.171.31a13 13 0 0 0-1.078.571c-.354.204-.658.385-.922.52q-.194.1-.306.141c-.087.032-.087.02-.034.02zm3.511-1.563c.345 0 .675.103.907.303c.212.182.418.51.418 1.135h1.5c0-1-.352-1.766-.939-2.272c-.566-.487-1.272-.666-1.886-.666zm1.325 1.438v1.875h1.5V7.188zM9.606 5.813c.053 0 .053.011-.034-.02a3 3 0 0 1-.306-.141c-.264-.136-.568-.317-.922-.52c-.34-.196-.716-.408-1.078-.571c-.34-.154-.763-.311-1.171-.311v1.5c.07 0 .246.039.554.178c.287.13.608.308.947.503c.324.187.678.397.983.554c.155.08.316.156.472.214c.143.053.342.114.555.114zM6.095 4.25c-.614 0-1.32.179-1.886.666c-.587.505-.939 1.272-.939 2.271h1.5c0-.625.206-.952.418-1.134c.232-.2.563-.303.907-.303zM3.27 7.188v1.875h1.5V7.187zM12 20.75c1.431 0 3.54-.285 5.32-1.104c1.784-.82 3.41-2.273 3.41-4.646h-1.5c0 1.533-1.007 2.58-2.536 3.284s-3.412.966-4.694.966zm7.672-10.574a5 5 0 0 0-.844-.78l-.888 1.208q.358.267.587.54zM19.23 9.06c0 .198-.041.61-.138.895c-.055.159-.086.155-.03.11a.42.42 0 0 1 .412-.055l-.749 1.3c.18.104.402.18.65.167c.255-.013.466-.114.626-.242c.287-.23.432-.566.51-.796c.168-.491.218-1.08.22-1.374zM12 19.25c-1.282 0-3.163-.262-4.694-.966C5.776 17.58 4.77 16.533 4.77 15h-1.5c0 2.373 1.626 3.826 3.41 4.646c1.78.82 3.889 1.104 5.32 1.104zM4.77 15c0-.788-.057-1.437.019-2.128c.07-.645.253-1.218.684-1.727l-1.145-.97c-.68.805-.938 1.693-1.03 2.534c-.087.797-.028 1.66-.028 2.291zm.703-3.855a3.4 3.4 0 0 1 .587-.54l-.888-1.21q-.493.364-.844.78zM3.27 9.065c.001.294.051.883.219 1.374c.078.23.223.566.51.796c.16.128.371.229.625.242c.249.012.47-.063.651-.167l-.749-1.3a.42.42 0 0 1 .411.055c.057.045.026.049-.029-.11a3.3 3.3 0 0 1-.138-.895z"}),e.jsx("path",{stroke:"currentColor","stroke-width":"1.5",d:"M12.826 16c0 .173-.361.313-.806.313s-.807-.14-.807-.313s.361-.312.807-.312c.445 0 .806.14.806.312Zm2.674-2.406c0 .431-.217.781-.484.781s-.484-.35-.484-.781s.217-.781.484-.781s.484.35.484.78Zm-6 0c0 .431-.217.781-.484.781s-.484-.35-.484-.781s.217-.781.484-.781s.484.35.484.78Z"}),e.jsx("path",{stroke:"currentColor","stroke-linecap":"round","stroke-width":"1.5",d:"M22 15.469c-.483-.313-2.58-1.094-3.387-1.094m1.774 3.594c-.484-.313-1.613-1.094-2.42-1.094M2 15.469c.484-.313 2.58-1.094 3.387-1.094m-1.774 3.594c.484-.313 1.613-1.094 2.42-1.094"})]})})}),e.jsx("h5",{children:"貓砂用品"})]})})]})]}),e.jsx("section",{className:"bg-light py-5",children:e.jsxs("div",{className:"container",children:[e.jsx("h2",{className:"text-center mb-4 fw-bold text-gradient",children:"精選推薦"}),e.jsxs("div",{className:"row text-center",children:[e.jsx("div",{className:"col-md-4 mb-3",children:e.jsxs("div",{className:"card p-3",children:[e.jsx("h5",{children:"超人氣貓糧"}),e.jsx(E,{to:"/products/-OM4pQo1-CnRBAkPN-MB",className:"btn btn-outline-primary mt-2",children:"查看產品"})]})}),e.jsx("div",{className:"col-md-4 mb-3",children:e.jsxs("div",{className:"card p-3",children:[e.jsx("h5",{children:"智能貓砂盆"}),e.jsx(E,{to:"/products/-OM4go69eEB8pIw41URw",className:"btn btn-outline-primary mt-2",children:"查看產品"})]})}),e.jsx("div",{className:"col-md-4 mb-3",children:e.jsxs("div",{className:"card p-3",children:[e.jsx("h5",{children:"逗貓神器"}),e.jsx(E,{to:"/products/-OM4kct--FDEuZ1nIupA",className:"btn btn-outline-primary mt-2",children:"查看產品"})]})})]})]})}),e.jsx("div",{className:"newsletter py-5",style:{background:"#e9ecef"},children:e.jsx("div",{className:"container",children:e.jsx("div",{className:"row justify-content-center",children:e.jsxs("div",{className:"col-md-8 text-center",children:[e.jsx("h3",{className:"fw-bold",style:{color:"#5a3e36"},children:"訂閱電子報"}),e.jsx("p",{className:"text-muted",children:"隨時掌握最新商品資訊與專屬優惠"}),e.jsxs("div",{className:"input-group mb-3 shadow-sm",children:[e.jsx("input",{type:"email",className:"form-control form-control-lg border-0",placeholder:"請輸入電子信箱"}),e.jsx("button",{className:"btn btn-primary",type:"button",children:"訂閱"})]}),e.jsx("p",{className:"small text-muted mt-2",children:"我們保證只寄送與貓咪相關的資訊，不會有垃圾郵件！"})]})})})}),e.jsxs("section",{className:"container my-5 text-center",children:[e.jsx("h2",{className:"text-center mb-4 fw-bold text-gradient",children:"關於我們"}),e.jsx("p",{className:"text-center",children:"Cat's Store 致力於提供高品質、創新的貓咪用品，讓每一隻貓咪都能擁有幸福生活。"}),e.jsx("p",{className:"text-center",children:"我們的熱情和專業將為您提供最好的貓咪生活體驗。"}),e.jsx(E,{to:"/about",className:"btn btn-warning",children:"了解更多"})]}),e.jsxs("section",{className:"bg-gradient-orange text-white text-center py-5",children:[e.jsx("h2",{className:"text-center mb-4 fw-bold",children:"聯絡我們"}),e.jsx("p",{children:"電話: 02-1234-5678"}),e.jsx("p",{className:"text-center fw-bold",children:"有任何問題歡迎來信：christinachen149@gmail.com"})]})]});function Te(){const[n,r]=Q.useState(null),[a,c]=Q.useState([]),[d,s]=u.useState(!1),[m,o]=u.useState({username:"",password:""}),h=j=>{const{value:y,name:$}=j.target;o({...m,[$]:y})},f=j=>{j.preventDefault(),console.log(m),N.post("https://ec-course-api.hexschool.io/v2/admin/signin",m).then(y=>{const{token:$,expired:k}=y.data;console.log($,k),document.cookie=`hexToken=${$}; expires=${new Date(k)}`,N.defaults.headers.common.Authorization=$,y.data.success===!0&&(alert("登入成功"),N.get("https://ec-course-api.hexschool.io/v2/api/product-backend/admin/products").then(_=>{console.log(_.data),c(_.data.products)}).catch(_=>{console.error(_)}),s(!0))}).catch(y=>{console.error(y),alert("登入失敗"),s(!1)})};return e.jsx(e.Fragment,{children:d?e.jsx("section",{className:"container mt-5",children:e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-12 col-lg-6 mb-4",children:[e.jsx("h2",{className:"fw-bold",children:"產品列表"}),e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"產品名稱"}),e.jsx("th",{children:"原價"}),e.jsx("th",{children:"售價"}),e.jsx("th",{children:"是否啟用"}),e.jsx("th",{children:"查看細節"})]})}),e.jsx("tbody",{children:a.map(j=>e.jsxs("tr",{children:[e.jsx("td",{className:"fw-bold",children:j.title}),e.jsx("td",{children:j.origin_price}),e.jsx("td",{children:j.price}),e.jsx("td",{children:j.is_enabled?"是":"否"}),e.jsx("td",{children:e.jsx("button",{className:"btn btn-primary",onClick:()=>{r(j)},children:"查看細節"})})]},j.id))})]})]}),e.jsxs("div",{className:"col-12 col-lg-6 mb-4",children:[e.jsx("h2",{className:"fw-bold",children:"單一產品細節"}),n&&n.title?e.jsxs("div",{className:"card mb-3",children:[e.jsx("img",{src:n.imageUrl,className:"card-img-top primary-image",alt:"主圖"}),e.jsxs("div",{className:"card-body",children:[e.jsxs("h5",{className:"card-title",children:[n.title,e.jsx("span",{className:"badge bg-primary ms-2",children:n.category})]}),e.jsxs("p",{className:"card-text",children:["商品描述：",n.description]}),e.jsxs("p",{className:"card-text",children:["商品內容：",n.content]}),e.jsxs("div",{className:"d-flex",children:[e.jsx("p",{className:"card-text text-secondary",children:e.jsx("del",{children:n.origin_price})}),"元 / ",n.price," 元"]}),e.jsx("h5",{className:"mt-3",children:"更多圖片："}),e.jsx("div",{className:"d-flex flex-wrap",children:n.imagesUrl.map((j,y)=>e.jsx("img",{src:j,className:"img-thumbnail border-0 me-2",alt:"其他圖片"},y))})]})]}):e.jsx("p",{className:"text-secondary fw-bold",children:"請選擇一個商品查看 !"})]})]})}):e.jsx("section",{className:"bg-gradient",children:e.jsxs("div",{className:"d-flex flex-column justify-content-center align-items-center vh-100",children:[e.jsx("h1",{className:"mb-5",children:"請先登入"}),e.jsxs("form",{className:"d-flex flex-column gap-4 w-50 p-4 shadow rounded-3",children:[e.jsxs("div",{className:"form-floating mb-3",children:[e.jsx("input",{type:"email",className:"form-control",id:"username",placeholder:"name@example.com",value:m.username,name:"username",onChange:h}),e.jsx("label",{htmlFor:"username",children:"Email address"})]}),e.jsxs("div",{className:"form-floating",children:[e.jsx("input",{type:"password",className:"form-control",id:"password",placeholder:"Password",value:m.password,name:"password",onChange:h}),e.jsx("label",{htmlFor:"password",children:"Password"})]}),e.jsx("button",{className:"btn btn-primary",onClick:f,children:"登入"})]}),e.jsx("p",{className:"mt-5 mb-3 text-muted",children:"© 2025 Chris Chen"})]})})})}function De(){const n="https://ec-course-api.hexschool.io",r="/product-backend",a={id:"",imageUrl:"",title:"",category:"",unit:"",origin_price:"",price:"",description:"",content:"",is_enabled:0,imagesUrl:[]},[c,d]=u.useState(a),[s,m]=u.useState("create"),[o,h]=Q.useState([]),[f,j]=u.useState(!1),[y,$]=u.useState({username:"",password:""}),k=p=>{const{value:w,name:q}=p.target;$({...y,[q]:w})},_=async()=>{try{const p=await N.get(`${n}/v2/api${r}/admin/products`);h(p.data.products)}catch(p){alert("取得產品失敗"),console.error(p)}},C=async p=>{p.preventDefault();try{const w=await N.post("https://ec-course-api.hexschool.io/v2/admin/signin",y),{token:q,expired:R}=w.data;document.cookie=`hexToken=${q}; expires=${new Date(R)}`,N.defaults.headers.common.Authorization=q,w.data.success===!0&&(alert("登入成功"),await _(),j(!0))}catch(w){alert(`登入失敗: ${w.message||"請檢查帳號密碼是否正確"}`),j(!1)}},b=async()=>{try{await N.post(`${n}/v2/api/user/check`),_(),j(!0)}catch(p){console.error(p)}};u.useEffect(()=>{const p=document.cookie.replace(/(?:(?:^|.*;\s*)hexToken\s*=\s*([^;]*).*$)|^.*$/,"$1");N.defaults.headers.common.Authorization=p,b()},[]);const v=u.useRef(null),S=u.useRef(null);u.useEffect(()=>{new M(v.current),new M(S.current)},[]);const U=(p,w)=>{m(p),d(w?{id:w.id.toString(),imageUrl:w.imageUrl||"",title:w.title,category:w.category,unit:w.unit,origin_price:w.origin_price.toString(),price:w.price.toString(),description:w.description,content:w.content,is_enabled:w.is_enabled,imagesUrl:w.imagesUrl.length>0?w.imagesUrl:[]}:a);const q=M.getInstance(v.current);q&&q.show()},F=p=>{d({id:p.id.toString(),imageUrl:p.imageUrl,title:p.title,category:p.category,unit:"",origin_price:p.origin_price.toString(),price:p.price.toString(),description:p.description,content:p.content,is_enabled:p.is_enabled,imagesUrl:p.imagesUrl});const w=M.getInstance(S.current);w&&w.show()},I=()=>{const p=M.getInstance(v.current);p&&p.hide(),d(a)},g=()=>{const p=M.getInstance(S.current);p&&p.hide(),d(a)},t=p=>{const{value:w,name:q,type:R}=p.target,H=p.target.checked;d($e=>({...$e,[q]:R==="checkbox"?H:w}))},l=(p,w)=>{const{value:q}=p.target;d(R=>{const H=[...R.imagesUrl];return H[w]=q,{...R,imagesUrl:H}})},i=()=>{d(p=>({...p,imagesUrl:[...p.imagesUrl,""]}))},x=()=>{d(p=>({...p,imagesUrl:p.imagesUrl.slice(0,p.imagesUrl.length-1)}))},A=async()=>{var p,w;try{return await N.post(`${n}/v2/api${r}/admin/product`,{data:{...c,origin_price:Number(c.origin_price),price:Number(c.price),is_enabled:c.is_enabled?1:0}}),{success:!0,message:"新增成功"}}catch(q){return{success:!1,message:`新增失敗: ${((w=(p=q.response)==null?void 0:p.data)==null?void 0:w.message)||"發生未知錯誤"}`}}},J=async()=>{var p,w;try{return await N.put(`${n}/v2/api${r}/admin/product/${c.id}`,{data:{...c,origin_price:Number(c.origin_price),price:Number(c.price),is_enabled:c.is_enabled?1:0}}),{success:!0,message:"更新成功"}}catch(q){return{success:!1,message:`更新失敗: ${((w=(p=q.response)==null?void 0:p.data)==null?void 0:w.message)||"發生未知錯誤"}`}}},we=async()=>{const w=await(s==="create"?A:J)();w.success?(await _(),I()):alert(w.message)},Ce=async()=>{var p,w;try{return await N.delete(`${n}/v2/api${r}/admin/product/${c.id}`),{success:!0,message:"刪除成功"}}catch(q){return{success:!1,message:`刪除失敗: ${((w=(p=q.response)==null?void 0:p.data)==null?void 0:w.message)||"發生未知錯誤"}`}}},ke=async()=>{const p=await Ce();p.success?(await _(),g()):alert(p.message)};return e.jsxs(e.Fragment,{children:[f?e.jsx("section",{className:"container mt-5",children:e.jsx("div",{className:"row",children:e.jsxs("div",{className:"col-12 mb-4",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsx("h2",{className:"fw-bold",children:"產品列表"}),e.jsxs("button",{onClick:()=>{U("create")},type:"button",className:"btn btn-primary",children:[e.jsx("i",{className:"bi  bi-plus-lg"})," 建立新的產品"]})]}),e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"產品名稱"}),e.jsx("th",{children:"原價"}),e.jsx("th",{children:"售價"}),e.jsx("th",{children:"是否啟用"}),e.jsx("th",{children:"查看細節"})]})}),e.jsx("tbody",{children:o.map(p=>e.jsxs("tr",{children:[e.jsx("td",{className:"fw-bold",children:p.title}),e.jsx("td",{children:p.origin_price}),e.jsx("td",{children:p.price}),e.jsx("td",{children:p.is_enabled?e.jsx("span",{className:"text-success",children:"啟用"}):e.jsx("span",{className:"text-danger",children:"未啟用"})}),e.jsx("td",{children:e.jsxs("div",{className:"",children:[e.jsxs("button",{onClick:()=>{const w=o.find(q=>q.id===p.id);w&&U("edit",w)},type:"button",className:"btn btn-primary btn-sm me-2",children:[e.jsx("i",{className:"bi bi-pencil-square"})," 編輯"]}),e.jsxs("button",{onClick:()=>{const w=o.find(q=>q.id===p.id);w&&F(w)},type:"button",className:"btn btn-danger btn-sm",children:[e.jsx("i",{className:"bi bi-trash3-fill"})," 刪除"]})]})})]},p.id))})]})]})})}):e.jsx("section",{className:"bg-gradient",children:e.jsxs("div",{className:"d-flex flex-column justify-content-center align-items-center vh-100",children:[e.jsx("h1",{className:"mb-5",children:"請先登入"}),e.jsxs("form",{className:"d-flex flex-column gap-4 w-50 p-4 shadow rounded-3",children:[e.jsxs("div",{className:"form-floating mb-3",children:[e.jsx("input",{type:"email",className:"form-control",id:"username",placeholder:"name@example.com",value:y.username,name:"username",onChange:k}),e.jsx("label",{htmlFor:"username",children:"Email address"})]}),e.jsxs("div",{className:"form-floating",children:[e.jsx("input",{type:"password",className:"form-control",id:"password",placeholder:"Password",value:y.password,name:"password",onChange:k}),e.jsx("label",{htmlFor:"password",children:"Password"})]}),e.jsx("button",{className:"btn btn-primary",onClick:C,children:"登入"})]}),e.jsx("p",{className:"mt-5 mb-3 text-muted",children:"© 2025 Chris Chen"})]})}),e.jsx("div",{ref:v,id:"productModal",className:"modal",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:e.jsx("div",{className:"modal-dialog modal-dialog-centered modal-xl",children:e.jsxs("div",{className:"modal-content border-0 shadow",children:[e.jsxs("div",{className:"modal-header border-bottom",children:[e.jsx("h5",{className:"modal-title fs-4",children:s==="create"?"新增產品":"編輯產品"}),e.jsx("button",{onClick:I,type:"button",className:"btn-close","aria-label":"Close"})]}),e.jsx("div",{className:"modal-body p-4",children:e.jsxs("div",{className:"row g-4",children:[e.jsxs("div",{className:"col-md-4",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"primary-image",className:"form-label",children:"主要圖片"}),e.jsx("div",{className:"input-group",children:e.jsx("input",{value:c.imageUrl,onChange:p=>t(p),name:"imageUrl",type:"text",id:"primary-image",className:"form-control",placeholder:"請輸入圖片連結"})}),c.imageUrl?e.jsx("img",{src:c.imageUrl,alt:c.title,className:"img-fluid"}):e.jsx("div",{className:"text-muted",children:"尚無圖片"})]}),e.jsxs("div",{className:"border border-2 border-dashed rounded-3 p-3",children:[c.imagesUrl.map((p,w)=>e.jsxs("div",{className:"mb-2",children:[e.jsxs("label",{htmlFor:`imagesUrl-${w+1}`,className:"form-label",children:["其他圖片 ",w+1]}),e.jsx("input",{value:p,onChange:q=>l(q,w),id:`imagesUrl-${w+1}`,type:"text",placeholder:`圖片網址 ${w+1}`,className:"form-control mb-2"}),c.imagesUrl.length>0&&c.imagesUrl.some(q=>q)?c.imagesUrl.map((q,R)=>q?e.jsx("img",{src:q,alt:`副圖 ${R+1}`,className:"img-fluid"},R):null):e.jsx("div",{className:"text-muted",children:"無附圖"})]},w)),e.jsxs("div",{className:"btn-group w-100",children:[c.imagesUrl.length<5&&c.imagesUrl[c.imagesUrl.length-1]!==""&&e.jsx("button",{className:"btn btn-outline-primary btn-sm w-100",onClick:()=>i(),children:"新增圖片"}),c.imagesUrl.length>1&&e.jsx("button",{className:"btn btn-outline-danger btn-sm w-100",onClick:()=>x(),children:"取消圖片"})]})]})]}),e.jsxs("div",{className:"col-md-8",children:[e.jsxs("div",{className:"mb-3",children:[e.jsxs("label",{htmlFor:"title",className:"form-label",children:["標題",c.id]}),e.jsx("input",{value:c.title,onChange:t,name:"title",id:"title",type:"text",className:"form-control",placeholder:"請輸入標題"})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"category",className:"form-label",children:"分類"}),e.jsx("input",{value:c.category,onChange:t,name:"category",id:"category",type:"text",className:"form-control",placeholder:"請輸入分類"})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"unit",className:"form-label",children:"單位"}),e.jsx("input",{value:c.unit,onChange:t,name:"unit",id:"unit",type:"text",className:"form-control",placeholder:"請輸入單位"})]}),e.jsxs("div",{className:"row g-3 mb-3",children:[e.jsxs("div",{className:"col-6",children:[e.jsx("label",{htmlFor:"origin_price",className:"form-label",children:"原價"}),e.jsx("input",{value:c.origin_price,onChange:t,name:"origin_price",id:"origin_price",type:"number",min:"0",className:"form-control",placeholder:"請輸入原價"})]}),e.jsxs("div",{className:"col-6",children:[e.jsx("label",{htmlFor:"price",className:"form-label",children:"售價"}),e.jsx("input",{value:c.price,onChange:t,name:"price",id:"price",type:"number",min:"0",className:"form-control",placeholder:"請輸入售價"})]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"description",className:"form-label",children:"產品描述"}),e.jsx("textarea",{value:c.description,onChange:t,name:"description",id:"description",className:"form-control",rows:4,placeholder:"請輸入產品描述"})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"content",className:"form-label",children:"說明內容"}),e.jsx("textarea",{value:c.content,onChange:t,name:"content",id:"content",className:"form-control",rows:4,placeholder:"請輸入說明內容"})]}),e.jsxs("div",{className:"form-check",children:[e.jsx("input",{checked:!!c.is_enabled,onChange:t,name:"is_enabled",type:"checkbox",className:"form-check-input",id:"isEnabled"}),e.jsx("label",{className:"form-check-label",htmlFor:"isEnabled",children:"是否啟用"})]})]})]})}),e.jsxs("div",{className:"modal-footer border-top bg-light",children:[e.jsx("button",{onClick:I,type:"button",className:"btn btn-secondary",children:"取消"}),e.jsx("button",{onClick:we,type:"button",className:"btn btn-primary",children:"確認"})]})]})})}),e.jsx("div",{ref:S,id:"delProductModal",className:"modal fade",tabIndex:-1,style:{backgroundColor:"rgba(0,0,0,0.5)"},children:e.jsx("div",{className:"modal-dialog",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h1",{className:"modal-title fs-5",children:"刪除產品"}),e.jsx("button",{onClick:g,type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),e.jsxs("div",{className:"modal-body",children:["你是否要刪除 ",e.jsxs("span",{className:"text-danger fw-bold",children:[c.title,"?"]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{onClick:g,type:"button",className:"btn btn-secondary",children:"取消"}),e.jsx("button",{onClick:ke,type:"button",className:"btn btn-danger",children:"刪除"})]})]})})})]})}const ye=({handleLogin:n})=>{const[r,a]=u.useState({username:"",password:""}),c=s=>{const{name:m,value:o}=s.target;a(h=>({...h,[m]:o}))},d=s=>{s.preventDefault(),n(r.username,r.password)};return e.jsxs("section",{className:"position-relative min-vh-100",style:{background:"linear-gradient(135deg, #ff7e5f 0%, #feb47b 100%)"},children:[e.jsx("div",{className:"position-absolute bottom-0 start-0 w-100 overflow-hidden",style:{lineHeight:0},children:e.jsx("svg",{style:{position:"relative",display:"block",width:"calc(100% + 1.3px)",height:"100px"},preserveAspectRatio:"none",viewBox:"0 0 360 30",children:e.jsx("path",{d:"M0,0 C60,20 300,0 360,20 V30 H0 Z",style:{fill:"#fff"}})})}),e.jsxs("div",{className:"d-flex flex-column justify-content-center align-items-center min-vh-100",children:[e.jsx("h1",{className:"mb-3 text-white fw-bold",children:"請先登入"}),e.jsxs("form",{className:"d-flex flex-column gap-4 p-4 shadow rounded-3",style:{width:"min(90%, 400px)",background:"rgba(255, 255, 255, 0.2)",backdropFilter:"blur(8px)"},children:[e.jsxs("div",{className:"form-floating",children:[e.jsx("input",{type:"email",className:"form-control",id:"username",placeholder:"name@example.com",name:"username",value:r.username,onChange:c}),e.jsx("label",{htmlFor:"username",children:"Email address"})]}),e.jsxs("div",{className:"form-floating",children:[e.jsx("input",{type:"password",className:"form-control",id:"password",placeholder:"Password",name:"password",value:r.password,onChange:c}),e.jsx("label",{htmlFor:"password",children:"Password"})]}),e.jsx("button",{className:"btn btn-light fw-bold",onClick:d,children:"登入"})]})]})]})},Oe=({tempProduct:n,setTempProduct:r,modalMode:a,closeProductModal:c,handleUploadProduct:d,productModalRef:s,BASE_URL:m,API_PATH:o})=>{const[,h]=u.useState(0),f=async C=>{var U;const v=(U=C.target.files)==null?void 0:U[0];if(!v){alert("請選擇圖片檔案");return}const S=new FormData;S.append("file-to-upload",v);try{const I=(await N.post(`${m}/v2/api${o}/admin/upload`,S,{headers:{"Content-Type":"multipart/form-data"}})).data.imageUrl;r(g=>({...g,imageUrl:I})),h(g=>g+1)}catch(F){console.error(F),alert("圖片上傳失敗")}},j=C=>{const{value:b,name:v,type:S}=C.target,U=C.target.checked;r(F=>({...F,[v]:S==="checkbox"?U:b}))},y=(C,b)=>{const{value:v}=C.target;r(S=>{const U=[...S.imagesUrl];return U[b]=v,{...S,imagesUrl:U}})},$=()=>{r(C=>({...C,imagesUrl:[...C.imagesUrl,""]}))},k=()=>{r(C=>({...C,imagesUrl:C.imagesUrl.slice(0,C.imagesUrl.length-1)}))},_=async(C,b)=>{var F;const S=(F=C.target.files)==null?void 0:F[0];if(!S){alert("請選擇圖片檔案");return}const U=new FormData;U.append("file-to-upload",S);try{const I=await N.post(`${m}/v2/api${o}/admin/upload`,U,{headers:{"Content-Type":"multipart/form-data"}});console.log(`副圖片上傳成功: ${I.data.imageUrl}`),r(g=>{const t=[...g.imagesUrl];return t[b]=I.data.imageUrl,{...g,imagesUrl:t}})}catch(I){console.error("副圖片上傳失敗:",I),alert("副圖片上傳失敗")}};return e.jsx(e.Fragment,{children:e.jsx("div",{ref:s,id:"productModal",className:"modal",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:e.jsx("div",{className:"modal-dialog modal-dialog-centered modal-xl",children:e.jsxs("div",{className:"modal-content border-0 shadow",children:[e.jsxs("div",{className:"modal-header border-bottom",children:[e.jsx("h5",{className:"modal-title fs-4",children:a==="create"?"新增產品":"編輯產品"}),e.jsx("button",{onClick:c,type:"button",className:"btn-close","aria-label":"Close"})]}),e.jsx("div",{className:"modal-body p-4",children:e.jsxs("div",{className:"row g-4",children:[e.jsxs("div",{className:"col-md-4",children:[e.jsxs("div",{className:"mb-5",children:[e.jsx("label",{htmlFor:"fileInput",className:"form-label",children:" 圖片上傳 "}),e.jsx("input",{type:"file",accept:".jpg,.jpeg,.png",className:"form-control",id:"fileInput",onClick:f})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"primary-image",className:"form-label",children:"主要圖片"}),e.jsx("div",{className:"input-group",children:e.jsx("input",{value:n.imageUrl,onChange:C=>j(C),name:"imageUrl",type:"text",id:"primary-image",className:"form-control",placeholder:"請輸入圖片連結"})}),n.imageUrl?e.jsx("img",{src:n.imageUrl,alt:n.title,className:"img-fluid"}):e.jsx("div",{className:"text-muted",children:"尚無圖片"})]}),e.jsxs("div",{className:"border border-2 border-dashed rounded-3 p-3",children:[n.imagesUrl.map((C,b)=>e.jsxs("div",{className:"mb-2",children:[e.jsxs("label",{htmlFor:`imagesUrl-${b+1}`,className:"form-label",children:["其他圖片 ",b+1]}),e.jsx("input",{type:"file",accept:".jpg,.jpeg,.png",className:"form-control mb-2",id:`fileInput-${b}`,onChange:v=>_(v,b)}),e.jsx("input",{value:C,onChange:v=>y(v,b),id:`imagesUrl-${b+1}`,type:"text",placeholder:`圖片網址 ${b+1}`,className:"form-control mb-2"}),C?e.jsx("img",{src:C,alt:`副圖 ${b+1}`,className:"img-fluid"}):e.jsx("div",{className:"text-muted",children:"尚無圖片"})]},b)),e.jsxs("div",{className:"btn-group w-100",children:[n.imagesUrl.length<5&&n.imagesUrl[n.imagesUrl.length-1]!==""&&e.jsx("button",{className:"btn btn-outline-primary btn-sm w-100",onClick:()=>$(),children:"新增圖片"}),n.imagesUrl.length>1&&e.jsx("button",{className:"btn btn-outline-danger btn-sm w-100",onClick:()=>k(),children:"取消圖片"})]})]})]}),e.jsxs("div",{className:"col-md-8",children:[e.jsxs("div",{className:"mb-3",children:[e.jsxs("label",{htmlFor:"title",className:"form-label",children:["標題",n.id]}),e.jsx("input",{value:n.title,onChange:j,name:"title",id:"title",type:"text",className:"form-control",placeholder:"請輸入標題"})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"category",className:"form-label",children:"分類"}),e.jsx("input",{value:n.category,onChange:j,name:"category",id:"category",type:"text",className:"form-control",placeholder:"請輸入分類"})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"unit",className:"form-label",children:"單位"}),e.jsx("input",{value:n.unit,onChange:j,name:"unit",id:"unit",type:"text",className:"form-control",placeholder:"請輸入單位"})]}),e.jsxs("div",{className:"row g-3 mb-3",children:[e.jsxs("div",{className:"col-6",children:[e.jsx("label",{htmlFor:"origin_price",className:"form-label",children:"原價"}),e.jsx("input",{value:n.origin_price,onChange:j,name:"origin_price",id:"origin_price",type:"number",className:"form-control",placeholder:"請輸入原價"})]}),e.jsxs("div",{className:"col-6",children:[e.jsx("label",{htmlFor:"price",className:"form-label",children:"售價"}),e.jsx("input",{value:n.price,onChange:j,name:"price",id:"price",type:"number",className:"form-control",placeholder:"請輸入售價"})]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"description",className:"form-label",children:"產品描述"}),e.jsx("textarea",{value:n.description,onChange:j,name:"description",id:"description",className:"form-control",rows:4,placeholder:"請輸入產品描述"})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"content",className:"form-label",children:"說明內容"}),e.jsx("textarea",{value:n.content,onChange:j,name:"content",id:"content",className:"form-control",rows:4,placeholder:"請輸入說明內容"})]}),e.jsxs("div",{className:"form-check",children:[e.jsx("input",{checked:!!n.is_enabled,onChange:j,name:"is_enabled",type:"checkbox",className:"form-check-input",id:"isEnabled"}),e.jsx("label",{className:"form-check-label",htmlFor:"isEnabled",children:"是否啟用"})]})]})]})}),e.jsxs("div",{className:"modal-footer border-top bg-light",children:[e.jsx("button",{onClick:c,type:"button",className:"btn btn-secondary",children:"取消"}),e.jsx("button",{onClick:d,type:"button",className:"btn btn-primary",children:"確認"})]})]})})})})},Ve=({pageInfo:n,handlePageChange:r})=>{const{total_pages:a,current_page:c,has_pre:d,has_next:s}=n;return e.jsx("nav",{children:e.jsxs("ul",{className:"pagination",children:[e.jsx("li",{className:`page-item ${d?"":"disabled"}`,children:e.jsx("button",{onClick:()=>d&&r(c-1),className:"page-link",disabled:!d,children:"上一頁"})}),Array.from({length:a},(m,o)=>e.jsx("li",{className:`page-item ${c===o+1?"active":""}`,children:e.jsx("button",{onClick:()=>r(o+1),className:"page-link",children:o+1})},o)),e.jsx("li",{className:`page-item ${s?"":"disabled"}`,children:e.jsx("button",{onClick:()=>s&&r(c+1),className:"page-link",disabled:!s,children:"下一頁"})})]})})},Be=({tempProduct:n,closeDelProductModal:r,handleDelProduct:a,delProductModalRef:c})=>e.jsx(e.Fragment,{children:e.jsx("div",{ref:c,id:"delProductModal",className:"modal fade",tabIndex:-1,style:{backgroundColor:"rgba(0,0,0,0.5)"},children:e.jsx("div",{className:"modal-dialog",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h1",{className:"modal-title fs-5",children:"刪除產品"}),e.jsx("button",{onClick:r,type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),e.jsxs("div",{className:"modal-body",children:["你是否要刪除 ",e.jsxs("span",{className:"text-danger fw-bold",children:[n.title,"?"]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{onClick:r,type:"button",className:"btn btn-secondary",children:"取消"}),e.jsx("button",{onClick:a,type:"button",className:"btn btn-danger",children:"刪除"})]})]})})})}),ve=({token:n})=>{const r=z(),a="https://ec-course-api.hexschool.io",c="/product-backend",d={id:"",imageUrl:"",title:"",category:"",unit:"",origin_price:"",price:"",description:"",content:"",is_enabled:0,imagesUrl:[]},[s,m]=Q.useState([]),[o,h]=u.useState(d),[f,j]=u.useState("create"),[y,$]=u.useState({total_pages:0,current_page:1}),k=u.useRef(null),_=u.useRef(null);u.useEffect(()=>{n&&(N.defaults.headers.common.Authorization=n)},[n]);const C=u.useCallback(async(x=1)=>{try{const A=await N.get(`${a}/v2/api${c}/admin/products?page=${x}`,{headers:{Authorization:n},withCredentials:!0});m(A.data.products),$(A.data.pagination),r(P("取得產品列表成功"))}catch(A){alert("取得產品失敗"),console.error(A)}},[a,c,n,r]);u.useEffect(()=>{C()},[C]),u.useEffect(()=>{new M(k.current),new M(_.current)},[]);const b=(x,A)=>{j(x),h(A?{id:A.id.toString(),imageUrl:A.imageUrl||"",title:A.title,category:A.category,unit:A.unit,origin_price:A.origin_price.toString(),price:A.price.toString(),description:A.description,content:A.content,is_enabled:A.is_enabled,imagesUrl:A.imagesUrl}:d);const J=M.getInstance(k.current);J&&J.show()},v=x=>{h({id:x.id.toString(),imageUrl:x.imageUrl,title:x.title,category:x.category,unit:"",origin_price:x.origin_price.toString(),price:x.price.toString(),description:x.description,content:x.content,is_enabled:x.is_enabled,imagesUrl:x.imagesUrl});const A=M.getInstance(_.current);A&&A.show()},S=()=>{const x=M.getInstance(k.current);x&&x.hide(),h(d)},U=()=>{const x=M.getInstance(_.current);x&&x.hide(),h(d)},F=async()=>{try{const x=await N.post(`${a}/v2/api${c}/admin/product`,{data:{...o,origin_price:Number(o.origin_price),price:Number(o.price),is_enabled:o.is_enabled?1:0,imagesUrl:Array.isArray(o.imagesUrl)?o.imagesUrl:[],rating:o.rating??0,stock:o.stock??0}});console.log(x.data)}catch(x){console.error(x),alert("新增失敗")}},I=async()=>{try{const x=await N.put(`${a}/v2/api${c}/admin/product/${o.id}`,{data:{...o,origin_price:Number(o.origin_price),price:Number(o.price),is_enabled:o.is_enabled?1:0,imagesUrl:Array.isArray(o.imagesUrl)?o.imagesUrl:[],rating:o.rating??0,stock:o.stock??0}});console.log(x.data)}catch(x){console.error(x),alert("更新失敗")}},g=async()=>{const x=f==="create"?F:I;try{await x(),C(),S()}catch(A){console.error(A),alert("新增失敗")}},t=async()=>{try{const x=await N.delete(`${a}/v2/api${c}/admin/product/${o.id}`,{data:{...o,origin_price:Number(o.origin_price),price:Number(o.price),is_enabled:o.is_enabled?1:0,imagesUrl:Array.isArray(o.imagesUrl)?o.imagesUrl:[]}});console.log(x.data)}catch(x){console.error(x),alert("刪除失敗")}},l=async()=>{try{await t(),C(),U()}catch(x){console.error(x),alert("刪除產品失敗")}},i=x=>{C(x)};return e.jsxs(e.Fragment,{children:[e.jsxs("section",{className:"container mt-5",children:[e.jsx("div",{className:"row",children:e.jsxs("div",{className:"col-12 mb-4",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsx("h2",{className:"text-orange fw-bold",children:"產品列表"}),e.jsxs("button",{onClick:()=>{b("create")},type:"button",className:"btn btn-primary",children:[e.jsx("i",{className:"bi bi-plus-lg"})," 建立新的產品"]})]}),e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"產品名稱"}),e.jsx("th",{children:"原價"}),e.jsx("th",{children:"售價"}),e.jsx("th",{children:"是否啟用"}),e.jsx("th",{children:"查看細節"})]})}),e.jsx("tbody",{children:s.map(x=>e.jsxs("tr",{children:[e.jsx("td",{className:"fw-bold",children:x.title}),e.jsx("td",{children:x.origin_price}),e.jsx("td",{children:x.price}),e.jsx("td",{children:x.is_enabled?e.jsx("span",{className:"text-success",children:"啟用"}):e.jsx("span",{className:"text-danger",children:"未啟用"})}),e.jsx("td",{children:e.jsxs("div",{className:"",children:[e.jsxs("button",{onClick:()=>b("edit",x),type:"button",className:"btn btn-primary btn-sm me-2",children:[e.jsx("i",{className:"bi bi-pencil-square"})," 編輯"]}),e.jsxs("button",{onClick:()=>v(x),type:"button",className:"btn btn-danger btn-sm",children:[e.jsx("i",{className:"bi bi-trash3-fill"})," 刪除"]})]})})]},x.id))})]})]})}),e.jsx("div",{className:"d-flex justify-content-center",children:e.jsx(Ve,{pageInfo:y,handlePageChange:i})})]}),e.jsx(Oe,{tempProduct:o,setTempProduct:h,modalMode:f,closeProductModal:S,handleUploadProduct:g,productModalRef:k,BASE_URL:a,API_PATH:c}),e.jsx(Be,{tempProduct:o,closeDelProductModal:U,handleDelProduct:l,delProductModalRef:_})]})};function Qe(){const n="https://ec-course-api.hexschool.io",r="/product-backend",[a,c]=u.useState(!1);u.useEffect(()=>{const s=async()=>{try{await N.post(`${n}/v2/api/user/check`),c(!0)}catch(o){console.error(o),c(!1)}},m=document.cookie.replace(/(?:(?:^|.*;\s*)hexToken\s*=\s*([^;]*).*$)|^.*$/,"$1");N.defaults.headers.common.Authorization=m,s()},[]);const d=(s,m)=>{N.post(`${n}/v2/api${r}/admin/signin`,{username:s,password:m}).then(o=>{const{token:h,expired:f}=o.data;document.cookie=`hexToken=${h}; expires=${new Date(f)}`,N.defaults.headers.common.Authorization=h,o.data.success===!0&&(alert("登入成功"),c(!0))}).catch(o=>{console.error(o),alert("登入失敗"),c(!1)})};return e.jsx(e.Fragment,{children:a?e.jsx(ve,{isAuth:a}):e.jsx(ye,{handleLogin:d})})}const te="https://ec-course-api.hexschool.io",le="/product-backend";function We(){var U,F,I,g;const[n,r]=u.useState([]),[a,c]=u.useState({id:"",title:"",imageUrl:"",content:"",description:"",price:0,origin_price:0}),[d,s]=u.useState([]),[m,o]=u.useState(!1),{register:h,handleSubmit:f,formState:{errors:j}}=ae();u.useEffect(()=>{const t=document.cookie.replace(/(?:(?:^|.*;\s*)hexToken\s*=\s*([^;]*).*$)|^.*$/,"$1");N.defaults.headers.common.Authorization=t,(async()=>{o(!0);try{const i=await N.get(`${te}/v2/api${le}/products`);r(i.data.products)}catch(i){alert("取得產品失敗"),console.error(i)}finally{o(!1)}})()},[]);const y=u.useRef(null);u.useEffect(()=>{y.current&&new M(y.current,{backdrop:!1})},[]);const $=()=>{const t=M.getInstance(y.current);t&&t.show()},k=()=>{const t=M.getInstance(y.current);t&&t.hide()},_=t=>{c({id:String(t.id),title:t.title,imageUrl:t.imageUrl,content:t.content,description:t.description,price:t.price,origin_price:t.origin_price}),$()},C=async t=>{o(!0);try{await N.post(`${te}/v2/api${le}/cart`,{data:{product_id:t.id,qty:1}}),s(l=>l.find(x=>x.id===t.id)?l.map(x=>x.id===t.id?{...x,quantity:x.quantity+1}:x):[...l,{...t,quantity:1}]),alert("已加入購物車")}catch(l){console.error(l),alert("加入購物車失敗")}finally{o(!1)}},b=async t=>{if(d.length===0){alert("購物車無產品，無法結帳");return}try{await N.post(`${te}/v2/api${le}/order`,{data:{user:{name:t.name,email:t.email,tel:t.tel,address:t.address},message:t.message}}),s([]),alert("訂單已送出並清空購物車")}catch(l){console.error(l),alert("訂單發送失敗")}},[v,S]=u.useState(1);return e.jsxs("div",{className:"container",children:[m&&e.jsx("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:"rgba(255, 255, 255, 0.5)"},children:e.jsx(W,{type:"spin",color:"#000"})}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("table",{className:"table align-middle",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"圖片"}),e.jsx("th",{children:"商品名稱"}),e.jsx("th",{children:"價格"}),e.jsx("th",{})]})}),e.jsx("tbody",{children:n.map(t=>e.jsxs("tr",{children:[e.jsx("td",{style:{width:"200px"},children:e.jsx("img",{className:"img-fluid",src:t.imageUrl,alt:t.title})}),e.jsx("td",{children:t.title}),e.jsxs("td",{children:[e.jsxs("del",{className:"h6",children:["原價 ",t.origin_price," 元"]}),e.jsxs("div",{className:"h5",children:["特價 ",t.origin_price,"元"]})]}),e.jsx("td",{children:e.jsxs("div",{className:"btn-group btn-group-sm",children:[e.jsx("button",{onClick:()=>_(t),type:"button",className:"btn btn-outline-secondary",children:"查看更多"}),e.jsx("button",{onClick:()=>C(t),type:"button",className:"btn btn-outline-danger",children:"加到購物車"})]})})]},t.id))})]}),e.jsx("div",{ref:y,style:{backgroundColor:"rgba(0,0,0,0.5)"},className:"modal fade",id:"productModal",tabIndex:-1,children:e.jsx("div",{className:"modal-dialog modal-dialog-centered",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("h2",{className:"modal-title fs-5",children:["產品名稱：",a.title]}),e.jsx("button",{onClick:k,type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),e.jsxs("div",{className:"modal-body",children:[e.jsx("img",{src:a.imageUrl,alt:a.title,className:"img-fluid"}),e.jsxs("p",{children:["內容：",a.content]}),e.jsxs("p",{children:["描述：",a.description]}),e.jsxs("p",{children:["價錢：",a.price," ",e.jsx("del",{children:a.origin_price})," 元"]}),e.jsxs("div",{className:"input-group align-items-center",children:[e.jsx("label",{htmlFor:"qtySelect",children:"數量："}),e.jsx("select",{value:v,onChange:t=>S(Number(t.target.value)),id:"qtySelect",className:"form-select",children:Array.from({length:10}).map((t,l)=>e.jsx("option",{value:l+1,children:l+1},l))})]})]}),e.jsx("div",{className:"modal-footer",children:e.jsx("button",{type:"button",className:"btn btn-primary",onClick:()=>a.id&&C(a),disabled:!a.id,children:"加入購物車"})})]})})}),e.jsx("div",{className:"text-end py-3",children:e.jsx("button",{className:"btn btn-outline-danger",type:"button",onClick:()=>s([]),children:"清空購物車"})}),e.jsxs("table",{className:"table align-middle",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{}),e.jsx("th",{children:"品名"}),e.jsx("th",{style:{width:"150px"},children:"數量/單位"}),e.jsx("th",{className:"text-end",children:"單價"})]})}),e.jsx("tbody",{children:d.map(t=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("button",{type:"button",className:"btn btn-outline-danger btn-sm",onClick:()=>s(l=>l.filter(i=>i.id!==t.id)),children:"x"})}),e.jsx("td",{children:t.title}),e.jsx("td",{style:{width:"150px"},children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsxs("div",{className:"btn-group me-2",role:"group",children:[e.jsx("button",{type:"button",className:"btn btn-outline-dark btn-sm",onClick:()=>s(l=>l.map(i=>i.id===t.id&&i.quantity>1?{...i,quantity:i.quantity-1}:i)),children:"-"}),e.jsx("span",{className:"btn border border-dark",style:{width:"50px",cursor:"auto"},children:t.quantity}),e.jsx("button",{type:"button",className:"btn btn-outline-dark btn-sm",onClick:()=>s(l=>l.map(i=>i.id===t.id?{...i,quantity:i.quantity+1}:i)),children:"+"})]}),e.jsx("span",{className:"input-group-text bg-transparent border-0",children:"unit"})]})}),e.jsx("td",{className:"text-end",children:t.price*t.quantity})]},t.id))}),e.jsx("tfoot",{children:e.jsxs("tr",{children:[e.jsx("td",{colSpan:3,className:"text-end",children:"總計："}),e.jsx("td",{className:"text-end",style:{width:"130px"},children:d.reduce((t,l)=>t+l.price*l.quantity,0)})]})})]})]}),e.jsx("div",{className:"my-5 row justify-content-center",children:e.jsxs("form",{className:"col-md-6",onSubmit:f(b),children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"email",className:"form-label",children:"Email"}),e.jsx("input",{id:"email",type:"email",className:"form-control",placeholder:"請輸入 Email",...h("email",{required:"必填"})}),e.jsx("p",{className:"text-danger my-2",children:(U=j.email)==null?void 0:U.message})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"name",className:"form-label",children:"收件人姓名"}),e.jsx("input",{id:"name",className:"form-control",placeholder:"請輸入姓名",...h("name",{required:"必填"})}),e.jsx("p",{className:"text-danger my-2",children:(F=j.name)==null?void 0:F.message})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"tel",className:"form-label",children:"收件人電話"}),e.jsx("input",{id:"tel",type:"text",className:"form-control",placeholder:"請輸入電話",...h("tel",{required:"必填",pattern:{value:/^(0[2-8]\d{7}|09\d{8})$/,message:"請輸入正確的電話格式"}})}),e.jsx("p",{className:"text-danger my-2",children:(I=j.tel)==null?void 0:I.message})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"address",className:"form-label",children:"收件人地址"}),e.jsx("input",{id:"address",type:"text",className:"form-control",placeholder:"請輸入地址",...h("address",{required:"必填"})}),e.jsx("p",{className:"text-danger my-2",children:(g=j.address)==null?void 0:g.message})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"message",className:"form-label",children:"留言"}),e.jsx("textarea",{id:"message",className:"form-control",cols:30,rows:10,...h("message")})]}),e.jsx("div",{className:"text-end",children:e.jsx("button",{type:"submit",className:"btn btn-danger",children:"送出訂單"})})]})})]})}const ce="https://ec-course-api.hexschool.io",ne="/product-backend";function Ze(){var U,F,I,g;const[n,r]=u.useState([]),[a,c]=u.useState({title:"",imageUrl:"",content:"",description:"",price:0,origin_price:0}),[d,s]=u.useState([]),[m,o]=u.useState(!1),{register:h,handleSubmit:f,formState:{errors:j}}=ae();u.useEffect(()=>{const t=document.cookie.replace(/(?:(?:^|.*;\s*)hexToken\s*=\s*([^;]*).*$)|^.*$/,"$1");N.defaults.headers.common.Authorization=t,(async()=>{o(!0);try{const i=await N.get(`${ce}/v2/api${ne}/products`);r(i.data.products)}catch(i){alert("取得產品失敗"),console.error(i)}finally{o(!1)}})()},[]);const y=u.useRef(null);u.useEffect(()=>{y.current&&new M(y.current,{backdrop:!1})},[]);const $=()=>{const t=M.getInstance(y.current);t&&t.show()},k=()=>{const t=M.getInstance(y.current);t&&t.hide()},_=t=>{c(t),$()},C=async t=>{o(!0);try{await N.post(`${ce}/v2/api${ne}/cart`,{data:{product_id:t.id,qty:1}}),s(l=>l.find(x=>x.id===t.id)?l.map(x=>x.id===t.id?{...x,quantity:x.quantity+1}:x):[...l,{...t,quantity:1}]),alert("已加入購物車")}catch(l){console.error(l),alert("加入購物車失敗")}finally{o(!1)}},b=async t=>{if(d.length===0){alert("購物車無產品，無法結帳");return}try{await N.post(`${ce}/v2/api${ne}/order`,{data:{user:{name:t.name,email:t.email,tel:t.tel,address:t.address},message:t.message}}),s([]),alert("訂單已送出並清空購物車")}catch(l){console.error(l),alert("訂單發送失敗")}},[v,S]=u.useState(1);return e.jsxs(e.Fragment,{children:[e.jsx(de,{})," ",e.jsxs("div",{className:"container",children:[m&&e.jsx("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:"rgba(255, 255, 255, 0.5)"},children:e.jsx(W,{type:"spin",color:"#000"})}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("table",{className:"table align-middle",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"圖片"}),e.jsx("th",{children:"商品名稱"}),e.jsx("th",{children:"價格"}),e.jsx("th",{})]})}),e.jsx("tbody",{children:n.map(t=>e.jsxs("tr",{children:[e.jsx("td",{style:{width:"200px"},children:e.jsx("img",{className:"img-fluid",src:t.imageUrl,alt:t.title})}),e.jsx("td",{children:t.title}),e.jsxs("td",{children:[e.jsxs("del",{className:"h6",children:["原價 ",t.origin_price," 元"]}),e.jsxs("div",{className:"h5",children:["特價 ",t.origin_price,"元"]})]}),e.jsx("td",{children:e.jsxs("div",{className:"btn-group btn-group-sm",children:[e.jsx("button",{onClick:()=>_(t),type:"button",className:"btn btn-outline-secondary",children:"查看更多"}),e.jsx("button",{onClick:()=>C(t),type:"button",className:"btn btn-outline-danger",children:"加到購物車"})]})})]},t.id))})]}),e.jsx("div",{ref:y,style:{backgroundColor:"rgba(0,0,0,0.5)"},className:"modal fade",id:"productModal",tabIndex:-1,children:e.jsx("div",{className:"modal-dialog modal-dialog-centered",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("h2",{className:"modal-title fs-5",children:["產品名稱：",a.title]}),e.jsx("button",{onClick:k,type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),e.jsxs("div",{className:"modal-body",children:[e.jsx("img",{src:a.imageUrl,alt:a.title,className:"img-fluid"}),e.jsxs("p",{children:["內容：",a.content]}),e.jsxs("p",{children:["描述：",a.description]}),e.jsxs("p",{children:["價錢：",a.price," ",e.jsx("del",{children:a.origin_price})," 元"]}),e.jsxs("div",{className:"input-group align-items-center",children:[e.jsx("label",{htmlFor:"qtySelect",children:"數量："}),e.jsx("select",{value:v,onChange:t=>S(Number(t.target.value)),id:"qtySelect",className:"form-select",children:Array.from({length:10}).map((t,l)=>e.jsx("option",{value:l+1,children:l+1},l))})]})]}),e.jsx("div",{className:"modal-footer",children:e.jsx("button",{type:"button",className:"btn btn-primary",children:"加入購物車"})})]})})}),e.jsx("div",{className:"text-end py-3",children:e.jsx("button",{className:"btn btn-outline-danger",type:"button",onClick:()=>s([]),children:"清空購物車"})}),e.jsxs("table",{className:"table align-middle",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{}),e.jsx("th",{children:"品名"}),e.jsx("th",{style:{width:"150px"},children:"數量/單位"}),e.jsx("th",{className:"text-end",children:"單價"})]})}),e.jsx("tbody",{children:d.map(t=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("button",{type:"button",className:"btn btn-outline-danger btn-sm",onClick:()=>s(l=>l.filter(i=>i.id!==t.id)),children:"x"})}),e.jsx("td",{children:t.title}),e.jsx("td",{style:{width:"150px"},children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsxs("div",{className:"btn-group me-2",role:"group",children:[e.jsx("button",{type:"button",className:"btn btn-outline-dark btn-sm",onClick:()=>s(l=>l.map(i=>i.id===t.id&&i.quantity>1?{...i,quantity:i.quantity-1}:i)),children:"-"}),e.jsx("span",{className:"btn border border-dark",style:{width:"50px",cursor:"auto"},children:t.quantity}),e.jsx("button",{type:"button",className:"btn btn-outline-dark btn-sm",onClick:()=>s(l=>l.map(i=>i.id===t.id?{...i,quantity:i.quantity+1}:i)),children:"+"})]}),e.jsx("span",{className:"input-group-text bg-transparent border-0",children:"unit"})]})}),e.jsx("td",{className:"text-end",children:t.price*t.quantity})]},t.id))}),e.jsx("tfoot",{children:e.jsxs("tr",{children:[e.jsx("td",{colSpan:3,className:"text-end",children:"總計："}),e.jsx("td",{className:"text-end",style:{width:"130px"},children:d.reduce((t,l)=>t+l.price*l.quantity,0)})]})})]})]}),e.jsx("div",{className:"my-5 row justify-content-center",children:e.jsxs("form",{className:"col-md-6",onSubmit:f(b),children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"email",className:"form-label",children:"Email"}),e.jsx("input",{id:"email",type:"email",className:"form-control",placeholder:"請輸入 Email",...h("email",{required:"必填"})}),e.jsx("p",{className:"text-danger my-2",children:(U=j.email)==null?void 0:U.message})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"name",className:"form-label",children:"收件人姓名"}),e.jsx("input",{id:"name",className:"form-control",placeholder:"請輸入姓名",...h("name",{required:"必填"})}),e.jsx("p",{className:"text-danger my-2",children:(F=j.name)==null?void 0:F.message})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"tel",className:"form-label",children:"收件人電話"}),e.jsx("input",{id:"tel",type:"text",className:"form-control",placeholder:"請輸入電話",...h("tel",{required:"必填",pattern:{value:/^(0[2-8]\d{7}|09\d{8})$/,message:"請輸入正確的電話格式"}})}),e.jsx("p",{className:"text-danger my-2",children:(I=j.tel)==null?void 0:I.message})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"address",className:"form-label",children:"收件人地址"}),e.jsx("input",{id:"address",type:"text",className:"form-control",placeholder:"請輸入地址",...h("address",{required:"必填"})}),e.jsx("p",{className:"text-danger my-2",children:(g=j.address)==null?void 0:g.message})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"message",className:"form-label",children:"留言"}),e.jsx("textarea",{id:"message",className:"form-control",cols:30,rows:10,...h("message")})]}),e.jsx("div",{className:"text-end",children:e.jsx("button",{type:"submit",className:"btn btn-danger",children:"送出訂單"})})]})})]})]})}const K="https://ec-course-api.hexschool.io",X="/product-backend";function Je(){var F,I,g,t;const[n,r]=u.useState([]),[a,c]=u.useState({id:"",title:"",imageUrl:"",content:"",description:"",price:0,origin_price:0}),[d,s]=u.useState(!1),{register:m,handleSubmit:o,formState:{errors:h}}=ae(),f=z(),j=oe(l=>l.cart);u.useEffect(()=>{const l=document.cookie.replace(/(?:(?:^|.*;\s*)hexToken\s*=\s*([^;]*).*$)|^.*$/,"$1");N.defaults.headers.common.Authorization=l,(async()=>{s(!0);try{const x=await N.get(`${K}/v2/api${X}/products`);r(x.data.products)}catch(x){alert("取得產品失敗"),console.error(x)}finally{s(!1)}})()},[]);const y=u.useRef(null);u.useEffect(()=>{y.current&&new M(y.current,{backdrop:!1})},[]);const $=()=>{const l=M.getInstance(y.current);l&&l.show()},k=()=>{const l=M.getInstance(y.current);l&&l.hide()},_=l=>{c(l),$()},C=async l=>{s(!0);try{await N.post(`${K}/v2/api${X}/cart`,{data:{product_id:l.id,qty:1}}),f(V({product:l,quantity:1})),f(P("已加入購物車"))}catch(i){console.error(i),alert("加入購物車失敗")}finally{s(!1)}},b=async()=>{s(!0);try{await N.post(`${K}/v2/api${X}/cart`,{data:{product_id:a.id,qty:S}}),f(V({product:a,quantity:S})),f(P(`已加入 ${S} 個 ${a.title} 至購物車`)),k()}catch(l){console.error(l),alert("加入購物車失敗")}finally{s(!1)}},v=async l=>{if(j.length===0){alert("購物車無產品，無法結帳");return}try{await N.post(`${K}/v2/api${X}/order`,{data:{user:{name:l.name,email:l.email,tel:l.tel,address:l.address},message:l.message}}),f(B()),f(P("訂單已送出並清空購物車"))}catch(i){console.error(i),alert("訂單發送失敗")}},[S,U]=u.useState(1);return e.jsxs(e.Fragment,{children:[e.jsx(de,{}),e.jsx(Z,{}),e.jsxs("div",{className:"container",children:[d&&e.jsx("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:"rgba(255, 255, 255, 0.5)"},children:e.jsx(W,{type:"spin",color:"#000"})}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("table",{className:"table align-middle",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"圖片"}),e.jsx("th",{children:"商品名稱"}),e.jsx("th",{children:"價格"}),e.jsx("th",{})]})}),e.jsx("tbody",{children:n.map(l=>e.jsxs("tr",{children:[e.jsx("td",{style:{width:"200px"},children:e.jsx("img",{className:"img-fluid",src:l.imageUrl,alt:l.title})}),e.jsx("td",{children:l.title}),e.jsxs("td",{children:[e.jsxs("del",{className:"h6",children:["原價 ",l.origin_price," 元"]}),e.jsxs("div",{className:"h5",children:["特價 ",l.origin_price,"元"]})]}),e.jsx("td",{children:e.jsxs("div",{className:"btn-group btn-group-sm",children:[e.jsx("button",{onClick:()=>_(l),type:"button",className:"btn btn-outline-secondary",children:"查看更多"}),e.jsx("button",{onClick:()=>C(l),type:"button",className:"btn btn-outline-danger",children:"加到購物車"})]})})]},l.id))})]}),e.jsx("div",{ref:y,style:{backgroundColor:"rgba(0,0,0,0.5)"},className:"modal fade",id:"productModal",tabIndex:-1,children:e.jsx("div",{className:"modal-dialog modal-dialog-centered",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("h2",{className:"modal-title fs-5",children:["產品名稱：",a.title]}),e.jsx("button",{onClick:k,type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),e.jsxs("div",{className:"modal-body",children:[e.jsx("img",{src:a.imageUrl,alt:a.title,className:"img-fluid"}),e.jsxs("p",{children:["內容：",a.content]}),e.jsxs("p",{children:["描述：",a.description]}),e.jsxs("p",{children:["價錢：",a.price," ",e.jsx("del",{children:a.origin_price})," 元"]}),e.jsxs("div",{className:"input-group align-items-center",children:[e.jsx("label",{htmlFor:"qtySelect",children:"數量："}),e.jsx("select",{value:S,onChange:l=>U(Number(l.target.value)),id:"qtySelect",className:"form-select",children:Array.from({length:10}).map((l,i)=>e.jsx("option",{value:i+1,children:i+1},i))})]})]}),e.jsx("div",{className:"modal-footer",children:e.jsx("button",{type:"button",className:"btn btn-primary",onClick:b,children:"加入購物車"})})]})})}),e.jsx("div",{className:"text-end py-3",children:e.jsx("button",{className:"btn btn-outline-danger",type:"button",onClick:()=>f(B()),children:"清空購物車"})}),e.jsxs("table",{className:"table align-middle",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{}),e.jsx("th",{children:"品名"}),e.jsx("th",{style:{width:"150px"},children:"數量/單位"}),e.jsx("th",{className:"text-end",children:"單價"})]})}),e.jsx("tbody",{children:j.map(l=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("button",{type:"button",className:"btn btn-outline-danger btn-sm",onClick:()=>f(B()),children:"x"})}),e.jsx("td",{children:l.title}),e.jsx("td",{style:{width:"150px"},children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsxs("div",{className:"btn-group me-2",role:"group",children:[e.jsx("button",{type:"button",className:"btn btn-outline-dark btn-sm",onClick:()=>f(V({product:l,quantity:l.quantity-1})),children:"-"}),e.jsx("span",{className:"btn border border-dark",style:{width:"50px",cursor:"auto"},children:l.quantity}),e.jsx("button",{type:"button",className:"btn btn-outline-dark btn-sm",onClick:()=>f(V({product:l,quantity:l.quantity+1})),children:"+"})]}),e.jsx("span",{className:"input-group-text bg-transparent border-0",children:"unit"})]})}),e.jsx("td",{className:"text-end",children:l.price*l.quantity})]},l.id))}),e.jsx("tfoot",{children:e.jsxs("tr",{children:[e.jsx("td",{colSpan:3,className:"text-end",children:"總計："}),e.jsx("td",{className:"text-end",style:{width:"130px"},children:j.reduce((l,i)=>l+i.price*i.quantity,0)})]})})]})]}),e.jsx("div",{className:"my-5 row justify-content-center",children:e.jsxs("form",{className:"col-md-6",onSubmit:o(v),children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"email",className:"form-label",children:"Email"}),e.jsx("input",{id:"email",type:"email",className:"form-control",placeholder:"請輸入 Email",...m("email",{required:"必填"})}),e.jsx("p",{className:"text-danger my-2",children:(F=h.email)==null?void 0:F.message})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"name",className:"form-label",children:"收件人姓名"}),e.jsx("input",{id:"name",className:"form-control",placeholder:"請輸入姓名",...m("name",{required:"必填"})}),e.jsx("p",{className:"text-danger my-2",children:(I=h.name)==null?void 0:I.message})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"tel",className:"form-label",children:"收件人電話"}),e.jsx("input",{id:"tel",type:"text",className:"form-control",placeholder:"請輸入電話",...m("tel",{required:"必填",pattern:{value:/^(0[2-8]\d{7}|09\d{8})$/,message:"請輸入正確的電話格式"}})}),e.jsx("p",{className:"text-danger my-2",children:(g=h.tel)==null?void 0:g.message})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"address",className:"form-label",children:"收件人地址"}),e.jsx("input",{id:"address",type:"text",className:"form-control",placeholder:"請輸入地址",...m("address",{required:"必填"})}),e.jsx("p",{className:"text-danger my-2",children:(t=h.address)==null?void 0:t.message})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"message",className:"form-label",children:"留言"}),e.jsx("textarea",{id:"message",className:"form-control",cols:30,rows:10,...m("message")})]}),e.jsx("div",{className:"text-end",children:e.jsx("button",{type:"submit",className:"btn btn-danger",children:"送出訂單"})})]})})]})]})}const re="https://ec-course-api.hexschool.io",ie="/product-backend",Ke=({cart:n,setCart:r})=>{const[a,c]=u.useState([]),[d,s]=u.useState(!1),[m,o]=u.useState("全部"),[h,f]=u.useState(1),j=5,y=z();u.useEffect(()=>{(async()=>{s(!0);try{const t=await N.get(`${re}/v2/api${ie}/products`);c(t.data.products)}catch(t){alert("取得產品失敗"),console.error(t)}finally{s(!1)}})()},[]);const $=async g=>{s(!0);try{await N.post(`${re}/v2/api${ie}/cart`,{data:{product_id:g.id,qty:1}}),r(t=>t.find(i=>i.id===g.id)?t.map(i=>i.id===g.id?{...i,quantity:i.quantity+1}:i):[...t,{...g,quantity:1}]),y(P("已加入購物車"))}catch(t){console.error(t),alert("加入購物車失敗")}finally{s(!1)}},k=async g=>{s(!0);try{await N.delete(`${re}/v2/api${ie}/cart/${g}`),r(t=>t.filter(l=>l.id!==g)),y(P("已從購物車移除產品"))}catch(t){console.error(t),alert("從購物車移除產品失敗")}finally{s(!1)}},_=m==="全部"?a:a.filter(g=>g.category===m),C=Math.ceil(_.length/j),b=(h-1)*j,v=h*j,S=_.slice(b,v),U=g=>{o(g),f(1)},F=()=>{h>1&&f(g=>g-1)},I=()=>{h<C&&f(g=>g+1)};return e.jsxs(e.Fragment,{children:[e.jsx(Z,{}),e.jsxs("div",{className:"container mt-4",children:[d&&e.jsx(W,{type:"spin",color:"#000",className:"d-block mx-auto"}),e.jsxs("div",{className:"mb-3",children:[e.jsx("span",{className:"me-2",children:"分類篩選:"}),["全部","貓砂","貓砂盆","貓糧"].map(g=>e.jsx("button",{className:`btn me-2 ${m===g?"btn-primary":"btn-outline-primary"}`,onClick:()=>U(g),children:g},g))]}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[e.jsx("h1",{className:"m-0",children:"產品列表"}),e.jsx(E,{to:"/cart",className:"btn btn-danger",children:"查看購物車"})]}),e.jsxs("table",{className:"table align-middle",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"圖片"}),e.jsx("th",{children:"商品名稱"}),e.jsx("th",{children:"價格"}),e.jsx("th",{})]})}),e.jsx("tbody",{children:S.map(g=>e.jsxs("tr",{children:[e.jsx("td",{style:{width:"200px"},children:e.jsx("img",{className:"img-fluid",src:g.imageUrl,alt:g.title})}),e.jsx("td",{children:g.title}),e.jsxs("td",{children:[e.jsxs("del",{className:"h6",children:["原價 ",g.origin_price," 元"]}),e.jsxs("div",{className:"h5",children:["特價 ",g.price," 元"]})]}),e.jsx("td",{children:e.jsxs("div",{className:"btn-group btn-group-sm",children:[e.jsx(E,{to:`/products/${g.id}`,className:"btn btn-outline-secondary",children:"查看更多"}),e.jsx("button",{onClick:()=>$(g),type:"button",className:"btn btn-outline-danger",children:"加到購物車"})]})})]},g.id))})]}),e.jsxs("div",{className:"d-flex justify-content-center align-items-center mb-5",children:[e.jsx("button",{className:"btn btn-secondary me-2",onClick:F,disabled:h===1,children:"上一頁"}),e.jsxs("span",{children:["第 ",h," / ",C," 頁"]}),e.jsx("button",{className:"btn btn-secondary ms-2",onClick:I,disabled:h===C||C===0,children:"下一頁"})]}),n.length>0&&e.jsxs("div",{className:"mt-5",children:[e.jsx("h2",{children:"購物車"}),e.jsxs("table",{className:"table align-middle",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{}),e.jsx("th",{children:"品名"}),e.jsx("th",{children:"數量"}),e.jsx("th",{className:"text-end",children:"單價"}),e.jsx("th",{className:"text-end",children:"小計"})]})}),e.jsx("tbody",{children:n.map(g=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("button",{type:"button",className:"btn btn-outline-danger btn-sm",onClick:()=>k(g.id),children:"x"})}),e.jsx("td",{children:g.title}),e.jsx("td",{children:g.quantity}),e.jsx("td",{className:"text-end",children:g.price}),e.jsx("td",{className:"text-end",children:g.price*g.quantity})]},g.id))}),e.jsx("tfoot",{children:e.jsxs("tr",{children:[e.jsx("td",{colSpan:4,className:"text-end",children:"總計："}),e.jsx("td",{className:"text-end",children:n.reduce((g,t)=>g+t.price*t.quantity,0)})]})})]}),e.jsx("div",{className:"text-end",children:e.jsx("button",{className:"btn btn-danger",onClick:()=>{r([]),y(P("購物車已清空"))},children:"清空購物車"})})]})]})]})},be="https://ec-course-api.hexschool.io",pe="/product-backend",Xe=()=>{const{id:n}=Me(),r=Ue(),[a,c]=u.useState(null),[d,s]=u.useState(!1),m=z();u.useEffect(()=>{(async()=>{s(!0);try{const f=await N.get(`${be}/v2/api${pe}/product/${n}`);c(f.data.product)}catch(f){alert("取得產品詳情失敗"),console.error(f)}finally{s(!1)}})()},[n]);const o=async()=>{if(a){s(!0);try{await N.post(`${be}/v2/api${pe}/cart`,{data:{product_id:a.id,qty:1}}),m(V({product:{id:a.id,title:a.title,imageUrl:a.imageUrl,price:a.price,origin_price:a.origin_price},quantity:1})),m(P("已加入購物車"))}catch(h){console.error("加入購物車失敗",h),alert("加入購物車失敗")}finally{s(!1)}}};return d?e.jsx("div",{className:"d-flex justify-content-center align-items-center vh-100",children:e.jsx(W,{type:"spin",color:"#000"})}):a?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"container mt-4",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsx("h1",{children:"產品詳細頁"}),e.jsx("button",{className:"btn btn-danger",onClick:o,children:"加到購物車"})]}),e.jsx("img",{src:a.imageUrl,alt:a.title,className:"img-fluid mb-3"}),e.jsx("h2",{children:a.title}),e.jsx("p",{children:a.content}),e.jsx("p",{children:a.description}),e.jsxs("p",{children:["價格：",a.price," 元 ",e.jsxs("del",{children:[a.origin_price," 元"]})]}),e.jsx("button",{className:"btn btn-outline-primary",onClick:()=>r("/products"),children:"返回產品列表"})]})}):e.jsx("h1",{className:"text-center mt-5",children:"找不到產品"})},D="https://ec-course-api.hexschool.io",O="/product-backend",Ge=()=>{var $,k,_,C;const{register:n,handleSubmit:r,formState:{errors:a}}=ae(),[c,d]=u.useState(!1),s=oe(b=>b.cart),m=z(),o=s.reduce((b,v)=>b+v.price*v.quantity,0),h=async b=>{if(s.length===0){m(P("購物車是空的，無法送出訂單！"));return}d(!0);try{await N.post(`${D}/v2/api${O}/order`,{data:{user:{name:b.name,email:b.email,tel:b.tel,address:b.address},message:b.message,products:s.map(v=>({product_id:v.id,qty:v.quantity}))}}),alert("訂單送出成功！"),m(B()),window.location.reload()}catch(v){console.error("訂單送出失敗",v),alert("訂單送出失敗，請稍後再試！")}finally{d(!1)}},f=async b=>{d(!0);try{await N.delete(`${D}/v2/api${O}/cart/${b}`),m(ue(b)),m(P("已從購物車移除商品"))}catch(v){console.error("刪除購物車商品失敗",v),m(P("刪除購物車商品失敗，請稍後再試"))}finally{d(!1)}},j=async b=>{d(!0);try{if(b.quantity>1){const v=b.quantity-1;await N.post(`${D}/v2/api${O}/cart`,{data:{product_id:b.id,qty:v}}),m(je({id:b.id,quantity:v})),m(P(`已減少 1 個 ${b.title}`))}else await N.delete(`${D}/v2/api${O}/cart/${b.id}`),m(ue(b.id)),m(P(`已從購物車移除 ${b.title}`))}catch(v){console.error("更新購物車失敗",v),m(P("更新購物車失敗，請稍後再試"))}finally{d(!1)}},y=async b=>{d(!0);try{const v=b.quantity+1;await N.post(`${D}/v2/api${O}/cart`,{data:{product_id:b.id,qty:v}}),m(je({id:b.id,quantity:v})),m(P(`已增加 1 個 ${b.title}`))}catch(v){console.error("更新購物車失敗",v),m(P("更新購物車失敗，請稍後再試"))}finally{d(!1)}};return e.jsxs(e.Fragment,{children:[e.jsx(Z,{}),e.jsxs("div",{className:"container mt-4",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsx("h1",{className:"text-orange fw-bold",children:"購物車"}),e.jsx(E,{to:"/products",className:"btn btn-outline-primary mt-3",children:"返回產品列表"})]}),s.length===0?e.jsxs("div",{className:"text-center mt-5",children:[e.jsx("div",{className:"text-danger col-12",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"#000000",width:"80px",height:"80px",viewBox:"0 0 22 22",id:"memory-cart",children:e.jsx("path",{d:"M19 14V16H6V15H5V11H4V8H3V3H1V1H5V4H21V8H20V11H19V12H7V14H19M5 7H6V10H18V7H19V6H5V7M7 17H9V18H10V20H9V21H7V20H6V18H7V17M15 17H17V18H18V20H17V21H15V20H14V18H15V17Z"})})}),e.jsx("h2",{className:"text-muted mt-3",children:"您的購物車是空的"}),e.jsx("p",{className:"text-muted",children:"趕快去選購您喜愛的商品吧！"}),e.jsx(E,{to:"/products",className:"btn btn-primary mt-3",children:"返回產品列表"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"品名"}),e.jsx("th",{children:"數量"}),e.jsx("th",{children:"單價"}),e.jsx("th",{children:"總價"}),e.jsx("th",{children:"操作"})]})}),e.jsx("tbody",{children:s.map(b=>e.jsxs("tr",{children:[e.jsx("td",{children:b.title}),e.jsxs("td",{children:[e.jsx("button",{className:"btn btn-outline-secondary btn-sm me-2",onClick:()=>j(b),children:"-"}),b.quantity,e.jsx("button",{className:"btn btn-outline-secondary btn-sm ms-2",onClick:()=>y(b),children:"+"})]}),e.jsxs("td",{children:[b.price," 元"]}),e.jsxs("td",{children:[b.price*b.quantity," 元"]}),e.jsx("td",{children:e.jsx("button",{className:"btn btn-outline-danger btn-sm",onClick:()=>f(b.id),children:"移除"})})]},b.id))}),e.jsx("tfoot",{children:e.jsxs("tr",{children:[e.jsx("td",{colSpan:3,className:"text-end fw-bold",children:"總計："}),e.jsxs("td",{className:"fw-bold",children:[o," 元"]})]})})]}),e.jsx("div",{className:"my-5 row justify-content-center",children:e.jsxs("form",{className:"col-md-6",onSubmit:r(h),children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"email",className:"form-label",children:"Email"}),e.jsx("input",{id:"email",type:"email",className:"form-control",placeholder:"請輸入 Email",...n("email",{required:"必填"})}),e.jsx("p",{className:"text-danger my-2",children:($=a.email)==null?void 0:$.message})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"name",className:"form-label",children:"收件人姓名"}),e.jsx("input",{id:"name",className:"form-control",placeholder:"請輸入姓名",...n("name",{required:"必填"})}),e.jsx("p",{className:"text-danger my-2",children:(k=a.name)==null?void 0:k.message})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"tel",className:"form-label",children:"收件人電話"}),e.jsx("input",{id:"tel",type:"text",className:"form-control",placeholder:"請輸入電話",...n("tel",{required:"必填",pattern:{value:/^(0[2-8]\d{7}|09\d{8})$/,message:"請輸入正確的電話格式"}})}),e.jsx("p",{className:"text-danger my-2",children:(_=a.tel)==null?void 0:_.message})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"address",className:"form-label",children:"收件人地址"}),e.jsx("input",{id:"address",type:"text",className:"form-control",placeholder:"請輸入地址",...n("address",{required:"必填"})}),e.jsx("p",{className:"text-danger my-2",children:(C=a.address)==null?void 0:C.message})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"message",className:"form-label",children:"留言"}),e.jsx("textarea",{id:"message",className:"form-control",cols:30,rows:3,...n("message")})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("button",{type:"submit",className:"btn btn-danger",disabled:c,children:c?"送出中...":"送出訂單"}),e.jsx("button",{type:"button",className:"btn btn-outline-secondary ms-2",onClick:()=>{m(B()),window.location.reload()},children:"清空購物車"})]})]})})]})]})]})};N.defaults.withCredentials=!0;function Ye(){const n="https://ec-course-api.hexschool.io",[r,a]=u.useState(!1);u.useEffect(()=>{const d=async()=>{try{await N.post(`${n}/v2/api/user/check`),a(!0)}catch(m){console.error(m),a(!1)}},s=document.cookie.replace(/(?:(?:^|.*;\s*)hexToken\s*=\s*([^;]*).*$)|^.*$/,"$1");N.defaults.headers.common.Authorization=s,d()},[n]);const c=(d,s)=>{N.post(`${n}/v2/admin/signin`,{username:d,password:s}).then(m=>{const{token:o,expired:h}=m.data;document.cookie=`hexToken=${o}; expires=${new Date(h)}; path=/; SameSite=None; Secure`,N.defaults.headers.common.Authorization=o,m.data.success===!0&&(alert("登入成功"),a(!0))}).catch(m=>{console.error(m),alert("登入失敗"),a(!1)})};return e.jsxs(e.Fragment,{children:[e.jsx(Z,{}),r?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"container my-3",children:[e.jsx(E,{to:"/admin/coupon",className:"btn btn-outline-primary me-2",children:"優惠券管理"}),e.jsx(E,{to:"/admin/order",className:"btn btn-outline-primary me-2",children:"訂單管理"})]}),e.jsx(ve,{isAuth:r,token:N.defaults.headers.common.Authorization})]}):e.jsx(ye,{handleLogin:c})]})}function es(){return u.useEffect(()=>{const n=document.querySelectorAll(".fade-in-section"),r=new IntersectionObserver(a=>{a.forEach(c=>{c.isIntersecting?c.target.classList.add("show"):c.target.classList.remove("show")})},{threshold:.2});return n.forEach(a=>r.observe(a)),()=>{n.forEach(a=>r.unobserve(a))}},[]),e.jsxs("div",{className:"container my-5",children:[e.jsx("h1",{className:"mb-4 fw-bold text-center text-orange",children:"關於我們"}),e.jsxs("section",{className:"row align-items-center mb-5 fade-in-section",children:[e.jsx("div",{className:"col-md-4 mb-3 mb-md-0",children:e.jsx("img",{src:"https://storage.googleapis.com/vue-course-api.appspot.com/product-backend/1742746264593.jpg",alt:"Brand Story",className:"img-fluid rounded shadow",style:{height:"auto"}})}),e.jsxs("div",{className:"col-md-6",children:[e.jsx("h2",{className:"fs-4 mb-3 fw-bold text-orange",children:"品牌故事"}),e.jsx("p",{children:"Cat's Store 由一群熱愛貓咪、並相信「貓咪就是家人」理念的夥伴所創立。最初，我們在一間小小的工作室裡，從客製化貓咪玩具開始，秉持著「給毛孩子更好生活」的初衷，一步步擴展至目前提供全方位貓咪用品的平台。"}),e.jsx("p",{children:"經過不斷摸索與學習，我們深深瞭解到，只有用心投入並關注每個細節，才能帶給貓咪與飼主最舒適安心的體驗。"})]})]}),e.jsxs("section",{className:"mb-5 fade-in-section",children:[e.jsx("h2",{className:"fs-4 mb-3 fw-bold text-orange",children:"我們的使命"}),e.jsx("div",{className:"card shadow-sm border-0",children:e.jsx("div",{className:"card-body",children:e.jsx("p",{className:"card-text",children:"在 Cat's Store，我們始終堅持提供高品質、符合貓咪生理與心理需求的商品。我們與多家優質品牌與飼育專家合作，積極研發符合國際安全標準的貓咪糧食、玩具及周邊商品，只為了確保每一位貓奴都能在這裡找到最適合自家寶貝的產品。"})})})]}),e.jsxs("section",{className:"mb-5 fade-in-section",children:[e.jsx("h2",{className:"fs-4 mb-4 fw-bold text-orange",children:"核心價值"}),e.jsxs("div",{className:"row text-center g-4",children:[e.jsx("div",{className:"col-md-3",children:e.jsxs("div",{className:"bg-light rounded p-4 shadow-sm h-100",children:[e.jsx("i",{className:"bi bi-shield-check fs-1 mb-3"}),e.jsx("h5",{className:"mb-2",children:"專業"}),e.jsx("p",{className:"text-muted",children:"透過飼養經驗、專業課程與不斷學習，提供最完整的養貓知識與服務。"})]})}),e.jsx("div",{className:"col-md-3",children:e.jsxs("div",{className:"bg-light rounded p-4 shadow-sm h-100",children:[e.jsx("i",{className:"bi bi-heart fs-1 mb-3"}),e.jsx("h5",{className:"mb-2 fw-bold",children:"關懷"}),e.jsx("p",{className:"text-muted",children:"將貓咪視為家人，重視牠們的健康、快樂與舒適，並持續投入產品研發與改良。"})]})}),e.jsx("div",{className:"col-md-3",children:e.jsxs("div",{className:"bg-light rounded p-4 shadow-sm h-100",children:[e.jsx("i",{className:"bi bi-star fs-1 mb-3"}),e.jsx("h5",{className:"mb-2 fw-bold",children:"可靠"}),e.jsx("p",{className:"text-muted",children:"所有商品皆經過嚴謹篩選與測試，給消費者最安心的購物體驗。"})]})}),e.jsx("div",{className:"col-md-3",children:e.jsxs("div",{className:"bg-light rounded p-4 shadow-sm h-100",children:[e.jsx("i",{className:"bi bi-lightbulb fs-1 mb-3"}),e.jsx("h5",{className:"mb-2 fw-bold",children:"創新"}),e.jsx("p",{className:"text-muted",children:"與貓咪行為學家、設計師合作，不斷推出更好、更有趣的產品，讓貓咪和飼主都能感到驚喜。"})]})})]})]}),e.jsxs("section",{className:"row align-items-center mb-5 fade-in-section",children:[e.jsx("div",{className:"col-md-6 order-md-2 mb-3 mb-md-0",children:e.jsx("img",{src:"https://storage.googleapis.com/vue-course-api.appspot.com/product-backend/1742746560094.jpg",alt:"Community and Charity",className:"img-fluid rounded shadow"})}),e.jsxs("div",{className:"col-md-6 order-md-1",children:[e.jsx("h2",{className:"fs-4 mb-3 fw-bold text-orange",children:"社群與公益"}),e.jsx("p",{children:"我們深知仍有許多流浪貓需要關懷與幫助，因此 Cat's Store 會將部分收益捐贈給動物救援機構，以助力於浪浪救援、醫療與中途照顧。同時我們也定期舉辦線上線下活動，邀請愛貓人士一起分享養貓經驗。"}),e.jsx("p",{children:"推廣正確的飼養觀念，期望有一天，所有的貓咪都能得到應有的照顧與愛。"})]})]}),e.jsxs("section",{className:"mb-5 fade-in-section",children:[e.jsx("h2",{className:"fs-4 mb-3 fw-bold text-orange",children:"展望未來"}),e.jsx("p",{children:"Cat's Store 不僅是購買貓咪用品的商店，更是所有貓奴們共享熱情、快樂與知識的交流空間。我們會持續開發與引進新穎、優質的貓咪商品，並且提供更多專業文章與活動，讓每一位貓奴都能與自家毛孩子一起擁有更美好、更健康的生活。"})]}),e.jsx("div",{className:"bg-light p-4 rounded shadow text-center fade-in-section",children:e.jsxs("p",{className:"text-secondary mb-0 fw-bold",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"40",height:"40",viewBox:"0 0 512 512",children:e.jsx("path",{fill:"currentColor",d:"M363.656 30.03c-41.495.564-83.634 22.155-110.844 69.282c-41.912-117.77-236.492-76.29-232 64.5c4.682 146.597 214.483 232.04 237.063 316.313c20.666-77.113 240.752-175.82 236.344-316.313c-2.65-84.358-65.832-134.66-130.564-133.78zm-154.03 58.657c15.38 22.305 27.868 49.554 4.093 51.438c-23.2 1.84-14.18-28.684-4.095-51.438zm97.186 0c10.087 22.754 19.136 53.28-4.062 51.438c-23.776-1.884-11.318-29.133 4.063-51.438zm79.282 56.938c3.65 24.62 4.21 56.43-17.656 48.47c-22.412-8.164-3.117-31.078 17.656-48.47m-264.031 5.594c22.394 15.26 43.843 36.17 22.343 46.5c-20.976 10.074-23.553-21.644-22.344-46.5zm99.28.624c12.818.15 24.67 14.076 27.157 32.625c2.652 19.784-6.356 37.34-20.125 39.186s-27.098-12.715-29.75-32.5s6.388-37.31 20.156-39.156a18 18 0 0 1 2.564-.156zm73.782 0c.854-.01 1.702.04 2.563.156c13.768 1.846 22.776 19.37 20.125 39.156c-2.652 19.785-15.95 34.346-29.72 32.5c-13.768-1.845-22.776-19.402-20.124-39.187c2.485-18.55 14.338-32.477 27.155-32.626zM161.5 206.72c12.172-.038 25.272 10.956 31.47 27.56c7.343 19.68 2.194 39.797-11.5 44.907c-13.697 5.11-30.75-6.695-38.095-26.375s-2.195-39.795 11.5-44.906a19 19 0 0 1 6.625-1.187zm191.406.53q2.694-.075 5.344.625c14.132 3.737 21.246 23.224 15.875 43.53c-5.37 20.31-21.18 33.74-35.313 30c-14.132-3.736-21.245-23.223-15.875-43.53c4.7-17.77 17.402-30.28 29.97-30.625zm-94.75 28.344c18.32 0 33.624 19.908 37.563 46.594c.605.163 1.204.323 1.81.5c34.163 9.926 57.242 36.7 51.533 59.812c-5.71 23.11-38.027 33.802-72.188 23.875c-6.65-1.933-12.884-4.504-18.563-7.563a95 95 0 0 1-18.53 7.563c-34.162 9.927-66.478-.764-72.188-23.875c-5.71-23.11 17.338-49.886 51.5-59.813c.482-.14.956-.274 1.437-.406c3.917-26.732 19.285-46.686 37.626-46.686z"})}),e.jsx("span",{className:"mx-2",children:"感謝你選擇並信任 Cat's Store，我們期待與你和你的毛孩子攜手共度每一個溫暖動人的日常時刻。"})]})})]})}const ss=({modalRef:n,modalMode:r,tempCoupon:a,setTempCoupon:c,onSaveCoupon:d,onCloseModal:s})=>{const m=o=>{const{name:h,value:f}=o.target;c(h==="is_enabled"?j=>({...j,[h]:Number(f)}):h==="percent"?j=>({...j,[h]:Number(f)}):h==="due_date"?j=>({...j,[h]:Number(f)}):j=>({...j,[h]:f}))};return e.jsx("div",{className:"modal fade",ref:n,tabIndex:-1,"aria-labelledby":"couponModalLabel","aria-hidden":"true",children:e.jsx("div",{className:"modal-dialog",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title",id:"couponModalLabel",children:r==="create"?"新增優惠券":"編輯優惠券"}),e.jsx("button",{type:"button",className:"btn-close","aria-label":"Close",onClick:s})]}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"title",className:"form-label",children:"優惠券名稱"}),e.jsx("input",{type:"text",id:"title",name:"title",className:"form-control",value:a.title,onChange:m})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"code",className:"form-label",children:"優惠碼"}),e.jsx("input",{type:"text",id:"code",name:"code",className:"form-control",value:a.code,onChange:m})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"percent",className:"form-label",children:"折扣（%）"}),e.jsx("input",{type:"number",id:"percent",name:"percent",className:"form-control",value:a.percent,onChange:m})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"due_date",className:"form-label",children:"到期日 (UNIX Timestamp)"}),e.jsx("input",{type:"number",id:"due_date",name:"due_date",className:"form-control",value:a.due_date,onChange:m}),e.jsx("small",{className:"text-muted",children:"例如 1691779200 (2023/08/12) ，可透過線上 Epoch Converter 查看"})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"is_enabled",className:"form-label",children:"是否啟用"}),e.jsxs("select",{id:"is_enabled",name:"is_enabled",className:"form-select",value:a.is_enabled,onChange:m,children:[e.jsx("option",{value:0,children:"未啟用"}),e.jsx("option",{value:1,children:"啟用"})]})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:s,children:"取消"}),e.jsx("button",{type:"button",className:"btn btn-primary",onClick:d,children:"確定"})]})]})})})},as=({modalRef:n,tempCoupon:r,onCloseModal:a,onDeleteCoupon:c})=>e.jsx("div",{className:"modal fade",ref:n,tabIndex:-1,"aria-labelledby":"deleteCouponModalLabel","aria-hidden":"true",children:e.jsx("div",{className:"modal-dialog",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title",id:"deleteCouponModalLabel",children:"刪除優惠券"}),e.jsx("button",{type:"button",className:"btn-close",onClick:a,"aria-label":"Close"})]}),e.jsxs("div",{className:"modal-body",children:["確定要刪除「",r.title,"」嗎？"]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:a,children:"取消"}),e.jsx("button",{type:"button",className:"btn btn-danger",onClick:c,children:"確定刪除"})]})]})})}),ts=({pageInfo:n,handlePageChange:r})=>{const{total_pages:a,current_page:c,has_pre:d,has_next:s}=n;return e.jsx("nav",{children:e.jsxs("ul",{className:"pagination",children:[e.jsx("li",{className:`page-item ${d?"":"disabled"}`,children:e.jsx("button",{onClick:()=>d&&r(c-1),className:"page-link",disabled:!d,children:"上一頁"})}),Array.from({length:a},(m,o)=>e.jsx("li",{className:`page-item ${c===o+1?"active":""}`,children:e.jsx("button",{onClick:()=>r(o+1),className:"page-link",children:o+1})},o)),e.jsx("li",{className:`page-item ${s?"":"disabled"}`,children:e.jsx("button",{onClick:()=>s&&r(c+1),className:"page-link",disabled:!s,children:"下一頁"})})]})})},G="https://ec-course-api.hexschool.io",Y="product-backend",ls=({token:n})=>{const r=z(),[a,c]=u.useState([]),[d,s]=u.useState({total_pages:0,current_page:1}),[m,o]=u.useState("create"),h={id:"",title:"",is_enabled:0,percent:0,due_date:0,code:""},[f,j]=u.useState(h),y=u.useRef(null),$=u.useRef(null);u.useEffect(()=>{n&&(N.defaults.headers.common.Authorization=n)},[n]);const k=u.useCallback(async(l=1)=>{try{const i=await N.get(`${G}/v2/api/${Y}/admin/coupons?page=${l}`);c(i.data.coupons),s(i.data.pagination),r(P("取得優惠券列表成功"))}catch(i){console.error(i),alert("取得優惠券失敗")}},[r]);u.useEffect(()=>{k(1)},[k]),u.useEffect(()=>{new M(y.current),new M($.current)},[]);const _=(l,i)=>{o(l),j(i?{...i}:{...h});const x=M.getInstance(y.current);x==null||x.show()},C=()=>{const l=M.getInstance(y.current);l==null||l.hide(),j({...h})},b=l=>{j({...l});const i=M.getInstance($.current);i==null||i.show()},v=()=>{const l=M.getInstance($.current);l==null||l.hide(),j({...h})},S=async()=>{await N.post(`${G}/v2/api/${Y}/admin/coupon`,{data:{...f}})},U=async()=>{await N.put(`${G}/v2/api/${Y}/admin/coupon/${f.id}`,{data:{...f}})},F=async()=>{try{m==="create"?(await S(),r(P("新增優惠券成功"))):(await U(),r(P("更新優惠券成功"))),k(d.current_page),C()}catch(l){console.error(l),alert("優惠券儲存失敗")}},I=async()=>{await N.delete(`${G}/v2/api/${Y}/admin/coupon/${f.id}`)},g=async()=>{try{await I(),r(P("刪除優惠券成功")),k(d.current_page),v()}catch(l){console.error(l),alert("刪除優惠券失敗")}},t=l=>{k(l)};return e.jsxs("section",{className:"container mt-2",children:[e.jsx(E,{to:"/Admin",className:"btn btn-outline-primary me-2 mb-4",children:"回到管理頁面"}),e.jsx("h2",{className:"fw-bold mb-3",children:"優惠券管理"}),e.jsx("div",{className:"mb-4 text-end",children:e.jsxs("button",{className:"btn btn-primary",onClick:()=>_("create"),children:[e.jsx("i",{className:"bi bi-plus-lg"})," 建立新的優惠券"]})}),e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"優惠券名稱"}),e.jsx("th",{children:"代碼"}),e.jsx("th",{children:"折扣（%）"}),e.jsx("th",{children:"到期日"}),e.jsx("th",{children:"是否啟用"}),e.jsx("th",{children:"操作"})]})}),e.jsx("tbody",{children:a.map(l=>e.jsxs("tr",{children:[e.jsx("td",{children:l.title}),e.jsx("td",{children:l.code}),e.jsxs("td",{children:[l.percent,"%"]}),e.jsx("td",{children:new Date(l.due_date*1e3).toLocaleDateString()}),e.jsx("td",{children:l.is_enabled===1?e.jsx("span",{className:"text-success fw-bold",children:"啟用"}):e.jsx("span",{className:"text-danger",children:"未啟用"})}),e.jsxs("td",{children:[e.jsxs("button",{className:"btn btn-sm btn-primary me-2",onClick:()=>_("edit",l),children:[e.jsx("i",{className:"bi bi-pencil-square"})," 編輯"]}),e.jsxs("button",{className:"btn btn-sm btn-danger",onClick:()=>b(l),children:[e.jsx("i",{className:"bi bi-trash3-fill"})," 刪除"]})]})]},l.id))})]}),e.jsx("div",{className:"d-flex justify-content-center",children:e.jsx(ts,{pageInfo:d,handlePageChange:t})}),e.jsx(ss,{modalRef:y,tempCoupon:f,setTempCoupon:j,modalMode:m,onSaveCoupon:F,onCloseModal:C}),e.jsx(as,{modalRef:$,tempCoupon:f,onCloseModal:v,onDeleteCoupon:g})]})},cs=({orderModalRef:n,tempOrder:r,setTempOrder:a,modalMode:c,onCloseModal:d,onSaveOrder:s})=>{const m=o=>{const{name:h,value:f,type:j}=o.target;if(j==="checkbox"){const y=o.target;a($=>({...$,[h]:y.checked}))}else a(y=>({...y,[h]:f}))};return e.jsx("div",{className:"modal fade",ref:n,tabIndex:-1,"aria-labelledby":"orderModalLabel","aria-hidden":"true",children:e.jsxs("div",{className:"modal-dialog modal-lg",children:[" ",e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title",children:c==="view"?"查看訂單":"編輯訂單"}),e.jsx("button",{type:"button",className:"btn-close",onClick:d})]}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"mb-3 row",children:[e.jsx("label",{className:"col-sm-3 col-form-label",children:"訂單編號"}),e.jsx("div",{className:"col-sm-9",children:e.jsx("input",{type:"text",readOnly:!0,className:"form-control",value:r.num})})]}),e.jsxs("div",{className:"mb-3 row align-items-center",children:[e.jsx("label",{className:"col-sm-3 col-form-label",children:"付款狀態"}),e.jsx("div",{className:"col-sm-9",children:c==="view"?e.jsx("span",{children:r.is_paid?"已付款":"未付款"}):e.jsxs("div",{className:"form-check",children:[e.jsx("input",{className:"form-check-input",type:"checkbox",id:"is_paid",name:"is_paid",checked:r.is_paid,onChange:m}),e.jsx("label",{className:"form-check-label",htmlFor:"is_paid",children:"是否已付款"})]})})]}),e.jsx("hr",{}),e.jsx("h6",{children:"訂購人資料"}),e.jsxs("div",{className:"mb-3 row",children:[e.jsx("label",{className:"col-sm-3 col-form-label",children:"姓名"}),e.jsx("div",{className:"col-sm-9",children:e.jsx("input",{type:"text",name:"user.name",className:"form-control",readOnly:c==="view",value:r.user.name,onChange:o=>{a(h=>({...h,user:{...h.user,name:o.target.value}}))}})})]}),e.jsxs("div",{className:"mb-3 row",children:[e.jsx("label",{className:"col-sm-3 col-form-label",children:"Email"}),e.jsx("div",{className:"col-sm-9",children:e.jsx("input",{type:"text",name:"user.email",className:"form-control",readOnly:c==="view",value:r.user.email,onChange:o=>{a(h=>({...h,user:{...h.user,email:o.target.value}}))}})})]}),e.jsxs("div",{className:"mb-3 row",children:[e.jsx("label",{className:"col-sm-3 col-form-label",children:"電話"}),e.jsx("div",{className:"col-sm-9",children:e.jsx("input",{type:"text",name:"user.tel",className:"form-control",readOnly:c==="view",value:r.user.tel,onChange:o=>{a(h=>({...h,user:{...h.user,tel:o.target.value}}))}})})]}),e.jsxs("div",{className:"mb-3 row",children:[e.jsx("label",{className:"col-sm-3 col-form-label",children:"地址"}),e.jsx("div",{className:"col-sm-9",children:e.jsx("input",{type:"text",name:"user.address",className:"form-control",readOnly:c==="view",value:r.user.address,onChange:o=>{a(h=>({...h,user:{...h.user,address:o.target.value}}))}})})]}),e.jsx("hr",{}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:"留言"}),c==="view"?e.jsx("div",{children:r.message}):e.jsx("textarea",{className:"form-control",name:"message",rows:3,value:r.message,onChange:m})]}),e.jsx("hr",{}),e.jsx("h6",{children:"產品清單"}),e.jsx("ul",{children:Object.values(r.products).map(o=>e.jsxs("li",{children:["產品ID: ",o.product_id,", 數量: ",o.qty]},o.id))})]}),e.jsxs("div",{className:"modal-footer",children:[c==="edit"&&e.jsx("button",{className:"btn btn-primary",onClick:s,children:"儲存"}),e.jsx("button",{className:"btn btn-secondary",onClick:d,children:"關閉"})]})]})]})})},ns=({delOrderModalRef:n,tempOrder:r,onCloseModal:a,onDeleteOrder:c})=>e.jsx("div",{className:"modal fade",ref:n,tabIndex:-1,"aria-labelledby":"deleteOrderModalLabel","aria-hidden":"true",children:e.jsx("div",{className:"modal-dialog",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title",id:"deleteOrderModalLabel",children:"刪除訂單"}),e.jsx("button",{type:"button",className:"btn-close",onClick:a})]}),e.jsxs("div",{className:"modal-body",children:["確定要刪除「訂單編號 ",r.num,"」嗎？"]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"btn btn-secondary",onClick:a,children:"取消"}),e.jsx("button",{className:"btn btn-danger",onClick:c,children:"確定刪除"})]})]})})}),rs=({pageInfo:n,handlePageChange:r})=>{const{total_pages:a,current_page:c,has_pre:d,has_next:s}=n;return e.jsx("nav",{children:e.jsxs("ul",{className:"pagination",children:[e.jsx("li",{className:`page-item ${d?"":"disabled"}`,children:e.jsx("button",{onClick:()=>d&&r(c-1),className:"page-link",disabled:!d,children:"上一頁"})}),Array.from({length:a},(m,o)=>e.jsx("li",{className:`page-item ${c===o+1?"active":""}`,children:e.jsx("button",{onClick:()=>r(o+1),className:"page-link",children:o+1})},o)),e.jsx("li",{className:`page-item ${s?"":"disabled"}`,children:e.jsx("button",{onClick:()=>s&&r(c+1),className:"page-link",disabled:!s,children:"下一頁"})})]})})},ee="https://ec-course-api.hexschool.io",se="product-backend",is=({token:n})=>{const r=z(),[a,c]=u.useState([]),[d,s]=u.useState({total_pages:0,current_page:1}),[m,o]=u.useState("view"),h={id:"",user:{name:"",email:"",tel:"",address:""},create_at:0,is_paid:!1,message:"",products:{},num:0},[f,j]=u.useState(h),y=u.useRef(null),$=u.useRef(null);u.useEffect(()=>{n&&(N.defaults.headers.common.Authorization=n)},[n]);const k=u.useCallback(async(i=1)=>{try{const x=await N.get(`${ee}/v2/api/${se}/admin/orders?page=${i}`);c(x.data.orders),s(x.data.pagination),r(P("成功取得訂單列表"))}catch(x){console.error(x),alert("取得訂單失敗")}},[r]);u.useEffect(()=>{k(1)},[k]),u.useEffect(()=>{new M(y.current),new M($.current)},[]);const _=(i,x)=>{o(i),j({...x});const A=M.getInstance(y.current);A==null||A.show()},C=()=>{const i=M.getInstance(y.current);i==null||i.hide(),j({...h})},b=i=>{j({...i});const x=M.getInstance($.current);x==null||x.show()},v=()=>{const i=M.getInstance($.current);i==null||i.hide(),j({...h})},S=async()=>{await N.put(`${ee}/v2/api/${se}/admin/orders/${f.id}`,{data:{...f}})},U=async()=>{try{await S(),r(P("訂單更新成功")),k(d.current_page),C()}catch(i){console.error(i),alert("更新訂單失敗")}},F=async()=>{await N.delete(`${ee}/v2/api/${se}/admin/orders/${f.id}`)},I=async()=>{try{await F(),r(P("刪除訂單成功")),k(d.current_page),v()}catch(i){console.error(i),alert("刪除訂單失敗")}},g=async()=>{await N.delete(`${ee}/v2/api/${se}/admin/orders/all`)},t=async()=>{if(window.confirm("確定要刪除所有訂單嗎？"))try{await g(),r(P("已刪除所有訂單")),k(1)}catch(i){console.error(i),alert("刪除全部訂單失敗")}},l=i=>{k(i)};return e.jsxs("div",{className:"container mt-2",children:[e.jsx(E,{to:"/Admin",className:"btn btn-outline-primary me-2 mb-4",children:"回到管理頁面"}),e.jsx("h2",{className:"fw-bold mb-3",children:"訂單管理"}),e.jsx("div",{className:"text-end mb-4",children:e.jsx("button",{className:"btn btn-danger",onClick:t,children:"刪除全部訂單"})}),e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"訂單編號"}),e.jsx("th",{children:"訂購人"}),e.jsx("th",{children:"Email"}),e.jsx("th",{children:"建立時間"}),e.jsx("th",{children:"付款狀態"}),e.jsx("th",{children:"操作"})]})}),e.jsx("tbody",{children:a.map(i=>e.jsxs("tr",{children:[e.jsx("td",{children:i.num}),e.jsx("td",{children:i.user.name}),e.jsx("td",{children:i.user.email}),e.jsx("td",{children:new Date(i.create_at*1e3).toLocaleString()}),e.jsx("td",{children:i.is_paid?e.jsx("span",{className:"text-success fw-bold",children:"已付款"}):e.jsx("span",{className:"text-danger",children:"未付款"})}),e.jsxs("td",{children:[e.jsx("button",{className:"btn btn-sm btn-info me-2",onClick:()=>_("view",i),children:"查看"}),e.jsx("button",{className:"btn btn-sm btn-primary me-2",onClick:()=>_("edit",i),children:"編輯"}),e.jsx("button",{className:"btn btn-sm btn-danger",onClick:()=>b(i),children:"刪除"})]})]},i.id))})]}),e.jsx("div",{className:"d-flex justify-content-center",children:e.jsx(rs,{pageInfo:d,handlePageChange:l})}),e.jsx(cs,{orderModalRef:y,tempOrder:f,setTempOrder:j,modalMode:m,onCloseModal:C,onSaveOrder:U}),e.jsx(ns,{delOrderModalRef:$,tempOrder:f,onCloseModal:v,onDeleteOrder:I})]})},os=()=>e.jsx(qe,{children:e.jsx(Ae,{children:e.jsxs(L,{path:"/",element:e.jsx(ze,{}),children:[e.jsx(L,{index:!0,element:e.jsx(He,{})}),e.jsx(L,{path:"week2",element:e.jsx(Te,{})}),e.jsx(L,{path:"week3",element:e.jsx(De,{})}),e.jsx(L,{path:"week4",element:e.jsx(Qe,{})}),e.jsx(L,{path:"week5",element:e.jsx(We,{})}),e.jsx(L,{path:"week6",element:e.jsx(Ze,{})}),e.jsx(L,{path:"week7",element:e.jsx(Je,{})}),e.jsx(L,{path:"products",element:e.jsx(Ke,{cart:[],setCart:()=>{}})}),e.jsx(L,{path:"products/:id",element:e.jsx(Xe,{})}),e.jsx(L,{path:"cart",element:e.jsx(Ge,{})}),e.jsx(L,{path:"admin",element:e.jsx(Ye,{})}),e.jsx(L,{path:"about",element:e.jsx(es,{})}),e.jsx(L,{path:"admin/coupon",element:e.jsx(ls,{})}),e.jsx(L,{path:"admin/order",element:e.jsx(is,{})}),e.jsx(L,{path:"*",element:e.jsx("h1",{children:"Not Found"})})]})})});Ie.createRoot(document.getElementById("root")).render(e.jsx(Q.StrictMode,{children:e.jsx(Fe,{store:Re,children:e.jsx(os,{})})}));
//# sourceMappingURL=index-C7es_XGU.js.map
