{"version":3,"file":"index-C7es_XGU.js","sources":["../../src/redux/slices/toastSlice.ts","../../src/redux/slices/cartSlice.ts","../../src/redux/store.ts","../../src/components/Navbar.tsx","../../src/components/Toast.tsx","../../src/components/Layout.tsx","../../src/components/Home.tsx","../../src/pages/Week2.tsx","../../src/pages/Week3.tsx","../../src/components/Login/Login.tsx","../../src/components/Product/ProductModal.tsx","../../src/components/Product/Pagination.tsx","../../src/components/Product/DeleteProductModal.tsx","../../src/components/Product/Product.tsx","../../src/pages/Week4.tsx","../../src/pages/Week5.tsx","../../src/pages/Week6.tsx","../../src/pages/Week7.tsx","../../src/pages/Products.tsx","../../src/pages/ProductDetail.tsx","../../src/pages/Cart.tsx","../../src/pages/Admin.tsx","../../src/pages/About.tsx","../../src/components/Coupon/CouponModal.tsx","../../src/components/Coupon/DeleteCouponModal.tsx","../../src/components/Coupon/Pagination.tsx","../../src/components/Coupon/Coupon.tsx","../../src/components/Order/OrderModal.tsx","../../src/components/Order/DeleteOrderModal.tsx","../../src/components/Order/Pagination.tsx","../../src/components/Order/OrderList.tsx","../../src/RouteConf.tsx","../../src/main.tsx"],"sourcesContent":["import { createSlice, PayloadAction } from '@reduxjs/toolkit';\r\n\r\ninterface ToastState {\r\n    message: string;\r\n    visible: boolean;\r\n}\r\n\r\nconst initialState: ToastState = {\r\n    message: '',\r\n    visible: false,\r\n};\r\n\r\nconst toastSlice = createSlice({\r\n    name: 'toast',\r\n    initialState,\r\n    reducers: {\r\n        showToast: (state, action: PayloadAction<string>) => {\r\n            state.message = action.payload;\r\n            state.visible = true;\r\n        },\r\n        hideToast: (state) => {\r\n            state.visible = false;\r\n        },\r\n    },\r\n});\r\n\r\nexport const { showToast, hideToast } = toastSlice.actions;\r\nexport default toastSlice.reducer;\r\n","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\r\n\r\ninterface CartItem {\r\n    id: number | string;\r\n    title: string;\r\n    imageUrl: string;\r\n    content?: string;\r\n    description?: string;\r\n    price: number;\r\n    origin_price?: number;\r\n    quantity: number;\r\n}\r\n\r\ninterface AddToCartPayload {\r\n    product: {\r\n        id: number | string;\r\n        title: string;\r\n        imageUrl?: string;\r\n        content?: string;\r\n        description?: string;\r\n        price: number;\r\n        origin_price?: number;\r\n    };\r\n    quantity: number;\r\n}\r\n\r\nconst initialState: CartItem[] = [];\r\n\r\nconst cartSlice = createSlice({\r\n    name: 'cart',\r\n    initialState,\r\n    reducers: {\r\n        addToCart: (state, action: PayloadAction<AddToCartPayload>) => {\r\n            const { product, quantity } = action.payload;\r\n            const existingItem = state.find(item => item.id === product.id);\r\n\r\n            if (existingItem) {\r\n                existingItem.quantity += quantity;\r\n            } else {\r\n                state.push({\r\n                    ...product,\r\n                    imageUrl: product.imageUrl || '',\r\n                    quantity\r\n                });\r\n            }\r\n        },\r\n        removeFromCart: (state, action: PayloadAction<string | number>) => {\r\n            const itemId = action.payload;\r\n            return state.filter(item => item.id !== itemId);\r\n        },\r\n        updateCartItemQuantity: (state, action: PayloadAction<{ id: string | number, quantity: number }>) => {\r\n            const { id, quantity } = action.payload;\r\n            const item = state.find(item => item.id === id);\r\n            if (item) {\r\n                item.quantity = quantity;\r\n            }\r\n        },\r\n        clearCart: () => {\r\n            return initialState;\r\n        }\r\n    }\r\n});\r\n\r\nexport const { addToCart, removeFromCart, updateCartItemQuantity, clearCart } = cartSlice.actions;\r\nexport default cartSlice.reducer;\r\n","import { configureStore } from '@reduxjs/toolkit';\r\nimport toastReducer from './slices/toastSlice';\r\nimport cartReducer from './slices/cartSlice';\r\n\r\nconst store = configureStore({\r\n    reducer: {\r\n        toast: toastReducer,\r\n        cart: cartReducer, \r\n    },\r\n});\r\n\r\nexport type RootState = ReturnType<typeof store.getState>;\r\nexport type AppDispatch = typeof store.dispatch;\r\n\r\nexport default store;\r\n","import { Link, NavLink } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport { Collapse } from \"bootstrap\";\r\n\r\n// 新增 cartCount 屬性，預設為 0\r\ninterface NavbarProps {\r\n  isAuth?: boolean;\r\n  onLogout?: () => void;\r\n  cartCount?: number;  // 新增購物車數量\r\n}\r\n\r\nconst Navbar: React.FC<NavbarProps> = ({ isAuth, onLogout, cartCount = 0 }) => {\r\n  const handleLogout = async () => {\r\n    try {\r\n      const BASE_URL = import.meta.env.VITE_BASE_URL;\r\n      await axios.post(`${BASE_URL}/v2/logout`, {}, { withCredentials: true });\r\n\r\n      document.cookie = \"hexToken=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;\";\r\n      axios.defaults.headers.common['Authorization'] = '';\r\n\r\n      if (onLogout) onLogout();\r\n      alert('登出成功');\r\n      window.location.href = 'https://chrisc0210.github.io/react-training/#/';\r\n    } catch (error) {\r\n      console.error('登出失敗', error);\r\n      alert('登出失敗');\r\n    }\r\n  };\r\n  const handleToggle = () => {\r\n    const collapseElement = document.getElementById(\"navbarNav\");\r\n    if (collapseElement) {\r\n      let bsCollapse = Collapse.getInstance(collapseElement);\r\n      if (!bsCollapse) {\r\n        bsCollapse = new Collapse(collapseElement, { toggle: false });\r\n      }\r\n      bsCollapse.toggle();\r\n    }\r\n  };\r\n  \r\n  return (\r\n    <nav className=\"navbar navbar-expand-lg py-2\"\r\n    >\r\n      <div className=\"container\">\r\n        <Link className=\"navbar-brand\" to=\"/\" style={{\r\n          display: \"flex\",\r\n          alignItems: \"center\",\r\n          transition: \"transform 0.3s ease\"\r\n        }} onMouseOver={(e) => e.currentTarget.style.transform = \"scale(1.05)\"}\r\n          onMouseOut={(e) => e.currentTarget.style.transform = \"scale(1)\"}\r\n        >\r\n          <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"40\" height=\"40\" viewBox=\"0 0 128 128\"><path fill=\"#2f2f2f\" d=\"M74.92 113.83s-5.7-.45-5.93-3.79l-3.24-9.41l14.09-13.1s10.33-.2 10.92-.2c.6 0 3.37 13.3 3.37 13.3l-4.96 8.14z\" /><path fill=\"#f79329\" d=\"M75.03 53.73c.31 2.76.9 5.17 2.83 7.2c1.55 1.62 3.17 3 4.6 4.73c4.12 4.99 11.06 6.71 15.32 11.94c2.84 3.49 4.77 7.77 5.75 12.11c1.1 4.88 1.78 10.27.42 15.07c-1.87 6.58-7.62 7.38-13.63 8.29c-2.76.42-5.57.66-8.37.74c-2.23.06-4.81.34-7.04.03c-1.95-.28-2.32-2.92-1.79-4.47c.56-1.67 2.24-2.3 3.81-2.6c.77-.15 1.58.07 2.36-.06c1.45-.23 2.06-1.18 2.09-2.63c.03-1.98.71-3.63 1.62-5.36c.41-.78 1.1-1.47 1.76-2.06c.67-.62 1.83-1.47 1.19-2.55c-1.1-1.88-4.44-.15-5.57.66c-1.75 1.24-2.99 3.12-3.53 5.19c-.77 2.87-1.36 3.06-4.04 4.08c-1.58.61-3.04 1.62-3.64 3.19c-.73 1.95.49 4.25-.77 5.95c-.99 1.36-2.91 2.11-4.67 2.04c-4.54-.2-7.58-1.31-6.63-5.93c.6-2.9.41-6.08.59-9.09c.06-1.13.17-2.86-.96-3.65c-.44-.32-1.05-.37-1.56-.34c-.35.01-1.23-.04-1.56.07c-.97.31-.74 1.87-.73 2.69c.01 1.58-.02 3.19-.06 4.75c-.04 1.85.16 3.68.18 5.51c.01 1.2.12 2.68-.87 3.53c-1.13 1-2.86 1.22-4.4 1.27c-1.85.07-3.96-.07-5.5-1.15c-3.15-2.22-2.08-7.31-1.79-10.28c.19-1.93.05-3.94 0-5.92c-.04-1.78-.09-3.57-.13-5.37c-.02-.74-.12-1.54-.08-2.3c.15-2.1-.28-4.25-.34-6.43c-.1-4-.31-8.07-.31-12.14c0-1.74.3-3.65.8-5.3c.27-.88.56-2.06 1.03-2.83c.74-1.23 2.02-2.33 3.09-3.29c1.38-1.23 3.02-1.85 4.6-2.8c2.05-1.24 4.19-2.41 6.41-3.36c3.9-1.66 8.07-3.08 12.43-3.24c1.53-.06 2.68-.3 4.16-.64c1.49-.34 2.23.66 2.5 2.06c.23.87.33 1.78.43 2.69m-15.9-28.8s-2.13-2.61-7.09-9.78C48.98 10.71 39.33-1.79 34.45.8c-7.53 3.98-6.69 32.18-6.69 32.18zm3.16.34s2.63-2.1 8.97-8.1c3.93-3.7 15.96-13.91 20.2-10.38c6.54 5.46-.15 32.87-.15 32.87z\" /><defs><path id=\"notoV1Cat0\" d=\"M95.31 51.88c.33-8.71-3.73-18.15-10.88-24.49c-5.78-5.14-14.36-8.35-22.99-9.24c-8.63-.92-17.68.44-24.4 4.25c-8.32 4.72-14.24 13.1-15.74 21.7c-1.42 8.16-.62 16.61 6.43 23.13c3.91 3.61 8.96 6.32 14.28 8.05c2.02.66 7.26 2.25 12.85 2.84c5.61.59 11.57.18 13.69-.05c5.56-.59 11.07-2.18 15.64-4.89c8.27-4.92 10.81-13.02 11.12-21.3\" /></defs><use fill=\"#f79329\" href=\"#notoV1Cat0\" /><g fill=\"#2f2f2f\"><path d=\"M45.82 48.62c-.34 3.21-2.93 5.57-5.78 5.27s-4.9-3.14-4.56-6.36s2.93-5.58 5.78-5.28c2.85.31 4.89 3.15 4.56 6.37m24.05 2.53c-.34 3.21 1.7 6.06 4.55 6.36s5.44-2.06 5.78-5.27c.34-3.22-1.7-6.07-4.55-6.37c-2.86-.29-5.44 2.06-5.78 5.28M56.72 64.69c-.05 0-.11 0-.16-.01c-.85-.09-1.47-.85-1.38-1.71l.6-5.71c.09-.85.86-1.43 1.71-1.38c.85.09 1.47.85 1.38 1.71l-.6 5.7c-.09.8-.76 1.4-1.55 1.4\" /><path d=\"M52.19 68.42c-1.57-.01-3.15-.49-4.3-1.37c-.91-.7-2.36-2.82-.87-3.63c.24-.13.51-.2.78-.23c.43-.06.78.05 1.14.32c.58.43 1.07 1.2 1.79 1.34c2.25.46 4.19-.69 4.73-2.95c.14-.61.19-.9.91-.97c1.75-.16 2.17 2.04 1.69 3.35c-.43 1.17-.99 2.43-2.08 3.13c-1.12.71-2.47 1.02-3.79 1.01\" /><path d=\"M60.38 69.16c1.55.28 3.19.09 4.49-.56c1.02-.53 2.84-2.34 1.52-3.41c-.83-.67-1.56-.4-2.37.12c-2.06 1.33-4.88.39-5.57-2.01c-.15-.55.06-1.42-.19-1.91c-.12-.23-.31-.18-.59-.28c-.19-.07-.31-.15-.52-.16c-.97-.06-1.53.98-1.68 1.8c-.08.44-.17.81-.1 1.25c.21 1.24.53 2.57 1.48 3.46c.96.92 2.23 1.46 3.53 1.7\" /><path d=\"M52 57.63c-.03 1.07.58 2.25 1.61 3.05c.84.65 2.08 1.07 3.31 1.19c1.23.13 2.53-.02 3.48-.47c1.18-.57 2.02-1.59 2.21-2.65c.19-1 .06-2.06-.97-2.88c-.56-.46-1.29-.8-2.06-1.02c-.28-.09-1.04-.3-1.84-.38c-.81-.09-1.66-.05-1.96-.02c-.79.06-1.58.25-2.23.57c-1.17.59-1.52 1.58-1.55 2.61\" /></g><path fill=\"#f79329\" d=\"M97.64 99.25c1.22-.81 2.5-.45 3.86-.29c5.86.68 12.5 5.82 12.74 11.94c.29 7.86-6.7 13.54-13.66 15.41c-5.07 1.36-10.56 1.36-15.78 1.15c-2.28-.09-6.4.29-8.41-.99c-.72-.45-1.35-1.39-1.68-2.16c-1.21-2.81 1.23-4.77 3.84-4.76c1.9.01 3.8.04 5.71.02c4.16-.03 8.34.28 12.45-.54c3.74-.74 9.22-3.67 8.99-8.23c-.17-3.35-3.89-4.01-6.57-4.41c-.68-.1-1.35-.32-2.13-.34c-1.53-.04-1.46-1.48-1.35-2.6c.16-1.59.41-2.92 1.74-4.01c.05-.06.15-.13.25-.19M23.75 49.72q-.15 0-.3-.03l-8.22-1.61c-.84-.16-1.39-.98-1.22-1.82c.16-.84 1-1.4 1.82-1.22l8.22 1.62c.84.16 1.39.98 1.22 1.81c-.15.73-.8 1.25-1.52 1.25m-8.45 6.3c-.77 0-1.43-.57-1.53-1.35c-.12-.85.48-1.62 1.33-1.74l8.31-1.09c.83-.12 1.62.48 1.74 1.33c.11.85-.49 1.63-1.33 1.74L15.51 56c-.07.02-.13.02-.21.02m2.45 7c-.67 0-1.29-.44-1.49-1.13c-.24-.82.24-1.67 1.07-1.91l8.05-2.3c.82-.23 1.68.24 1.92 1.07c.23.82-.24 1.68-1.07 1.91l-8.05 2.3c-.15.04-.29.06-.43.06m73.96-7.31c-.78 0-1.45-.59-1.54-1.38a1.55 1.55 0 0 1 1.37-1.71l8.33-.93c.83-.07 1.62.52 1.71 1.37c.1.86-.52 1.62-1.37 1.71l-8.33.93c-.06 0-.12.01-.17.01m7.88 6.99c-.11 0-.22-.01-.34-.04l-8.18-1.79a1.55 1.55 0 0 1-1.18-1.84c.19-.83 1.01-1.36 1.84-1.18l8.19 1.79c.83.18 1.37 1.01 1.18 1.84c-.15.72-.8 1.22-1.51 1.22m-3.01 6.76c-.18 0-.37-.03-.55-.1L88.2 66.4c-.8-.3-1.21-1.2-.9-2c.3-.8 1.2-1.2 2-.9l7.84 2.96c.8.31 1.2 1.2.9 2c-.24.62-.83 1-1.46 1\" /><path fill=\"#fcd4b5\" d=\"M36 12.52c-.73 1.9-2.2 7.37-1.28 11.26c.27 1.16 1.75 1.68 2.8 1.18c2.19-1.05 5.61-2.9 6.89-3.54c2.18-1.07 2.93-2.4 1.75-4.03c-1.5-2.08-5.24-6.39-7.45-6.81c-1.26-.24-2.23.71-2.71 1.94m51.6 5.26c.41 2 .93 7.63-.63 11.33c-.46 1.09-2.01 1.36-2.96.69c-1.98-1.4-5.03-3.8-6.2-4.64c-1.96-1.42-2.49-2.86-1.05-4.27c1.82-1.8 6.23-5.43 8.48-5.47c1.29-.03 2.1 1.07 2.36 2.36\" /></svg>\r\n          <span className=\"fw-bold ms-2\" style={{\r\n            color: \"#5a3e36\",\r\n            fontSize: \"1.4rem\",\r\n            letterSpacing: \"0.5px\",\r\n            fontFamily: \"'Noto Sans TC', sans-serif\"\r\n          }}>\r\n            Cat's Store\r\n          </span>\r\n        </Link>\r\n        <button\r\n          className=\"navbar-toggler\"\r\n          type=\"button\"\r\n          // data-bs-toggle=\"collapse\"\r\n          // data-bs-target=\"#navbarNav\"\r\n          aria-controls=\"navbarNav\"\r\n          aria-expanded=\"false\"\r\n          aria-label=\"Toggle navigation\"\r\n          onClick={handleToggle}\r\n        >\r\n          <span className=\"navbar-toggler-icon\"></span>\r\n        </button>\r\n\r\n        <div className=\"collapse navbar-collapse\" id=\"navbarNav\">\r\n          <ul className=\"navbar-nav ms-auto align-items-center\">\r\n            {/* 首頁 */}\r\n            <li className=\"nav-item mx-1\">\r\n              <NavLink\r\n                className={({ isActive }) =>\r\n                  isActive\r\n                    ? \"nav-link active px-3 py-2 rounded-pill fw-medium\"\r\n                    : \"nav-link px-3 py-2 rounded-pill fw-medium\"\r\n                }\r\n                style={({ isActive }) => ({\r\n                  background: isActive ? \"#f79329\" : \"transparent\",\r\n                  color: isActive ? \"white\" : \"#5a3e36\",\r\n                  transition: \"all 0.3s ease\",\r\n                })}\r\n                to=\"/\"\r\n              >\r\n                首頁\r\n              </NavLink>\r\n            </li>\r\n\r\n            {/* 產品頁 */}\r\n            <li className=\"nav-item mx-1\">\r\n              <NavLink\r\n                className={({ isActive }) =>\r\n                  isActive\r\n                    ? \"nav-link active px-3 py-2 rounded-pill fw-medium\"\r\n                    : \"nav-link px-3 py-2 rounded-pill fw-medium\"\r\n                }\r\n                style={({ isActive }) => ({\r\n                  background: isActive ? \"#f79329\" : \"transparent\",\r\n                  color: isActive ? \"white\" : \"#5a3e36\",\r\n                  transition: \"all 0.3s ease\",\r\n                })}\r\n                to=\"/products\"\r\n              >\r\n                產品頁\r\n              </NavLink>\r\n            </li>\r\n\r\n            {/* 購物車 (顯示數量徽章) */}\r\n            <li className=\"nav-item position-relative mx-1\">\r\n              <NavLink\r\n                className={({ isActive }) =>\r\n                  isActive\r\n                    ? \"nav-link active px-3 py-2 rounded-pill fw-medium\"\r\n                    : \"nav-link px-3 py-2 rounded-pill fw-medium\"\r\n                }\r\n                style={({ isActive }) => ({\r\n                  background: isActive ? \"#f79329\" : \"transparent\",\r\n                  color: isActive ? \"white\" : \"#5a3e36\",\r\n                  transition: \"all 0.3s ease\",\r\n                })}\r\n                to=\"/cart\"\r\n              >\r\n                <i className=\"bi bi-cart me-1\"></i>購物車\r\n                {/* 若 cartCount > 0 時，顯示 badge */}\r\n                {cartCount > 0 && (\r\n                  <span className=\"position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger\"\r\n                    style={{ transform: \"translate(-50%, -30%)\" }}>\r\n                    {cartCount}\r\n                  </span>\r\n                )}\r\n              </NavLink>\r\n            </li>\r\n\r\n            {/* 關於我們 */}\r\n            <li className=\"nav-item mx-1\">\r\n              <NavLink\r\n                className={({ isActive }) =>\r\n                  isActive\r\n                    ? \"nav-link active px-3 py-2 rounded-pill fw-medium\"\r\n                    : \"nav-link px-3 py-2 rounded-pill fw-medium\"\r\n                }\r\n                style={({ isActive }) => ({\r\n                  background: isActive ? \"#f79329\" : \"transparent\",\r\n                  color: isActive ? \"white\" : \"#5a3e36\",\r\n                  transition: \"all 0.3s ease\",\r\n                })}\r\n                to=\"/about\"\r\n              >\r\n                關於我們\r\n              </NavLink>\r\n            </li>\r\n            {/* 後台登入 */}\r\n            <li className=\"nav-item mx-1\">\r\n              <NavLink\r\n                className={({ isActive }) =>\r\n                  isActive\r\n                    ? \"nav-link active px-3 py-2 rounded-pill fw-medium\"\r\n                    : \"nav-link px-3 py-2 rounded-pill fw-medium\"\r\n                }\r\n                style={({ isActive }) => ({\r\n                  background: isActive ? \"#f79329\" : \"transparent\",\r\n                  color: isActive ? \"white\" : \"#5a3e36\",\r\n                  transition: \"all 0.3s ease\",\r\n                })}\r\n                to=\"/Admin\"\r\n              >\r\n                後台登入\r\n              </NavLink>\r\n            </li>\r\n\r\n            {/* 已登入才顯示登出按鈕 */}\r\n            {isAuth && (\r\n              <li className=\"nav-item mx-1\">\r\n                <button\r\n                  className=\"nav-link btn px-3 py-2 rounded-pill fw-medium\"\r\n                  style={{\r\n                    background: \"#5a3e36\",\r\n                    color: \"white\",\r\n                    border: \"none\",\r\n                    transition: \"all 0.3s ease\",\r\n                  }}\r\n                  onClick={handleLogout}\r\n                  onMouseOver={(e) => e.currentTarget.style.background = \"#7a5e56\"}\r\n                  onMouseOut={(e) => e.currentTarget.style.background = \"#5a3e36\"}\r\n                >\r\n                  <i className=\"bi bi-box-arrow-right me-1\"></i>登出\r\n                </button>\r\n              </li>\r\n            )}\r\n          </ul>\r\n        </div>\r\n      </div>\r\n    </nav>\r\n  );\r\n};\r\n\r\nexport default Navbar;\r\n","import { useEffect } from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { RootState } from '../redux/store';\r\nimport { hideToast } from '../redux/slices/toastSlice';\r\n\r\nexport default function Toast() {\r\n  const { message, visible } = useSelector((state: RootState) => state.toast);\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    if (visible) {\r\n      const timer = setTimeout(() => {\r\n        dispatch(hideToast());\r\n      }, 3000); // 隱藏 Toast 的時間\r\n      return () => clearTimeout(timer);\r\n    }\r\n  }, [visible, dispatch]);\r\n\r\n  if (!visible) return null; // 不顯示 Toast\r\n\r\n  const isRemoval = message.includes('移除');\r\n  const toastHeaderClassName = isRemoval\r\n    ? \"toast-header bg-danger text-white\"\r\n    : \"toast-header bg-success text-white\";\r\n\r\n  return (\r\n    <div className=\"position-fixed top-0 end-0 p-3\" style={{ zIndex: 1500 }}>\r\n      <div \r\n        className=\"toast show\" \r\n        role=\"alert\" \r\n        aria-live=\"assertive\" \r\n        aria-atomic=\"true\"\r\n        style={{ \r\n          opacity: 1,\r\n          backgroundColor: '#fff',\r\n          boxShadow: '0 0.5rem 1rem rgba(0, 0, 0, 0.15)'\r\n        }}\r\n      >\r\n        <div className={toastHeaderClassName}>\r\n          <strong className=\"me-auto\">通知</strong>\r\n          <button\r\n            type=\"button\"\r\n            className=\"btn-close\"\r\n            aria-label=\"Close\"\r\n            onClick={() => dispatch(hideToast())}\r\n          ></button>\r\n        </div>\r\n        <div className=\"toast-body\">{message}</div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n","// layout page\r\nimport React, { useState } from 'react';\r\n// import { Link } from 'react-router-dom';\r\nimport { Outlet } from 'react-router-dom'\r\nimport Navbar from '../components/Navbar';\r\nimport Toast from './Toast';\r\n\r\nconst Layout: React.FC = () => {\r\n  const [isAuth, setIsAuth] = useState(true); // 是否登入\r\n  const [cartCount] = useState(0); // 新增購物車數量狀態\r\n  return (\r\n    <>\r\n      <div style={{\r\n        background: \"linear-gradient(to right, #ffecd2 0%, #fcb69f 100%)\",\r\n        boxShadow: \"0 2px 10px rgba(0,0,0,0.1)\"\r\n      }}>\r\n        <Navbar\r\n          isAuth={isAuth}\r\n          onLogout={() => setIsAuth(false)} // 登出後將 isAuth 設為 false\r\n          cartCount={cartCount} // 將購物車數量傳遞給 Navbar\r\n        />\r\n        <Toast />\r\n      </div>\r\n      <Outlet />\r\n      <footer style={{\r\n        background: \"linear-gradient(to right, #5a3e36, #9c7a6b)\",\r\n        color: \"white\",\r\n        padding: \"2rem 0\",\r\n        marginTop: \"3rem\"\r\n      }}>\r\n        <div className=\"container\">\r\n          <div className=\"row\">\r\n            <div className=\"col-12 col-md-4 mb-4 text-center text-md-start\">\r\n              <h5 className=\"fw-bold mb-3\">Cat's Store</h5>\r\n              <p>為您的貓咪提供最優質的商品和服務</p>\r\n              <div className=\"d-flex justify-content-center justify-content-md-start\">\r\n                <a href=\"#\" className=\"me-3 text-white fs-5\"><i className=\"bi bi-facebook\"></i></a>\r\n                <a href=\"#\" className=\"me-3 text-white fs-5\"><i className=\"bi bi-instagram\"></i></a>\r\n                <a href=\"#\" className=\"text-white fs-5\"><i className=\"bi bi-line\"></i></a>\r\n              </div>\r\n            </div>\r\n            <div className=\"col-12 col-md-4 mb-4 text-center text-md-start\">\r\n              <h5 className=\"fw-bold mb-3\">聯絡資訊</h5>\r\n              <p><i className=\"bi bi-geo-alt me-2\"></i>台北市貓貓區喵喵路88號</p>\r\n              <p><i className=\"bi bi-telephone me-2\"></i>(02) 1234-5678</p>\r\n              <p><i className=\"bi bi-envelope me-2\"></i>service@catsstore.com</p>\r\n            </div>\r\n            <div className=\"col-12 col-md-4 mb-4 text-center text-md-start\">\r\n              <h5 className=\"fw-bold mb-3\">營業時間</h5>\r\n              <p>週一至週五: 10:00 - 21:00</p>\r\n              <p>週六至週日: 11:00 - 22:00</p>\r\n            </div>\r\n          </div>\r\n          <hr className=\"mt-4 mb-4\" style={{ borderColor: \"rgba(255,255,255,0.2)\" }} />\r\n          <p className=\"text-center mb-0\">© 2025 Cat's Store. All Rights Reserved.</p>\r\n        </div>\r\n      </footer>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Layout;","import { Link } from 'react-router-dom';\r\n\r\nconst HomePage = () => {\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t{/* Hero 區塊 */}\r\n\t\t\t<section className=\"bg-light text-center py-4\" style={{ backgroundImage: \"url('https://storage.googleapis.com/vue-course-api.appspot.com/product-backend/1742749472222.jpg')\", backgroundSize: \"cover\", backgroundPosition: \"center\", height: \"350px\" }}>\r\n\t\t\t\t<h1 className=\"display-4 mt-4 fw-bold text-gradient\">歡迎來到 Cat's Store</h1>\r\n\t\t\t\t<p className=\"lead fw-bold text-gradient-blue text-shadow\">為您的毛孩選最棒的商品</p>\r\n\t\t\t\t<Link to=\"/products\" className=\"btn btn-warning btn-lg mt-3\">立即選購</Link>\r\n\t\t\t</section>\r\n\r\n\t\t\t{/* 熱門分類 */}\r\n\t\t\t<section className=\"container my-5\">\r\n\t\t\t\t<h2 className=\"text-center mb-4 fw-bold text-gradient\">\r\n\t\t\t\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"32\" height=\"32\" fill=\"currentColor\" className=\"bi bi-fire text-orange me-2\" viewBox=\"0 0 16 16\">\r\n\t\t\t\t\t\t<path d=\"M8 16c3.314 0 6-2 6-5.5 0-1.5-.5-4-2.5-6 .25 1.5-1.25 2-1.25 2C11 4 9 .5 6 0c.357 2 .5 4-2 6-1.25 1-2 2.729-2 4.5C2 14 4.686 16 8 16m0-1c-1.657 0-3-1-3-2.75 0-.75.25-2 1.25-3C6.125 10 7 10.5 7 10.5c-.375-1.25.5-3.25 2-3.5-.179 1-.25 2 1 3 .625.5 1 1.364 1 2.25C11 14 9.657 15 8 15\" />\r\n\t\t\t\t\t</svg>\r\n\t\t\t\t\t熱門分類\r\n\t\t\t\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"32\" height=\"32\" fill=\"currentColor\" className=\"bi bi-fire text-orange me-2\" viewBox=\"0 0 16 16\">\r\n\t\t\t\t\t\t<path d=\"M8 16c3.314 0 6-2 6-5.5 0-1.5-.5-4-2.5-6 .25 1.5-1.25 2-1.25 2C11 4 9 .5 6 0c.357 2 .5 4-2 6-1.25 1-2 2.729-2 4.5C2 14 4.686 16 8 16m0-1c-1.657 0-3-1-3-2.75 0-.75.25-2 1.25-3C6.125 10 7 10.5 7 10.5c-.375-1.25.5-3.25 2-3.5-.179 1-.25 2 1 3 .625.5 1 1.364 1 2.25C11 14 9.657 15 8 15\" />\r\n\t\t\t\t\t</svg>\r\n\t\t\t\t</h2>\r\n\t\t\t\t<div className=\"row text-center\">\r\n\t\t\t\t\t<div className=\"col-md-4 mb-3\">\r\n\t\t\t\t\t\t<Link to=\"/products\" className=\"card p-3 text-decoration-none\">\r\n\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"40\" height=\"40\" viewBox=\"0 0 512 512\"><path fill=\"currentColor\" d=\"M373.344 38.504c-.43.009-18.834 14.371-18.834 14.371l-28.965-5.792c-.212.06-24.143 22.862-24.143 22.862l-25.648-1.539l-15.46 16.824l-28.073-.722l-18.516 20.615l-25.371 2.928l-17.123 18.37l-27.215 8.95l-16.062 22.598l-23.72 6.224L91.21 184.67l-21.152 11.289l-7.401 21.78l-23.668 13.95l-3.076 23.899c14.712-5.336 28.468.705 38.951 8.4l25.725-15.97l34.922-5.55l30.017-27.085l45.21-5.291l32.97-29.707l32.682-8.178l20.254-26.588c10.445-5.84 25.525-9.99 38.857-15.558l9.799-24.895l28.314-10.77c.154-.168.32-.341.473-.51l3.082-18.761l20.486-15.564q.071-.185.139-.368L381.87 53.25zM256 207.496l-.705.004a864 864 0 0 1-8.63 5.045a852 852 0 0 1-24.214 13.402a1238 1238 0 0 1 33.549-.45c61.422 0 117.054 4.476 156.81 11.575c19.879 3.55 35.834 7.816 46.086 12.145c5.127 2.164 8.794 4.391 10.635 5.998c.795.693 1.053 1.042 1.23 1.281c-.177.24-.435.588-1.23 1.281c-1.84 1.607-5.508 3.834-10.635 5.998c-10.252 4.329-26.207 8.595-46.085 12.145c-39.757 7.1-95.39 11.576-156.811 11.576c-60.185 0-114.771-4.304-154.35-11.156c-1.062.294-2.148.61-3.197.89c-14.957 3.99-28.503 6.543-40.469 7.438c10.618 3.378 23.344 6.348 38.041 8.973c41.316 7.377 97.685 11.855 159.975 11.855s118.659-4.478 159.975-11.855c20.658-3.69 37.506-8.041 49.923-13.284c6.21-2.62 11.343-5.418 15.47-9.02c4.126-3.6 7.632-8.675 7.632-14.84c0-6.167-3.506-11.242-7.633-14.843c-4.126-3.6-9.26-6.398-15.469-9.02c-12.417-5.242-29.265-9.594-49.923-13.282c-41.316-7.378-97.685-11.856-159.975-11.856m224 80.926c-17.886 9.361-42.297 15.703-70.854 21.017c-44.267 8.238-98.66 12.433-153.084 12.815c-54.423.382-108.8-3.051-153.021-10.316c-22.11-3.633-41.675-8.208-57.629-13.9c-4.795-1.712-9.272-3.5-13.412-5.42v112.495c54.727 19.858 139.481 30.383 224 30.383s169.273-10.525 224-30.383zM23.354 421.135a16.2 16.2 0 0 0-.354 3.361c0 6.166 3.506 11.24 7.633 14.842c4.126 3.601 9.26 6.398 15.469 9.02c12.417 5.242 29.265 9.594 49.923 13.283c41.316 7.377 97.685 11.855 159.975 11.855s118.659-4.478 159.975-11.855c20.658-3.69 37.506-8.041 49.923-13.284c6.21-2.62 11.343-5.418 15.47-9.02c4.126-3.6 7.632-8.675 7.632-14.84c0-1.16-.125-2.282-.354-3.362c-58.527 21.982-145.45 32.361-232.646 32.361s-174.119-10.38-232.646-32.361\" /></svg>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<h5>貓咪飼料</h5>\r\n\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"col-md-4 mb-3\">\r\n\t\t\t\t\t\t<Link to=\"/products\" className=\"card p-3 text-decoration-none\">\r\n\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"40\" height=\"40\" viewBox=\"0 0 24 24\"><g fill=\"none\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\"><path d=\"M3.5 17.5q8.5 7 17 0\" /><path d=\"M19 18.5L17 10l1-2l2 1l1.5-1.5L19 3c-5.052.218-5.99 3.133-7 6H6a3 3 0 0 0-3 3m2 6.5L7 9\" /><path d=\"m8 20l2-5h4l2 5\" /></g></svg>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<h5>玩具 & 配件</h5>\r\n\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"col-md-4 mb-3\">\r\n\t\t\t\t\t\t<Link to=\"/products\" className=\"card p-3 text-decoration-none\">\r\n\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"40\" height=\"40\" viewBox=\"0 0 24 24\"><g fill=\"none\"><path fill=\"currentColor\" d=\"m19.98 9.063l.75.002v-.002zm-15.96 0h-.75v.002zM19.1 10.66l-.573.485l.084.1l.114.065zm-.272-1.265a.75.75 0 0 0-.888 1.21zM4.02 15h-.75zm2.04-4.395a.75.75 0 1 0-.888-1.21zM12 5.656c-.772 0-1.21.041-1.556.084c-.34.042-.512.072-.838.072v1.5c.44 0 .725-.047 1.02-.083c.29-.036.666-.073 1.374-.073zm0 1.5c.708 0 1.085.037 1.373.073c.296.036.58.083 1.021.083v-1.5c-.326 0-.498-.03-.838-.072A12 12 0 0 0 12 5.656zm2.394.157c.213 0 .412-.061.555-.114c.156-.058.317-.134.472-.214c.305-.157.659-.367.983-.554c.34-.195.66-.373.947-.503c.308-.14.484-.178.554-.178v-1.5c-.408 0-.83.157-1.171.31a13 13 0 0 0-1.078.571c-.354.204-.658.385-.922.52q-.194.1-.306.141c-.087.032-.087.02-.034.02zm3.511-1.563c.345 0 .675.103.907.303c.212.182.418.51.418 1.135h1.5c0-1-.352-1.766-.939-2.272c-.566-.487-1.272-.666-1.886-.666zm1.325 1.438v1.875h1.5V7.188zM9.606 5.813c.053 0 .053.011-.034-.02a3 3 0 0 1-.306-.141c-.264-.136-.568-.317-.922-.52c-.34-.196-.716-.408-1.078-.571c-.34-.154-.763-.311-1.171-.311v1.5c.07 0 .246.039.554.178c.287.13.608.308.947.503c.324.187.678.397.983.554c.155.08.316.156.472.214c.143.053.342.114.555.114zM6.095 4.25c-.614 0-1.32.179-1.886.666c-.587.505-.939 1.272-.939 2.271h1.5c0-.625.206-.952.418-1.134c.232-.2.563-.303.907-.303zM3.27 7.188v1.875h1.5V7.187zM12 20.75c1.431 0 3.54-.285 5.32-1.104c1.784-.82 3.41-2.273 3.41-4.646h-1.5c0 1.533-1.007 2.58-2.536 3.284s-3.412.966-4.694.966zm7.672-10.574a5 5 0 0 0-.844-.78l-.888 1.208q.358.267.587.54zM19.23 9.06c0 .198-.041.61-.138.895c-.055.159-.086.155-.03.11a.42.42 0 0 1 .412-.055l-.749 1.3c.18.104.402.18.65.167c.255-.013.466-.114.626-.242c.287-.23.432-.566.51-.796c.168-.491.218-1.08.22-1.374zM12 19.25c-1.282 0-3.163-.262-4.694-.966C5.776 17.58 4.77 16.533 4.77 15h-1.5c0 2.373 1.626 3.826 3.41 4.646c1.78.82 3.889 1.104 5.32 1.104zM4.77 15c0-.788-.057-1.437.019-2.128c.07-.645.253-1.218.684-1.727l-1.145-.97c-.68.805-.938 1.693-1.03 2.534c-.087.797-.028 1.66-.028 2.291zm.703-3.855a3.4 3.4 0 0 1 .587-.54l-.888-1.21q-.493.364-.844.78zM3.27 9.065c.001.294.051.883.219 1.374c.078.23.223.566.51.796c.16.128.371.229.625.242c.249.012.47-.063.651-.167l-.749-1.3a.42.42 0 0 1 .411.055c.057.045.026.049-.029-.11a3.3 3.3 0 0 1-.138-.895z\" /><path stroke=\"currentColor\" stroke-width=\"1.5\" d=\"M12.826 16c0 .173-.361.313-.806.313s-.807-.14-.807-.313s.361-.312.807-.312c.445 0 .806.14.806.312Zm2.674-2.406c0 .431-.217.781-.484.781s-.484-.35-.484-.781s.217-.781.484-.781s.484.35.484.78Zm-6 0c0 .431-.217.781-.484.781s-.484-.35-.484-.781s.217-.781.484-.781s.484.35.484.78Z\" /><path stroke=\"currentColor\" stroke-linecap=\"round\" stroke-width=\"1.5\" d=\"M22 15.469c-.483-.313-2.58-1.094-3.387-1.094m1.774 3.594c-.484-.313-1.613-1.094-2.42-1.094M2 15.469c.484-.313 2.58-1.094 3.387-1.094m-1.774 3.594c.484-.313 1.613-1.094 2.42-1.094\" /></g></svg>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<h5>貓砂用品</h5>\r\n\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</section>\r\n\r\n\t\t\t{/* 推薦產品 */}\r\n\t\t\t<section className=\"bg-light py-5\">\r\n\t\t\t\t<div className=\"container\">\r\n\t\t\t\t\t<h2 className=\"text-center mb-4 fw-bold text-gradient\">精選推薦</h2>\r\n\t\t\t\t\t<div className=\"row text-center\">\r\n\t\t\t\t\t\t<div className=\"col-md-4 mb-3\">\r\n\t\t\t\t\t\t\t<div className=\"card p-3\">\r\n\t\t\t\t\t\t\t\t<h5>超人氣貓糧</h5>\r\n\t\t\t\t\t\t\t\t<Link to=\"/products/-OM4pQo1-CnRBAkPN-MB\" className=\"btn btn-outline-primary mt-2\">查看產品</Link>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"col-md-4 mb-3\">\r\n\t\t\t\t\t\t\t<div className=\"card p-3\">\r\n\t\t\t\t\t\t\t\t<h5>智能貓砂盆</h5>\r\n\t\t\t\t\t\t\t\t<Link to=\"/products/-OM4go69eEB8pIw41URw\" className=\"btn btn-outline-primary mt-2\">查看產品</Link>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"col-md-4 mb-3\">\r\n\t\t\t\t\t\t\t<div className=\"card p-3\">\r\n\t\t\t\t\t\t\t\t<h5>逗貓神器</h5>\r\n\t\t\t\t\t\t\t\t<Link to=\"/products/-OM4kct--FDEuZ1nIupA\" className=\"btn btn-outline-primary mt-2\">查看產品</Link>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</section>\r\n\t\t\t{/* 訂閱電子報 區塊 */}\r\n\t\t\t<div className=\"newsletter py-5\" style={{ background: \"#e9ecef\" }}>\r\n\t\t\t\t<div className=\"container\">\r\n\t\t\t\t\t<div className=\"row justify-content-center\">\r\n\t\t\t\t\t\t<div className=\"col-md-8 text-center\">\r\n\t\t\t\t\t\t\t<h3 className=\"fw-bold\" style={{ color: \"#5a3e36\" }}>訂閱電子報</h3>\r\n\t\t\t\t\t\t\t<p className=\"text-muted\">隨時掌握最新商品資訊與專屬優惠</p>\r\n\t\t\t\t\t\t\t<div className=\"input-group mb-3 shadow-sm\">\r\n\t\t\t\t\t\t\t\t<input type=\"email\" className=\"form-control form-control-lg border-0\" placeholder=\"請輸入電子信箱\" />\r\n\t\t\t\t\t\t\t\t<button className=\"btn btn-primary\" type=\"button\">\r\n\t\t\t\t\t\t\t\t\t訂閱\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<p className=\"small text-muted mt-2\">我們保證只寄送與貓咪相關的資訊，不會有垃圾郵件！</p>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t{/* 關於我們 */}\r\n\t\t\t<section className=\"container my-5 text-center\">\r\n\t\t\t\t<h2 className=\"text-center mb-4 fw-bold text-gradient\">關於我們</h2>\r\n\t\t\t\t<p className=\"text-center\">Cat's Store 致力於提供高品質、創新的貓咪用品，讓每一隻貓咪都能擁有幸福生活。</p>\r\n\t\t\t\t<p className=\"text-center\">我們的熱情和專業將為您提供最好的貓咪生活體驗。</p>\r\n\t\t\t\t<Link to=\"/about\" className=\"btn btn-warning\">了解更多</Link>\r\n\t\t\t</section>\r\n\r\n\t\t\t{/* 聯絡我們 */}\r\n\t\t\t<section className=\"bg-gradient-orange text-white text-center py-5\">\r\n\t\t\t\t<h2 className=\"text-center mb-4 fw-bold\">聯絡我們</h2>\r\n\t\t\t\t<p>電話: 02-1234-5678</p>\r\n\t\t\t\t<p className=\"text-center fw-bold\">有任何問題歡迎來信：christinachen149@gmail.com</p>\r\n\t\t\t</section>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default HomePage;\r\n","import React, { useState } from 'react';\r\nimport axios, { AxiosResponse } from 'axios';\r\n// import reactLogo from './assets/react.svg'\r\n// import viteLogo from '/vite.svg'\r\nimport 'bootstrap/dist/css/bootstrap.min.css'; // 引入 bootstrap\r\n// import '@/styles/all.scss'; // 引入自訂的 scss 檔案\r\n\r\nfunction Week2() {\r\n  interface Product {\r\n    id: number;\r\n    title: string;\r\n    origin_price: number;\r\n    price: number;\r\n    is_enabled: boolean;\r\n    imageUrl: string;\r\n    category: string;\r\n    description: string;\r\n    content: string;\r\n    imagesUrl: string[];\r\n  }\r\n\r\n  const [tempProduct, setTempProduct] = React.useState<Product | null>(null); // 單一產品細節\r\n  const [productList, setProducts] = React.useState<Product[]>([]); // 產品列表\r\n  const [isAuth, setIsAuth] = useState(false); // 是否登入\r\n  const [account, setAccount] = useState({\r\n    username: '',\r\n    password: ''\r\n  })\r\n\r\n  // 處理表單輸入\r\n  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const { value, name } = e.target; //解構賦值\r\n    setAccount({\r\n      ...account,\r\n      [name]: value\r\n    })\r\n    // console.log(account)\r\n  }\r\n  // 登入\r\n  const handleLogin = (e: React.MouseEvent<HTMLButtonElement>) => {\r\n    e.preventDefault(); // 阻止表單提交\r\n    console.log(account)\r\n    // console.log(import.meta.env.VITE_BASE_URL)\r\n    axios.post(`${import.meta.env.VITE_BASE_URL}/v2/admin/signin`, account)\r\n      .then((res: AxiosResponse) => {\r\n        const { token, expired } = res.data; //解構賦值\r\n        console.log(token, expired) // 顯示 token 和 expired\r\n        document.cookie = `hexToken=${token}; expires=${new Date(expired)}`; // 設定 cookie\r\n        axios.defaults.headers.common['Authorization'] = token; // 設定預設請求標頭\r\n\r\n        if (res.data.success === true) {\r\n          alert('登入成功');\r\n          // window.location.href = '/';\r\n          axios.get(`${import.meta.env.VITE_BASE_URL}/v2/api${import.meta.env.VITE_API_PATH}/admin/products`)\r\n            .then((res: AxiosResponse) => {\r\n              console.log(res.data)\r\n              setProducts(res.data.products);\r\n            })\r\n            .catch((error) => {\r\n              console.error(error);\r\n            });\r\n\r\n          setIsAuth(true);// 登入成功\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        console.error(error);\r\n        alert('登入失敗');\r\n        setIsAuth(false);// 登入失敗\r\n\r\n      });\r\n}\r\n\r\nreturn (\r\n  <>\r\n    {isAuth ? \r\n      <section className=\"container mt-5\">\r\n        <div className=\"row\">\r\n          <div className=\"col-12 col-lg-6 mb-4\">\r\n            <h2 className=\"fw-bold\">產品列表</h2>\r\n            <table className=\"table\">\r\n              <thead>\r\n                <tr>\r\n                  <th>產品名稱</th>\r\n                  <th>原價</th>\r\n                  <th>售價</th>\r\n                  <th>是否啟用</th>\r\n                  <th>查看細節</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {productList.map((item) => (\r\n                  <tr key={item.id}>\r\n                    <td className=\"fw-bold\">{item.title}</td>\r\n                    <td>{item.origin_price}</td>\r\n                    <td>{item.price}</td>\r\n                    <td>{item.is_enabled ? \"是\" : \"否\"}</td>\r\n                    <td>\r\n                      <button className=\"btn btn-primary\" onClick={() => { setTempProduct(item) }}>查看細節</button>\r\n                    </td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n          <div className=\"col-12 col-lg-6 mb-4\">\r\n            <h2 className=\"fw-bold\">單一產品細節</h2>\r\n            {tempProduct && tempProduct.title ? (\r\n              <div className=\"card mb-3\">\r\n                <img src={tempProduct.imageUrl} className=\"card-img-top primary-image\" alt=\"主圖\" />\r\n                <div className=\"card-body\">\r\n                  <h5 className=\"card-title\">\r\n                    {tempProduct.title}\r\n                    <span className=\"badge bg-primary ms-2\">{tempProduct.category}</span>\r\n                  </h5>\r\n                  <p className=\"card-text\">商品描述：{tempProduct.description}</p>\r\n                  <p className=\"card-text\">商品內容：{tempProduct.content}</p>\r\n                  <div className=\"d-flex\">\r\n                    <p className=\"card-text text-secondary\"><del>{tempProduct.origin_price}</del></p>\r\n                    元 / {tempProduct.price} 元\r\n                  </div>\r\n                  <h5 className=\"mt-3\">更多圖片：</h5>\r\n                  <div className=\"d-flex flex-wrap\">\r\n                    {tempProduct.imagesUrl.map((image, index) => (\r\n                      <img key={index} src={image} className=\"img-thumbnail border-0 me-2\" alt=\"其他圖片\" />\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            ) : (\r\n              <p className=\"text-secondary fw-bold\">請選擇一個商品查看 !</p>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </section>\r\n:\r\n      <section className='bg-gradient'>\r\n        <div className=\"d-flex flex-column justify-content-center align-items-center vh-100\">\r\n          <h1 className=\"mb-5\">請先登入</h1>\r\n          <form className=\"d-flex flex-column gap-4 w-50 p-4 shadow rounded-3\">\r\n            <div className=\"form-floating mb-3\">\r\n              <input type=\"email\" className=\"form-control\" id=\"username\" placeholder=\"name@example.com\"\r\n                value={account.username}\r\n                name='username'\r\n                onChange={handleInputChange}\r\n              // onChange={(e) => setAccount({ ...account, username: e.target.value })} \r\n              />\r\n              <label htmlFor=\"username\">Email address</label>\r\n            </div>\r\n            <div className=\"form-floating\">\r\n              <input type=\"password\" className=\"form-control\" id=\"password\" placeholder=\"Password\"\r\n                value={account.password}\r\n                name='password'\r\n                onChange={handleInputChange}\r\n              // onChange={(e) => setAccount({ ...account, password: e.target.value })} \r\n              />\r\n              <label htmlFor=\"password\">Password</label>\r\n            </div>\r\n            <button className=\"btn btn-primary\" onClick={handleLogin}>登入</button>\r\n          </form>\r\n          <p className=\"mt-5 mb-3 text-muted\">&copy; 2025 Chris Chen</p>\r\n        </div>\r\n      </section>\r\n    }\r\n  </>\r\n)\r\n}\r\n\r\nexport default Week2;\r\n","import React, { useEffect, useRef, useState } from 'react';\r\nimport axios, { AxiosError } from 'axios';\r\n// import reactLogo from './assets/react.svg'\r\n// import viteLogo from '/vite.svg'\r\nimport 'bootstrap/dist/css/bootstrap.min.css'; // 引入 bootstrap\r\n// import '@/styles/all.scss'; // 引入自訂的 scss 檔案\r\nimport { Modal } from 'bootstrap';\r\n\r\nfunction Week3() {\r\n  interface Product {\r\n    id: number;\r\n    title: string;\r\n    origin_price: number;\r\n    price: number;\r\n    is_enabled: boolean;\r\n    imageUrl: string;\r\n    category: string;\r\n    unit: string;\r\n    description: string;\r\n    content: string;\r\n    imagesUrl: string[];\r\n  }\r\n  interface defaultModalState {\r\n    id?: string;\r\n    imageUrl: string;\r\n    title: string;\r\n    category: string;\r\n    unit: string;\r\n    origin_price: string;\r\n    price: string;\r\n    description: string;\r\n    content: string;\r\n    is_enabled: number | boolean;\r\n    imagesUrl: string[];\r\n  }\r\n  //定義 API 網址和路徑\r\n  const BASE_URL = import.meta.env.VITE_BASE_URL; // 從 .env 取得 API 網址\r\n  const API_PATH = import.meta.env.VITE_API_PATH; // 從 .env 取得 API 路徑\r\n\r\n  //定義 Modal 預設值\r\n  const defaultModalState = {\r\n    id: \"\",\r\n    imageUrl: \"\",\r\n    title: \"\",\r\n    category: \"\",\r\n    unit: \"\",\r\n    origin_price: \"\",\r\n    price: \"\",\r\n    description: \"\",\r\n    content: \"\",\r\n    is_enabled: 0,\r\n    imagesUrl: []\r\n  };\r\n\r\n  // const [tempProduct, setTempProduct] = React.useState<Product | null>(null); // 單一產品細節\r\n  const [tempProduct, setTempProduct] = useState<defaultModalState>(defaultModalState); // 單一產品細節\r\n  const [modalMode, setModalMode] = useState<'create' | 'edit'>('create'); // modal 模式\r\n\r\n  const [productList, setProducts] = React.useState<Product[]>([]); // 產品列表\r\n  const [isAuth, setIsAuth] = useState(false); // 是否登入\r\n  const [account, setAccount] = useState({\r\n    username: '',\r\n    password: ''\r\n  })\r\n\r\n  // 處理表單輸入\r\n  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const { value, name } = e.target; //解構賦值\r\n    setAccount({\r\n      ...account,\r\n      [name]: value\r\n    })\r\n    // console.log(account)\r\n  }\r\n  // 取得產品列表\r\n  const getProducts = async () => {\r\n    try {\r\n      const res = await axios.get(\r\n        `${BASE_URL}/v2/api${API_PATH}/admin/products`\r\n      );\r\n      setProducts(res.data.products);\r\n    } catch (error) {\r\n      alert(\"取得產品失敗\");\r\n      console.error(error);\r\n    }\r\n  };\r\n  // 登入\r\n  const handleLogin = async (e: React.MouseEvent<HTMLButtonElement>) => {\r\n    e.preventDefault(); // 阻止表單提交\r\n    try {\r\n      const res = await axios.post(`${import.meta.env.VITE_BASE_URL}/v2/admin/signin`, account);\r\n      const { token, expired } = res.data;\r\n      document.cookie = `hexToken=${token}; expires=${new Date(expired)}`; // 設定 cookie\r\n      axios.defaults.headers.common['Authorization'] = token; // 設定預設請求標頭\r\n\r\n      if (res.data.success === true) {\r\n        alert('登入成功');\r\n        await getProducts(); // 取得產品列表\r\n        setIsAuth(true);// 登入成功\r\n      }\r\n    } catch (error) {\r\n      const axiosError = error as AxiosError;\r\n      alert(`登入失敗: ${axiosError.message || '請檢查帳號密碼是否正確'}`);\r\n      setIsAuth(false);// 登入失敗\r\n    }\r\n  }\r\n  // 檢查使用者是否登入\r\n  const checkUserLogin = async () => {\r\n    try {\r\n      await axios.post(`${BASE_URL}/v2/api/user/check`);\r\n      // alert(\"使用者已登入\");\r\n      getProducts();\r\n      setIsAuth(true);\r\n    } catch (error) {\r\n      console.error(error);\r\n    }\r\n  };\r\n  useEffect(() => {\r\n    const token = document.cookie.replace(\r\n      /(?:(?:^|.*;\\s*)hexToken\\s*=\\s*([^;]*).*$)|^.*$/,\r\n      \"$1\",\r\n    );\r\n    axios.defaults.headers.common['Authorization'] = token;\r\n    checkUserLogin();\r\n  }, []);\r\n\r\n  //產品 modal 設定\r\n  const productModalRef = useRef<HTMLDivElement>(null);\r\n  const delProductModalRef = useRef<HTMLDivElement>(null);\r\n  useEffect(() => {\r\n    new Modal(productModalRef.current!);\r\n    new Modal(delProductModalRef.current!);\r\n    // productModal.show();\r\n  }, []);\r\n  interface OpenProductModalParams {\r\n    mode: 'create' | 'edit';\r\n  }\r\n  // 開啟 Modal\r\n  const openProductModal = (mode: OpenProductModalParams['mode'], product?: Product) => {\r\n    setModalMode(mode);\r\n    if (product) {\r\n      setTempProduct({\r\n        id: product.id.toString(),\r\n        imageUrl: product.imageUrl || \"\",  // 確保 `imageUrl` 存在\r\n        title: product.title,\r\n        category: product.category,\r\n        unit: product.unit,\r\n        origin_price: product.origin_price.toString(),\r\n        price: product.price.toString(),\r\n        description: product.description,\r\n        content: product.content,\r\n        is_enabled: product.is_enabled,\r\n        imagesUrl: product.imagesUrl.length > 0 ? product.imagesUrl : []\r\n      });\r\n    } else {\r\n      setTempProduct(defaultModalState);\r\n    }\r\n    const modalInstance = Modal.getInstance(productModalRef.current!);\r\n    if (modalInstance) {\r\n      modalInstance.show();\r\n    }\r\n  }\r\n  const openDelProductModal = (product: Product) => {\r\n    setTempProduct({\r\n      id: product.id.toString(),\r\n      imageUrl: product.imageUrl,\r\n      title: product.title,\r\n      category: product.category,\r\n      unit: '',\r\n      origin_price: product.origin_price.toString(),\r\n      price: product.price.toString(),\r\n      description: product.description,\r\n      content: product.content,\r\n      is_enabled: product.is_enabled,\r\n      imagesUrl: product.imagesUrl\r\n    });\r\n    const modalInstance = Modal.getInstance(delProductModalRef.current!);\r\n    if (modalInstance) {\r\n      modalInstance.show();\r\n    }\r\n  }\r\n  const closeProductModal = () => {\r\n    const modalInstance = Modal.getInstance(productModalRef.current!);\r\n    if (modalInstance) {\r\n      modalInstance.hide();\r\n    }\r\n    setTempProduct(defaultModalState);\r\n  }\r\n  const closeDelProductModal = () => {\r\n    const modalInstance = Modal.getInstance(delProductModalRef.current!);\r\n    if (modalInstance) {\r\n      modalInstance.hide();\r\n    }\r\n    setTempProduct(defaultModalState);\r\n  }\r\n  // 處理 Modal 表單輸入\r\n  const handleModalInputChange = (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) => {\r\n    const { value, name, type } = e.target as HTMLInputElement;\r\n    const checked = (e.target as HTMLInputElement).checked;\r\n    setTempProduct((prevProduct) => ({\r\n      ...prevProduct!,\r\n      [name]: type === 'checkbox' ? checked : value\r\n    })\r\n  );\r\n  }\r\n  // 處理 Modal 其他圖片輸入\r\n  const handleModalImageChange = (e: React.ChangeEvent<HTMLInputElement>, index: number) => {\r\n    const { value } = e.target;\r\n    setTempProduct((prevProduct) => {\r\n      const newImagesUrl = [...prevProduct.imagesUrl];\r\n      newImagesUrl[index] = value;\r\n      return {\r\n        ...prevProduct,\r\n        imagesUrl: newImagesUrl\r\n      };\r\n    });\r\n  }\r\n  // 新增圖片\r\n  const handleAddImageClick = () => {\r\n    setTempProduct((prevProduct) => ({\r\n      ...prevProduct,\r\n      imagesUrl: [...prevProduct.imagesUrl, \"\"]\r\n    }));\r\n  }\r\n  // 取消圖片\r\n  const handleCancelImageClick = () => {\r\n    // pop 也可以 移除最後一個元素\r\n    // const newImagesUrl = [...tempProduct.imagesUrl];\r\n    // newImagesUrl.pop();\r\n    setTempProduct((prevProduct) => ({\r\n      ...prevProduct,\r\n      // imagesUrl: newImagesUrl //pop \r\n      imagesUrl: prevProduct.imagesUrl.slice(0, prevProduct.imagesUrl.length - 1),\r\n    }));\r\n  }\r\n\r\n  //\r\n  const createProduct = async () => {\r\n    try {\r\n      await axios.post(`${BASE_URL}/v2/api${API_PATH}/admin/product`,\r\n        {\r\n          data: {\r\n            ...tempProduct,\r\n            origin_price: Number(tempProduct.origin_price),\r\n            price: Number(tempProduct.price),\r\n            is_enabled: tempProduct.is_enabled ? 1 : 0\r\n          }\r\n        });\r\n      return { success: true, message: '新增成功' };\r\n    } catch (error) {\r\n      const axiosError = error as AxiosError<{message?: string}>;\r\n      const errorMessage = axiosError.response?.data?.message || '發生未知錯誤';\r\n      return { success: false, message: `新增失敗: ${errorMessage}` };\r\n    }\r\n  }\r\n  \r\n  const updateProduct = async () => {\r\n    try {\r\n      await axios.put(`${BASE_URL}/v2/api${API_PATH}/admin/product/${tempProduct.id}`,\r\n        {\r\n          data: {\r\n            ...tempProduct,\r\n            origin_price: Number(tempProduct.origin_price),\r\n            price: Number(tempProduct.price),\r\n            is_enabled: tempProduct.is_enabled ? 1 : 0\r\n          }\r\n        });\r\n      return { success: true, message: '更新成功' };\r\n    } catch (error) {\r\n      const axiosError = error as AxiosError<{message?: string}>;\r\n      const errorMessage = axiosError.response?.data?.message || '發生未知錯誤';\r\n      return { success: false, message: `更新失敗: ${errorMessage}` };\r\n    }\r\n  }\r\n\r\n  const handleUploadProduct = async () => {\r\n    const apiCall = modalMode === 'create' ? createProduct : updateProduct;\r\n    const result = await apiCall();\r\n    \r\n    if (result.success) {\r\n      await getProducts();\r\n      closeProductModal();\r\n    } else {\r\n      alert(result.message);\r\n    }\r\n  }\r\n  \r\n  // 刪除產品\r\n  const delProduct = async () => {\r\n    try {\r\n      await axios.delete(`${BASE_URL}/v2/api${API_PATH}/admin/product/${tempProduct.id}`);\r\n      return { success: true, message: '刪除成功' };\r\n    } catch (error) {\r\n      const axiosError = error as AxiosError<{message?: string}>;\r\n      const errorMessage = axiosError.response?.data?.message || '發生未知錯誤';\r\n      return { success: false, message: `刪除失敗: ${errorMessage}` };\r\n    }\r\n  }\r\n  \r\n  const handleDelProduct = async () => {\r\n    const result = await delProduct();\r\n    if (result.success) {\r\n      await getProducts();\r\n      closeDelProductModal();\r\n    } else {\r\n      alert(result.message);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {isAuth ?\r\n        <section className=\"container mt-5\">\r\n          <div className=\"row\">\r\n            <div className=\"col-12 mb-4\">\r\n              <div className=\"d-flex justify-content-between align-items-center\">\r\n                <h2 className=\"fw-bold\">產品列表</h2>\r\n                <button onClick={() => { openProductModal('create') }} type=\"button\" className=\"btn btn-primary\"><i className=\"bi  bi-plus-lg\"></i>&nbsp;建立新的產品</button>\r\n              </div>\r\n              <table className=\"table\">\r\n                <thead>\r\n                  <tr>\r\n                    <th>產品名稱</th>\r\n                    <th>原價</th>\r\n                    <th>售價</th>\r\n                    <th>是否啟用</th>\r\n                    <th>查看細節</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  {productList.map((item) => (\r\n                    <tr key={item.id}>\r\n                      <td className=\"fw-bold\">{item.title}</td>\r\n                      <td>{item.origin_price}</td>\r\n                      <td>{item.price}</td>\r\n                      <td>{item.is_enabled ?\r\n                        (\r\n                          <span className=\"text-success\">啟用</span>\r\n                        ) : (\r\n                          <span className=\"text-danger\">未啟用</span>\r\n                        )}\r\n                      </td>\r\n                      <td>\r\n                        {/* <button className=\"btn btn-primary\" onClick={() => { setTempProduct(item) }}>查看細節</button> */}\r\n                        {/* <div className=\"btn-group\"> */}\r\n                        <div className=\"\">\r\n                          <button onClick={() => { const product = productList.find(product => product.id === item.id); if (product) openProductModal('edit', product); }} type=\"button\" className=\"btn btn-primary btn-sm me-2\"><i className=\"bi bi-pencil-square\"></i>&nbsp;編輯</button>\r\n                          <button onClick={() => { const product = productList.find(product => product.id === item.id); if (product) openDelProductModal(product); }} type=\"button\" className=\"btn btn-danger btn-sm\"><i className=\"bi bi-trash3-fill\"></i>&nbsp;刪除</button>\r\n                        </div>\r\n                      </td>\r\n                    </tr>\r\n                  ))}\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n          </div>\r\n        </section>\r\n        :\r\n        <section className='bg-gradient'>\r\n          <div className=\"d-flex flex-column justify-content-center align-items-center vh-100\">\r\n            <h1 className=\"mb-5\">請先登入</h1>\r\n            <form className=\"d-flex flex-column gap-4 w-50 p-4 shadow rounded-3\">\r\n              <div className=\"form-floating mb-3\">\r\n                <input type=\"email\" className=\"form-control\" id=\"username\" placeholder=\"name@example.com\"\r\n                  value={account.username}\r\n                  name='username'\r\n                  onChange={handleInputChange}\r\n                // onChange={(e) => setAccount({ ...account, username: e.target.value })} \r\n                />\r\n                <label htmlFor=\"username\">Email address</label>\r\n              </div>\r\n              <div className=\"form-floating\">\r\n                <input type=\"password\" className=\"form-control\" id=\"password\" placeholder=\"Password\"\r\n                  value={account.password}\r\n                  name='password'\r\n                  onChange={handleInputChange}\r\n                // onChange={(e) => setAccount({ ...account, password: e.target.value })} \r\n                />\r\n                <label htmlFor=\"password\">Password</label>\r\n              </div>\r\n              <button className=\"btn btn-primary\" onClick={handleLogin}>登入</button>\r\n            </form>\r\n            <p className=\"mt-5 mb-3 text-muted\">&copy; 2025 Chris Chen</p>\r\n          </div>\r\n        </section>\r\n      }\r\n      {/* 產品 Modal */}\r\n      <div ref={productModalRef} id=\"productModal\" className=\"modal\" style={{ backgroundColor: \"rgba(0,0,0,0.5)\" }}>\r\n        <div className=\"modal-dialog modal-dialog-centered modal-xl\">\r\n          <div className=\"modal-content border-0 shadow\">\r\n            <div className=\"modal-header border-bottom\">\r\n              {/* <h5 className=\"modal-title fs-4\">新增產品</h5> */}\r\n              <h5 className=\"modal-title fs-4\">{modalMode === 'create' ? '新增產品' : '編輯產品'}</h5>\r\n              <button onClick={closeProductModal} type=\"button\" className=\"btn-close\" aria-label=\"Close\"></button>\r\n            </div>\r\n\r\n            <div className=\"modal-body p-4\">\r\n              <div className=\"row g-4\">\r\n                <div className=\"col-md-4\">\r\n                  <div className=\"mb-4\">\r\n                    <label htmlFor=\"primary-image\" className=\"form-label\">\r\n                      主要圖片\r\n                    </label>\r\n                    <div className=\"input-group\">\r\n                      <input\r\n                        value={tempProduct.imageUrl}\r\n                        onChange={(e) => handleModalInputChange(e as React.ChangeEvent<HTMLInputElement>)}\r\n                        name=\"imageUrl\"\r\n                        type=\"text\"\r\n                        id=\"primary-image\"\r\n                        className=\"form-control\"\r\n                        placeholder=\"請輸入圖片連結\"\r\n                      />\r\n                    </div>\r\n                    {tempProduct.imageUrl ? (\r\n                        <img src={tempProduct.imageUrl}  alt={tempProduct.title} className=\"img-fluid\" \r\n                      />\r\n                    ) : (\r\n                      <div className=\"text-muted\">尚無圖片</div>\r\n                    )}\r\n\r\n                  </div>\r\n                  {/* 其他圖片 */}\r\n                  <div className=\"border border-2 border-dashed rounded-3 p-3\">\r\n                    {tempProduct.imagesUrl.map((image: string, index: number) => (\r\n                      <div key={index} className=\"mb-2\">\r\n                        <label\r\n                          htmlFor={`imagesUrl-${index + 1}`}\r\n                          className=\"form-label\"\r\n                        >\r\n                          其他圖片 {index + 1}\r\n                        </label>\r\n                        <input\r\n                          value={image}\r\n                          onChange={(e) => handleModalImageChange(e, index)} // 傳入 index 參數,以便知道是哪一個圖片欄位被更改了\r\n                          id={`imagesUrl-${index + 1}`}\r\n                          type=\"text\"\r\n                          placeholder={`圖片網址 ${index + 1}`}\r\n                          className=\"form-control mb-2\"\r\n                        />\r\n                        {tempProduct.imagesUrl.length > 0 && tempProduct.imagesUrl.some(url => url) ? (\r\n                          tempProduct.imagesUrl.map((image, index) => (\r\n                            image ? <img key={index} src={image} alt={`副圖 ${index + 1}`} className=\"img-fluid\" \r\n                            /> : null\r\n                          ))\r\n                        ) : (\r\n                          <div className=\"text-muted\">無附圖</div>\r\n                        )}\r\n\r\n\r\n                      </div>\r\n                    ))}\r\n                    {/* //新增圖片和取消圖片按鈕 */}\r\n                    <div className=\"btn-group w-100\">\r\n                      {tempProduct.imagesUrl.length < 5 && tempProduct.imagesUrl[tempProduct.imagesUrl.length - 1] !== \"\"\r\n                        && (\r\n                          <button className=\"btn btn-outline-primary btn-sm w-100\" onClick={() => handleAddImageClick()} >新增圖片</button>\r\n                        )\r\n                      }\r\n                      {/* //取消圖片按鈕 */}\r\n                      {tempProduct.imagesUrl.length > 1 && (\r\n                        <button className=\"btn btn-outline-danger btn-sm w-100\" onClick={() => handleCancelImageClick()} >取消圖片</button>\r\n                      )}\r\n                    </div>\r\n                    {/*  */}\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"col-md-8\">\r\n                  <div className=\"mb-3\">\r\n                    <label htmlFor=\"title\" className=\"form-label\">\r\n                      標題{tempProduct.id}\r\n                    </label>\r\n                    <input\r\n                      value={tempProduct.title}\r\n                      onChange={handleModalInputChange}\r\n                      name=\"title\"\r\n                      id=\"title\"\r\n                      type=\"text\"\r\n                      className=\"form-control\"\r\n                      placeholder=\"請輸入標題\"\r\n                    />\r\n                  </div>\r\n\r\n                  <div className=\"mb-3\">\r\n                    <label htmlFor=\"category\" className=\"form-label\">\r\n                      分類\r\n                    </label>\r\n                    <input\r\n                      value={tempProduct.category}\r\n                      onChange={handleModalInputChange}\r\n                      name=\"category\"\r\n                      id=\"category\"\r\n                      type=\"text\"\r\n                      className=\"form-control\"\r\n                      placeholder=\"請輸入分類\"\r\n                    />\r\n                  </div>\r\n\r\n                  <div className=\"mb-3\">\r\n                    <label htmlFor=\"unit\" className=\"form-label\">\r\n                      單位\r\n                    </label>\r\n                    <input\r\n                      value={tempProduct.unit}\r\n                      onChange={handleModalInputChange}\r\n                      name=\"unit\"\r\n                      id=\"unit\"\r\n                      type=\"text\"\r\n                      className=\"form-control\"\r\n                      placeholder=\"請輸入單位\"\r\n                    />\r\n                  </div>\r\n\r\n                  <div className=\"row g-3 mb-3\">\r\n                    <div className=\"col-6\">\r\n                      <label htmlFor=\"origin_price\" className=\"form-label\">\r\n                        原價\r\n                      </label>\r\n                      <input\r\n                        value={tempProduct.origin_price}\r\n                        onChange={handleModalInputChange}\r\n                        name=\"origin_price\"\r\n                        id=\"origin_price\"\r\n                        type=\"number\"\r\n                        min=\"0\"\r\n                        className=\"form-control\"\r\n                        placeholder=\"請輸入原價\"\r\n                      />\r\n                    </div>\r\n                    <div className=\"col-6\">\r\n                      <label htmlFor=\"price\" className=\"form-label\">\r\n                        售價\r\n                      </label>\r\n                      <input\r\n                        value={tempProduct.price}\r\n                        onChange={handleModalInputChange}\r\n                        name=\"price\"\r\n                        id=\"price\"\r\n                        type=\"number\"\r\n                        min=\"0\"\r\n                        className=\"form-control\"\r\n                        placeholder=\"請輸入售價\"\r\n                      />\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div className=\"mb-3\">\r\n                    <label htmlFor=\"description\" className=\"form-label\">\r\n                      產品描述\r\n                    </label>\r\n                    <textarea\r\n                      value={tempProduct.description}\r\n                      onChange={handleModalInputChange}\r\n                      name=\"description\"\r\n                      id=\"description\"\r\n                      className=\"form-control\"\r\n                      rows={4}\r\n                      placeholder=\"請輸入產品描述\"\r\n                    ></textarea>\r\n                  </div>\r\n\r\n                  <div className=\"mb-3\">\r\n                    <label htmlFor=\"content\" className=\"form-label\">\r\n                      說明內容\r\n                    </label>\r\n                    <textarea\r\n                      value={tempProduct.content}\r\n                      onChange={handleModalInputChange}\r\n                      name=\"content\"\r\n                      id=\"content\"\r\n                      className=\"form-control\"\r\n                      rows={4}\r\n                      placeholder=\"請輸入說明內容\"\r\n                    ></textarea>\r\n                  </div>\r\n\r\n                  <div className=\"form-check\">\r\n                    <input\r\n                      checked={Boolean(tempProduct.is_enabled)}\r\n                      onChange={handleModalInputChange}\r\n                      name=\"is_enabled\"\r\n                      type=\"checkbox\"\r\n                      className=\"form-check-input\"\r\n                      id=\"isEnabled\"\r\n                    />\r\n                    <label className=\"form-check-label\" htmlFor=\"isEnabled\">\r\n                      是否啟用\r\n                    </label>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"modal-footer border-top bg-light\">\r\n              <button onClick={closeProductModal} type=\"button\" className=\"btn btn-secondary\">\r\n                取消\r\n              </button>\r\n              <button onClick={handleUploadProduct} type=\"button\" className=\"btn btn-primary\">\r\n                確認\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      {/* 刪除產品 Modal */}\r\n      <div\r\n        ref={delProductModalRef}\r\n        id=\"delProductModal\"\r\n        className=\"modal fade\"\r\n        tabIndex={-1}\r\n        style={{ backgroundColor: \"rgba(0,0,0,0.5)\" }}\r\n      >\r\n        <div className=\"modal-dialog\">\r\n          <div className=\"modal-content\">\r\n            <div className=\"modal-header\">\r\n              <h1 className=\"modal-title fs-5\">刪除產品</h1>\r\n              <button\r\n                onClick={closeDelProductModal}\r\n                type=\"button\"\r\n                className=\"btn-close\"\r\n                data-bs-dismiss=\"modal\"\r\n                aria-label=\"Close\"\r\n              ></button>\r\n            </div>\r\n            <div className=\"modal-body\">\r\n              你是否要刪除&nbsp;\r\n              <span className=\"text-danger fw-bold\">{tempProduct.title}?</span>\r\n            </div>\r\n            <div className=\"modal-footer\">\r\n              <button\r\n                onClick={closeDelProductModal}\r\n                type=\"button\"\r\n                className=\"btn btn-secondary\"\r\n              >\r\n                取消\r\n              </button>\r\n              <button onClick={handleDelProduct} type=\"button\" className=\"btn btn-danger\">\r\n                刪除\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default Week3;\r\n","import React, { useState } from 'react';\r\n\r\ninterface LoginProps {\r\n  handleLogin: (username: string, password: string) => void;\r\n}\r\n\r\nconst Login: React.FC<LoginProps> = ({ handleLogin }) => {\r\n  const [account, setAccount] = useState({\r\n    username: '',\r\n    password: ''\r\n  });\r\n\r\n  // 監聽表單輸入\r\n  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const { name, value } = e.target;\r\n    setAccount((prev) => ({\r\n      ...prev,\r\n      [name]: value\r\n    }));\r\n  };\r\n\r\n  // 提交登入\r\n  const onSubmitLogin = (e: React.MouseEvent<HTMLButtonElement>) => {\r\n    e.preventDefault();\r\n    handleLogin(account.username, account.password);\r\n  };\r\n\r\n  return (\r\n    <section\r\n      className=\"position-relative min-vh-100\"\r\n      style={{\r\n        background: \"linear-gradient(135deg, #ff7e5f 0%, #feb47b 100%)\"\r\n      }}\r\n    >\r\n      {/* SVG Wave 置底 */}\r\n      <div\r\n        className=\"position-absolute bottom-0 start-0 w-100 overflow-hidden\"\r\n        style={{ lineHeight: 0 }}\r\n      >\r\n        <svg\r\n          style={{\r\n            position: \"relative\",\r\n            display: \"block\",\r\n            width: \"calc(100% + 1.3px)\",\r\n            height: \"100px\"\r\n          }}\r\n          preserveAspectRatio=\"none\"\r\n          viewBox=\"0 0 360 30\"\r\n        >\r\n          <path\r\n            d=\"M0,0 C60,20 300,0 360,20 V30 H0 Z\"\r\n            style={{ fill: \"#fff\" }}\r\n          />\r\n        </svg>\r\n      </div>\r\n\r\n      {/* 登入表單容器 */}\r\n      <div className=\"d-flex flex-column justify-content-center align-items-center min-vh-100\">\r\n        <h1 className=\"mb-3 text-white fw-bold\">請先登入</h1>\r\n\r\n        {/* 半透明 / 玻璃感容器 */}\r\n        <form\r\n          className=\"d-flex flex-column gap-4 p-4 shadow rounded-3\"\r\n          style={{\r\n            width: \"min(90%, 400px)\",\r\n            background: \"rgba(255, 255, 255, 0.2)\",\r\n            backdropFilter: \"blur(8px)\"\r\n          }}\r\n        >\r\n          <div className=\"form-floating\">\r\n            <input\r\n              type=\"email\"\r\n              className=\"form-control\"\r\n              id=\"username\"\r\n              placeholder=\"name@example.com\"\r\n              name=\"username\"\r\n              value={account.username}\r\n              onChange={handleInputChange}\r\n            />\r\n            <label htmlFor=\"username\">Email address</label>\r\n          </div>\r\n\r\n          <div className=\"form-floating\">\r\n            <input\r\n              type=\"password\"\r\n              className=\"form-control\"\r\n              id=\"password\"\r\n              placeholder=\"Password\"\r\n              name=\"password\"\r\n              value={account.password}\r\n              onChange={handleInputChange}\r\n            />\r\n            <label htmlFor=\"password\">Password</label>\r\n          </div>\r\n\r\n          <button\r\n            className=\"btn btn-light fw-bold\"\r\n            onClick={onSubmitLogin}\r\n          >\r\n            登入\r\n          </button>\r\n        </form>\r\n      </div>\r\n    </section>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n","import React, { useState } from 'react';\r\nimport { DefaultModalState } from './type';\r\nimport axios from 'axios';\r\n// import { Modal } from 'bootstrap';\r\n\r\n\r\ninterface ProductModalProps {\r\n  tempProduct: DefaultModalState;\r\n  setTempProduct: React.Dispatch<React.SetStateAction<DefaultModalState>>;\r\n  modalMode: 'create' | 'edit';\r\n  closeProductModal: () => void;\r\n  handleUploadProduct: () => void;   // 外層要去呼叫「createProduct 或 updateProduct」的整合函式\r\n  productModalRef: React.RefObject<HTMLDivElement>;\r\n\r\n  BASE_URL: string;\r\n  API_PATH: string;\r\n}\r\n\r\nconst ProductModal: React.FC<ProductModalProps> = ({\r\n  tempProduct,\r\n  setTempProduct,\r\n  modalMode,\r\n  closeProductModal,\r\n  handleUploadProduct,\r\n  productModalRef,\r\n  BASE_URL,\r\n  API_PATH\r\n}) => {\r\n  const [, forceUpdate] = useState(0); // 用於強制更新元件\r\n  // 處理檔案上傳\r\n  const handleFileChange = async (e: React.MouseEvent<HTMLInputElement>) => {\r\n    const fileInput = e.target as HTMLInputElement;\r\n    const file = fileInput.files?.[0];  // 檢查是否有選取檔案\r\n    if (!file) {\r\n      alert(\"請選擇圖片檔案\");\r\n      return;\r\n    }\r\n    // if (!file) return;\r\n    const formData = new FormData();\r\n    formData.append('file-to-upload', file);\r\n    try {\r\n      const res = await axios.post(`${BASE_URL}/v2/api${API_PATH}/admin/upload`, formData\r\n        ,\r\n        {\r\n          headers: {\r\n            'Content-Type': 'multipart/form-data', // 確保 Content-Type 正確\r\n          }\r\n        }\r\n      );\r\n      // API 回傳的圖片 URL\r\n      // console.log(res.data);\r\n      const uploadImageUrl = res.data.imageUrl;\r\n      // console.log(\"uploadImageUrl\", uploadImageUrl);\r\n      setTempProduct((prevProduct) => ({\r\n        ...prevProduct,\r\n        imageUrl: uploadImageUrl\r\n      }));\r\n      forceUpdate((n: number) => n + 1); // 強制畫面更新\r\n    } catch (error) {\r\n      console.error(error);\r\n      alert('圖片上傳失敗');\r\n    }\r\n  }\r\n  // 處理 Modal 表單輸入\r\n  const handleModalInputChange = (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) => {\r\n    const { value, name, type } = e.target as HTMLInputElement;\r\n    const checked = (e.target as HTMLInputElement).checked;\r\n    setTempProduct((prevProduct) => ({\r\n      ...prevProduct!,\r\n      [name]: type === 'checkbox' ? checked : value\r\n    })\r\n    );\r\n  }\r\n  // 處理 Modal 其他圖片輸入\r\n  const handleModalImageChange = (e: React.ChangeEvent<HTMLInputElement>, index: number) => {\r\n    const { value } = e.target;\r\n    setTempProduct((prevProduct) => {\r\n      const newImagesUrl = [...prevProduct.imagesUrl];\r\n      newImagesUrl[index] = value;\r\n      return {\r\n        ...prevProduct,\r\n        imagesUrl: newImagesUrl\r\n      };\r\n    });\r\n  }\r\n  // 新增圖片\r\n  const handleAddImageClick = () => {\r\n    setTempProduct((prevProduct) => ({\r\n      ...prevProduct,\r\n      imagesUrl: [...prevProduct.imagesUrl, \"\"]\r\n    }));\r\n  }\r\n  // 取消圖片\r\n  // 刪除圖片欄位最後一筆資料\r\n  const handleCancelImageClick = () => {\r\n    // pop 也可以 移除最後一個元素\r\n    // const newImagesUrl = [...tempProduct.imagesUrl];\r\n    // newImagesUrl.pop();\r\n    setTempProduct((prevProduct) => ({\r\n      ...prevProduct,\r\n      // imagesUrl: newImagesUrl //pop \r\n      imagesUrl: prevProduct.imagesUrl.slice(0, prevProduct.imagesUrl.length - 1),\r\n    }));\r\n  }\r\n  //\r\n  const handleAdditionalFileChange = async (e: React.ChangeEvent<HTMLInputElement>, index: number) => {\r\n    const fileInput = e.target;\r\n    const file = fileInput.files?.[0];\r\n\r\n    if (!file) {\r\n      alert(\"請選擇圖片檔案\");\r\n      return;\r\n    }\r\n\r\n    const formData = new FormData();\r\n    formData.append(\"file-to-upload\", file);\r\n\r\n    try {\r\n      const res = await axios.post(\r\n        `${BASE_URL}/v2/api${API_PATH}/admin/upload`,\r\n        formData,\r\n        { headers: { \"Content-Type\": \"multipart/form-data\" } }\r\n      );\r\n\r\n      console.log(`副圖片上傳成功: ${res.data.imageUrl}`);\r\n\r\n      setTempProduct((prev) => {\r\n        const newImagesUrl = [...prev.imagesUrl];\r\n        newImagesUrl[index] = res.data.imageUrl; // 更新對應的 index\r\n        return { ...prev, imagesUrl: newImagesUrl };\r\n      });\r\n    } catch (error) {\r\n      console.error(\"副圖片上傳失敗:\", error);\r\n      alert(\"副圖片上傳失敗\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div ref={productModalRef} id=\"productModal\" className=\"modal\" style={{ backgroundColor: \"rgba(0,0,0,0.5)\" }}>\r\n        <div className=\"modal-dialog modal-dialog-centered modal-xl\">\r\n          <div className=\"modal-content border-0 shadow\">\r\n            <div className=\"modal-header border-bottom\">\r\n              {/* <h5 className=\"modal-title fs-4\">新增產品</h5> */}\r\n              <h5 className=\"modal-title fs-4\">{modalMode === 'create' ? '新增產品' : '編輯產品'}</h5>\r\n              <button onClick={closeProductModal} type=\"button\" className=\"btn-close\" aria-label=\"Close\"></button>\r\n            </div>\r\n\r\n            <div className=\"modal-body p-4\">\r\n              <div className=\"row g-4\">\r\n                <div className=\"col-md-4\">\r\n                  {/*  */}\r\n                  <div className=\"mb-5\">\r\n                    <label htmlFor=\"fileInput\" className=\"form-label\"> 圖片上傳 </label>\r\n                    <input\r\n                      type=\"file\"\r\n                      accept=\".jpg,.jpeg,.png\"\r\n                      className=\"form-control\"\r\n                      id=\"fileInput\"\r\n                      onClick={handleFileChange}\r\n                    />\r\n                  </div>\r\n                  <div className=\"mb-4\">\r\n                    <label htmlFor=\"primary-image\" className=\"form-label\">\r\n                      主要圖片\r\n                    </label>\r\n                    <div className=\"input-group\">\r\n                      <input\r\n                        value={tempProduct.imageUrl}\r\n                        onChange={(e) => handleModalInputChange(e as React.ChangeEvent<HTMLInputElement>)}\r\n                        name=\"imageUrl\"\r\n                        type=\"text\"\r\n                        id=\"primary-image\"\r\n                        className=\"form-control\"\r\n                        placeholder=\"請輸入圖片連結\"\r\n                      />\r\n                    </div>\r\n                    {tempProduct.imageUrl ? (\r\n                      <img src={tempProduct.imageUrl} alt={tempProduct.title} className=\"img-fluid\"\r\n                      />\r\n                    ) : (\r\n                      <div className=\"text-muted\">尚無圖片</div>\r\n                    )}\r\n\r\n                  </div>\r\n                  {/* 其他圖片 */}\r\n                  <div className=\"border border-2 border-dashed rounded-3 p-3\">\r\n                    {tempProduct.imagesUrl.map((image: string, index: number) => (\r\n                      <div key={index} className=\"mb-2\">\r\n                        <label\r\n                          htmlFor={`imagesUrl-${index + 1}`}\r\n                          className=\"form-label\"\r\n                        >\r\n                          其他圖片 {index + 1}\r\n                        </label>\r\n                        {/* 圖片上傳 input */}\r\n                        <input\r\n                          type=\"file\"\r\n                          accept=\".jpg,.jpeg,.png\"\r\n                          className=\"form-control mb-2\"\r\n                          id={`fileInput-${index}`}\r\n                          onChange={(e) => handleAdditionalFileChange(e, index)}\r\n                        />\r\n\r\n                        {/* 手動輸入圖片 URL */}\r\n                        <input\r\n                          value={image}\r\n                          onChange={(e) => handleModalImageChange(e, index)} // 傳入 index 參數,以便知道是哪一個圖片欄位被更改了\r\n                          id={`imagesUrl-${index + 1}`}\r\n                          type=\"text\"\r\n                          placeholder={`圖片網址 ${index + 1}`}\r\n                          className=\"form-control mb-2\"\r\n                        />\r\n                        {/* 預覽圖片 */}\r\n                        {image ? (\r\n                          <img src={image} alt={`副圖 ${index + 1}`} className=\"img-fluid\" />\r\n                        ) : (\r\n                          <div className=\"text-muted\">尚無圖片</div>\r\n                        )}\r\n\r\n\r\n                      </div>\r\n                    ))}\r\n                    {/* //新增圖片和取消圖片按鈕 */}\r\n                    <div className=\"btn-group w-100\">\r\n                      {tempProduct.imagesUrl.length < 5 && tempProduct.imagesUrl[tempProduct.imagesUrl.length - 1] !== \"\"\r\n                        && (\r\n                          <button className=\"btn btn-outline-primary btn-sm w-100\" onClick={() => handleAddImageClick()} >新增圖片</button>\r\n                        )\r\n                      }\r\n                      {/* //取消圖片按鈕 */}\r\n                      {tempProduct.imagesUrl.length > 1 && (\r\n                        <button className=\"btn btn-outline-danger btn-sm w-100\" onClick={() => handleCancelImageClick()} >取消圖片</button>\r\n                      )}\r\n                    </div>\r\n                    {/*  */}\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"col-md-8\">\r\n                  <div className=\"mb-3\">\r\n                    <label htmlFor=\"title\" className=\"form-label\">\r\n                      標題{tempProduct.id}\r\n                    </label>\r\n                    <input\r\n                      value={tempProduct.title}\r\n                      onChange={handleModalInputChange}\r\n                      name=\"title\"\r\n                      id=\"title\"\r\n                      type=\"text\"\r\n                      className=\"form-control\"\r\n                      placeholder=\"請輸入標題\"\r\n                    />\r\n                  </div>\r\n\r\n                  <div className=\"mb-3\">\r\n                    <label htmlFor=\"category\" className=\"form-label\">\r\n                      分類\r\n                    </label>\r\n                    <input\r\n                      value={tempProduct.category}\r\n                      onChange={handleModalInputChange}\r\n                      name=\"category\"\r\n                      id=\"category\"\r\n                      type=\"text\"\r\n                      className=\"form-control\"\r\n                      placeholder=\"請輸入分類\"\r\n                    />\r\n                  </div>\r\n\r\n                  <div className=\"mb-3\">\r\n                    <label htmlFor=\"unit\" className=\"form-label\">\r\n                      單位\r\n                    </label>\r\n                    <input\r\n                      value={tempProduct.unit}\r\n                      onChange={handleModalInputChange}\r\n                      name=\"unit\"\r\n                      id=\"unit\"\r\n                      type=\"text\"\r\n                      className=\"form-control\"\r\n                      placeholder=\"請輸入單位\"\r\n                    />\r\n                  </div>\r\n\r\n                  <div className=\"row g-3 mb-3\">\r\n                    <div className=\"col-6\">\r\n                      <label htmlFor=\"origin_price\" className=\"form-label\">\r\n                        原價\r\n                      </label>\r\n                      <input\r\n                        value={tempProduct.origin_price}\r\n                        onChange={handleModalInputChange}\r\n                        name=\"origin_price\"\r\n                        id=\"origin_price\"\r\n                        type=\"number\"\r\n                        className=\"form-control\"\r\n                        placeholder=\"請輸入原價\"\r\n                      />\r\n                    </div>\r\n                    <div className=\"col-6\">\r\n                      <label htmlFor=\"price\" className=\"form-label\">\r\n                        售價\r\n                      </label>\r\n                      <input\r\n                        value={tempProduct.price}\r\n                        onChange={handleModalInputChange}\r\n                        name=\"price\"\r\n                        id=\"price\"\r\n                        type=\"number\"\r\n                        className=\"form-control\"\r\n                        placeholder=\"請輸入售價\"\r\n                      />\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div className=\"mb-3\">\r\n                    <label htmlFor=\"description\" className=\"form-label\">\r\n                      產品描述\r\n                    </label>\r\n                    <textarea\r\n                      value={tempProduct.description}\r\n                      onChange={handleModalInputChange}\r\n                      name=\"description\"\r\n                      id=\"description\"\r\n                      className=\"form-control\"\r\n                      rows={4}\r\n                      placeholder=\"請輸入產品描述\"\r\n                    ></textarea>\r\n                  </div>\r\n\r\n                  <div className=\"mb-3\">\r\n                    <label htmlFor=\"content\" className=\"form-label\">\r\n                      說明內容\r\n                    </label>\r\n                    <textarea\r\n                      value={tempProduct.content}\r\n                      onChange={handleModalInputChange}\r\n                      name=\"content\"\r\n                      id=\"content\"\r\n                      className=\"form-control\"\r\n                      rows={4}\r\n                      placeholder=\"請輸入說明內容\"\r\n                    ></textarea>\r\n                  </div>\r\n\r\n                  <div className=\"form-check\">\r\n                    <input\r\n                      checked={Boolean(tempProduct.is_enabled)}\r\n                      onChange={handleModalInputChange}\r\n                      name=\"is_enabled\"\r\n                      type=\"checkbox\"\r\n                      className=\"form-check-input\"\r\n                      id=\"isEnabled\"\r\n                    />\r\n                    <label className=\"form-check-label\" htmlFor=\"isEnabled\">\r\n                      是否啟用\r\n                    </label>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              {/* LV3 */}\r\n              {/* <div className=\"col-md-12\">\r\n                <div className=\"mb-3\">\r\n                  <label htmlFor=\"rating\" className=\"form-label\">商品評價星級 (1~5)</label>\r\n                  <input\r\n                    value={tempProduct.rating ?? 0}\r\n                    onChange={(e) => setTempProduct((prev) => ({ ...prev, rating: Number(e.target.value) }))}\r\n                    type=\"number\"\r\n                    min=\"1\"\r\n                    max=\"5\"\r\n                    className=\"form-control\"\r\n                    placeholder=\"請輸入評價星級\"\r\n                  />\r\n                </div>\r\n\r\n                <div className=\"mb-3\">\r\n                  <label htmlFor=\"stock\" className=\"form-label\">庫存數量</label>\r\n                  <input\r\n                    value={tempProduct.stock ?? 0}\r\n                    onChange={(e) => setTempProduct((prev) => ({ ...prev, stock: Number(e.target.value) }))}\r\n                    type=\"number\"\r\n                    min=\"0\"\r\n                    className=\"form-control\"\r\n                    placeholder=\"請輸入庫存數量\"\r\n                  />\r\n                </div>\r\n              </div> */}\r\n              {/*  */}\r\n            </div>\r\n            {/*  */}\r\n            <div className=\"modal-footer border-top bg-light\">\r\n              <button onClick={closeProductModal} type=\"button\" className=\"btn btn-secondary\">\r\n                取消\r\n              </button>\r\n              <button onClick={handleUploadProduct} type=\"button\" className=\"btn btn-primary\">\r\n                確認\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default ProductModal","import React from \"react\";\r\n\r\ninterface PageInfo {\r\n  total_pages: number;\r\n  current_page: number;\r\n  has_pre?: boolean;\r\n  has_next?: boolean;\r\n}\r\n\r\ninterface PaginationProps {\r\n  pageInfo: PageInfo;\r\n  handlePageChange: (page: number) => void;\r\n}\r\n\r\nconst Pagination: React.FC<PaginationProps> = ({ pageInfo, handlePageChange }) => {\r\n  const { total_pages, current_page, has_pre, has_next } = pageInfo;\r\n\r\n  return (\r\n    <nav>\r\n      <ul className=\"pagination\">\r\n        {/* 上一頁 */}\r\n        <li className={`page-item ${!has_pre ? \"disabled\" : \"\"}`}>\r\n          <button\r\n            onClick={() => has_pre && handlePageChange(current_page - 1)}\r\n            className=\"page-link\"\r\n            disabled={!has_pre}\r\n          >\r\n            上一頁\r\n          </button>\r\n        </li>\r\n\r\n        {/* 頁碼 */}\r\n        {Array.from({ length: total_pages }, (_, index) => (\r\n          <li key={index} className={`page-item ${current_page === index + 1 ? \"active\" : \"\"}`}>\r\n            <button\r\n              onClick={() => handlePageChange(index + 1)}\r\n              className=\"page-link\"\r\n            >\r\n              {index + 1}\r\n            </button>\r\n          </li>\r\n        ))}\r\n\r\n        {/* 下一頁 */}\r\n        <li className={`page-item ${!has_next ? \"disabled\" : \"\"}`}>\r\n          <button\r\n            onClick={() => has_next && handlePageChange(current_page + 1)}\r\n            className=\"page-link\"\r\n            disabled={!has_next}\r\n          >\r\n            下一頁\r\n          </button>\r\n        </li>\r\n      </ul>\r\n    </nav>\r\n  );\r\n};\r\n\r\nexport default Pagination;\r\n","import React from 'react';\r\n// import { DefaultModalState } from './type';\r\n// import axios from 'axios';\r\n// import { Modal } from 'bootstrap';\r\n\r\n\r\ninterface DeleteProductModalProps {\r\n\ttempProduct: DefaultModalState;\r\n\tcloseDelProductModal: () => void;\r\n\thandleDelProduct: () => void;\r\n\tdelProductModalRef: React.RefObject<HTMLDivElement>;\r\n}\r\n\r\nexport interface DefaultModalState {\r\n  id?: string;\r\n  imageUrl: string;\r\n  title: string;\r\n  category: string;\r\n  unit: string;\r\n  origin_price: string;\r\n  price: string;\r\n  description: string;\r\n  content: string;\r\n  is_enabled: number | boolean;\r\n  imagesUrl: string[];\r\n}\r\n\r\n//定義 Modal 預設值\r\n// const defaultModalState = {\r\n// \tid: \"\",\r\n// \timageUrl: \"\",\r\n// \ttitle: \"\",\r\n// \tcategory: \"\",\r\n// \tunit: \"\",\r\n// \torigin_price: \"\",\r\n// \tprice: \"\",\r\n// \tdescription: \"\",\r\n// \tcontent: \"\",\r\n// \tis_enabled: 0,\r\n// \timagesUrl: []\r\n// };\r\n\r\nconst DeleteProductModal: React.FC<DeleteProductModalProps> = ({\r\n\ttempProduct,\r\n\tcloseDelProductModal,\r\n\thandleDelProduct,\r\n\tdelProductModalRef\r\n}) => {\r\n\r\n\t//定義 Modal 預設值\r\n\t// const defaultModalState = {\r\n\t// id: \"\",\r\n\t// imageUrl: \"\",\r\n\t// title: \"\",\r\n\t// category: \"\",\r\n\t// unit: \"\",\r\n\t// origin_price: \"\",\r\n\t// price: \"\",\r\n\t// description: \"\",\r\n\t// content: \"\",\r\n\t// is_enabled: 0,\r\n\t// imagesUrl: []\r\n\t// };\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{/* 刪除產品 Modal */}\r\n\t\t\t<div\r\n\t\t\t\tref={delProductModalRef}\r\n\t\t\t\tid=\"delProductModal\"\r\n\t\t\t\tclassName=\"modal fade\"\r\n\t\t\t\ttabIndex={-1}\r\n\t\t\t\tstyle={{ backgroundColor: \"rgba(0,0,0,0.5)\" }}\r\n\t\t\t>\r\n\t\t\t\t<div className=\"modal-dialog\">\r\n\t\t\t\t\t<div className=\"modal-content\">\r\n\t\t\t\t\t\t<div className=\"modal-header\">\r\n\t\t\t\t\t\t\t<h1 className=\"modal-title fs-5\">刪除產品</h1>\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\tonClick={closeDelProductModal}\r\n\t\t\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t\t\t\tclassName=\"btn-close\"\r\n\t\t\t\t\t\t\t\tdata-bs-dismiss=\"modal\"\r\n\t\t\t\t\t\t\t\taria-label=\"Close\"\r\n\t\t\t\t\t\t\t></button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"modal-body\">\r\n\t\t\t\t\t\t\t你是否要刪除&nbsp;\r\n\t\t\t\t\t\t\t<span className=\"text-danger fw-bold\">{tempProduct.title}?</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"modal-footer\">\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\tonClick={closeDelProductModal}\r\n\t\t\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t\t\t\tclassName=\"btn btn-secondary\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t取消\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t<button onClick={handleDelProduct} type=\"button\" className=\"btn btn-danger\">\r\n\t\t\t\t\t\t\t\t刪除\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default DeleteProductModal;","import React, { useCallback, useEffect, useRef, useState } from 'react';\r\nimport axios from 'axios';\r\nimport { Modal } from 'bootstrap';\r\n\r\n//元件\r\nimport type { Product, DefaultModalState, PageInfo } from './type';\r\nimport ProductModal from './ProductModal';\r\nimport Pagination from './Pagination';\r\nimport DeleteProductModal from './DeleteProductModal';\r\n// import Toast from '../Toast';\r\nimport { useDispatch } from 'react-redux';\r\nimport { showToast } from '../../redux/slices/toastSlice';\r\n\r\n// import Coupon from '../Coupon/Coupon';\r\n// import { Link } from 'react-router-dom';\r\n\r\ninterface ProductProps {\r\n  isAuth: boolean;\r\n  token?: string;\r\n}\r\nconst Product: React.FC<ProductProps> = ({  token }) => {\r\n    // 添加 dispatch\r\n    const dispatch = useDispatch();\r\n  //定義 API 網址和路徑\r\n  const BASE_URL = import.meta.env.VITE_BASE_URL; // 從 .env 取得 API 網址\r\n  const API_PATH = import.meta.env.VITE_API_PATH; // 從 .env 取得 API 路徑\r\n\r\n  //定義 Modal 預設值\r\n  const defaultModalState = {\r\n    id: \"\",\r\n    imageUrl: \"\",\r\n    title: \"\",\r\n    category: \"\",\r\n    unit: \"\",\r\n    origin_price: \"\",\r\n    price: \"\",\r\n    description: \"\",\r\n    content: \"\",\r\n    is_enabled: 0,\r\n    imagesUrl: [], // 確保初始為空陣列\r\n  };\r\n\r\n  // 狀態\r\n  const [productList, setProducts] = React.useState<Product[]>([]); // 產品列表\r\n  // const [tempProduct, setTempProduct] = React.useState<Product | null>(null); // 單一產品細節\r\n  const [tempProduct, setTempProduct] = useState<DefaultModalState>(defaultModalState); // 單一產品細節\r\n  const [modalMode, setModalMode] = useState<'create' | 'edit'>('create'); // modal 模式\r\n  const [pageInfo, setPageInfo] = useState<PageInfo>({ total_pages: 0, current_page: 1 }); // 頁面資訊\r\n\r\n  //產品 modal 設定 Ref\r\n  const productModalRef = useRef<HTMLDivElement>(null);\r\n  const delProductModalRef = useRef<HTMLDivElement>(null);\r\n\r\n// 在所有 axios 請求中添加 token\r\nuseEffect(() => {\r\n  if (token) {\r\n    axios.defaults.headers.common['Authorization'] = token;\r\n  }\r\n}, [token]);\r\n\r\n  // 取得產品列表\r\n  const getProducts = useCallback(async (page = 1) => {\r\n    try {\r\n      const res = await axios.get(\r\n        `${BASE_URL}/v2/api${API_PATH}/admin/products?page=${page}`,\r\n        { \r\n          headers: { Authorization: token },\r\n          withCredentials: true \r\n        }\r\n      );\r\n      setProducts(res.data.products); // 設定產品列表\r\n      setPageInfo(res.data.pagination);// 設定分頁資訊\r\n      dispatch(showToast('取得產品列表成功'));\r\n    } catch (error) {\r\n      alert(\"取得產品失敗\");\r\n      console.error(error);\r\n    }\r\n  }, [BASE_URL, API_PATH, token, dispatch]);\r\n  //取得產品列表\r\n  useEffect(() => {\r\n    getProducts();\r\n  }, [getProducts]);\r\n\r\n  // 處理表單輸入\r\n  // const handleInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n  //   const { value, name } = e.target; //解構賦值\r\n  //   setAccount({\r\n  //     ...account,\r\n  //     [name]: value\r\n  //   })\r\n  //   // console.log(account)\r\n  // }\r\n\r\n\r\n  //產品 modal 設定\r\n  useEffect(() => {\r\n    new Modal(productModalRef.current!);\r\n    new Modal(delProductModalRef.current!);\r\n    // productModal.show();\r\n  }, []);\r\n  interface OpenProductModalParams {\r\n    mode: 'create' | 'edit';\r\n  }\r\n  // 開啟「新增/編輯」產品 Modal\r\n  const openProductModal = (mode: OpenProductModalParams['mode'], product?: Product) => {\r\n    setModalMode(mode);\r\n    if (product) {\r\n      setTempProduct({\r\n        id: product.id.toString(),\r\n        imageUrl: product.imageUrl || \"\",  // 確保 `imageUrl` 存在\r\n        title: product.title,\r\n        category: product.category,\r\n        unit: product.unit,\r\n        origin_price: product.origin_price.toString(),\r\n        price: product.price.toString(),\r\n        description: product.description,\r\n        content: product.content,\r\n        is_enabled: product.is_enabled,\r\n        imagesUrl: product.imagesUrl\r\n        // imagesUrl: product.imagesUrl.length > 0 ? product.imagesUrl : []\r\n      });\r\n    } else {\r\n      setTempProduct(defaultModalState);\r\n    }\r\n    const modalInstance = Modal.getInstance(productModalRef.current!);\r\n    if (modalInstance) {\r\n      modalInstance.show();\r\n    }\r\n  }\r\n  // 開啟刪除 Modal\r\n  const openDelProductModal = (product: Product) => {\r\n    setTempProduct({\r\n      id: product.id.toString(),\r\n      imageUrl: product.imageUrl,\r\n      title: product.title,\r\n      category: product.category,\r\n      unit: '',\r\n      origin_price: product.origin_price.toString(),\r\n      price: product.price.toString(),\r\n      description: product.description,\r\n      content: product.content,\r\n      is_enabled: product.is_enabled,\r\n      imagesUrl: product.imagesUrl\r\n    });\r\n    const modalInstance = Modal.getInstance(delProductModalRef.current!);\r\n    if (modalInstance) {\r\n      modalInstance.show();\r\n    }\r\n  }\r\n  const closeProductModal = () => {\r\n    const modalInstance = Modal.getInstance(productModalRef.current!);\r\n    if (modalInstance) {\r\n      modalInstance.hide();\r\n    }\r\n    setTempProduct(defaultModalState);\r\n  }\r\n  const closeDelProductModal = () => {\r\n    const modalInstance = Modal.getInstance(delProductModalRef.current!);\r\n    if (modalInstance) {\r\n      modalInstance.hide();\r\n    }\r\n    setTempProduct(defaultModalState);\r\n  }\r\n\r\n  // 新增產品\r\n  const createProduct = async () => {\r\n    try {\r\n      const res = await axios.post(`${BASE_URL}/v2/api${API_PATH}/admin/product`,\r\n        // tempProduct\r\n        {\r\n          data: {\r\n            ...tempProduct,\r\n            origin_price: Number(tempProduct.origin_price),\r\n            price: Number(tempProduct.price),\r\n            is_enabled: tempProduct.is_enabled ? 1 : 0,\r\n            // imagesUrl: tempProduct.imagesUrl,\r\n            imagesUrl: Array.isArray(tempProduct.imagesUrl) ? tempProduct.imagesUrl : [], // 確保 imagesUrl 是陣列\r\n            rating: tempProduct.rating ?? 0,\r\n            stock: tempProduct.stock ?? 0,\r\n          }\r\n        });\r\n      console.log(res.data);\r\n      // alert('新增成功');\r\n      // getProducts();\r\n      // closeProductModal();\r\n    } catch (error) {\r\n      console.error(error);\r\n      alert('新增失敗');\r\n    }\r\n  }\r\n\r\n  // 更新產品\r\n  const updateProduct = async () => {\r\n    try {\r\n      const res = await axios.put(`${BASE_URL}/v2/api${API_PATH}/admin/product/${tempProduct.id}`,\r\n        {\r\n          data: {\r\n            ...tempProduct,\r\n            origin_price: Number(tempProduct.origin_price),\r\n            price: Number(tempProduct.price),\r\n            is_enabled: tempProduct.is_enabled ? 1 : 0,\r\n            // imagesUrl: tempProduct.imagesUrl\r\n            imagesUrl: Array.isArray(tempProduct.imagesUrl) ? tempProduct.imagesUrl : [], // 確保 imagesUrl 存在\r\n            rating: tempProduct.rating ?? 0,\r\n            stock: tempProduct.stock ?? 0,\r\n          }\r\n        });\r\n      console.log(res.data);\r\n    } catch (error) {\r\n      console.error(error);\r\n      alert('更新失敗');\r\n    }\r\n  }\r\n\r\n  // 用於 ProductModal 按下「確認」後，依 mode 呼叫 create 或 update\r\n  const handleUploadProduct = async () => {\r\n    const apiCall = modalMode === 'create' ? createProduct : updateProduct;\r\n\r\n    try {\r\n      // await createProduct();\r\n      await apiCall();\r\n      // alert('新增成功');\r\n      getProducts();\r\n      closeProductModal();\r\n    } catch (error) {\r\n      console.error(error);\r\n      alert('新增失敗');\r\n    }\r\n  }\r\n  // 刪除產品\r\n  const delProduct = async () => {\r\n    try {\r\n      const res = await axios.delete(`${BASE_URL}/v2/api${API_PATH}/admin/product/${tempProduct.id}`,\r\n        {\r\n          data: {\r\n            ...tempProduct,\r\n            origin_price: Number(tempProduct.origin_price),\r\n            price: Number(tempProduct.price),\r\n            is_enabled: tempProduct.is_enabled ? 1 : 0,\r\n            imagesUrl: Array.isArray(tempProduct.imagesUrl) ? tempProduct.imagesUrl : [], // 確保 imagesUrl 存在\r\n          }\r\n        });\r\n      console.log(res.data);\r\n    } catch (error) {\r\n      console.error(error);\r\n      alert('刪除失敗');\r\n    }\r\n  }\r\n\r\n  // 刪除確認\r\n  const handleDelProduct = async () => {\r\n    try {\r\n      // await createProduct();\r\n      await delProduct();\r\n      // alert('新增成功');\r\n      getProducts();\r\n      closeDelProductModal();\r\n    } catch (error) {\r\n      console.error(error);\r\n      alert('刪除產品失敗');\r\n    }\r\n  }\r\n  //頁面設定\r\n  // interface PageInfo {\r\n  //   total_pages: number;\r\n  //   current_page: number;\r\n  //   has_pre?: boolean;\r\n  //   has_next?: boolean;\r\n  //   category?: string;\r\n  // }\r\n  // const [pageInfo, setPageInfo] = useState<PageInfo>({ total_pages: 0, current_page: 1 }); // 頁面資訊\r\n  // 分頁\r\n  const handlePageChange = (page: number) => {\r\n    getProducts(page);\r\n    // setPageInfo((prevPageInfo) => ({\r\n    //   ...prevPageInfo,\r\n    //   current_page: page\r\n    // }));\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <section className=\"container mt-5\">\r\n        <div className=\"row\">\r\n          <div className=\"col-12 mb-4\">\r\n            <div className=\"d-flex justify-content-between align-items-center\">\r\n              <h2 className=\"text-orange fw-bold\">產品列表</h2>\r\n              <button onClick={() => { openProductModal('create') }} type=\"button\" className=\"btn btn-primary\"><i className=\"bi bi-plus-lg\"></i>&nbsp;建立新的產品</button>\r\n            </div>\r\n            <table className=\"table\">\r\n              <thead>\r\n                <tr>\r\n                  <th>產品名稱</th>\r\n                  <th>原價</th>\r\n                  <th>售價</th>\r\n                  <th>是否啟用</th>\r\n                  <th>查看細節</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {productList.map((item) => (\r\n                  <tr key={item.id}>\r\n                    <td className=\"fw-bold\">{item.title}</td>\r\n                    <td>{item.origin_price}</td>\r\n                    <td>{item.price}</td>\r\n                    <td>{item.is_enabled ?\r\n                      (\r\n                        <span className=\"text-success\">啟用</span>\r\n                      ) : (\r\n                        <span className=\"text-danger\">未啟用</span>\r\n                      )}\r\n                    </td>\r\n                    <td>\r\n                      {/* <button className=\"btn btn-primary\" onClick={() => { setTempProduct(item) }}>查看細節</button> */}\r\n                      {/* <div className=\"btn-group\"> */}\r\n                      <div className=\"\">\r\n                        <button\r\n                          onClick={() => openProductModal('edit', item)}\r\n                          type=\"button\"\r\n                          className=\"btn btn-primary btn-sm me-2\"\r\n                        >\r\n                          <i className=\"bi bi-pencil-square\"></i>&nbsp;編輯\r\n                        </button>\r\n                        <button\r\n                          onClick={() => openDelProductModal(item)}\r\n                          type=\"button\"\r\n                          className=\"btn btn-danger btn-sm\"\r\n                        >\r\n                          <i className=\"bi bi-trash3-fill\"></i>&nbsp;刪除\r\n                        </button>\r\n                        {/* <button onClick={() => { const product = productList.find(product => product.id === item.id); if (product) openProductModal('edit', product); }} type=\"button\" className=\"btn btn-primary btn-sm me-2\"><i className=\"bi bi-pencil-square\"></i>&nbsp;編輯</button> */}\r\n                        {/* <button onClick={() => { const product = productList.find(product => product.id === item.id); if (product) openDelProductModal(product); }} type=\"button\" className=\"btn btn-danger btn-sm\"><i className=\"bi bi-trash3-fill\"></i>&nbsp;刪除</button> */}\r\n                      </div>\r\n                    </td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        </div>\r\n        <div className=\"d-flex justify-content-center\">\r\n          {/* 頁面 UI */}\r\n          <Pagination pageInfo={pageInfo} handlePageChange={handlePageChange} />\r\n        </div>\r\n      </section>\r\n      {/* 產品 Modal */}\r\n      <ProductModal\r\n        tempProduct={tempProduct}\r\n        setTempProduct={setTempProduct}\r\n        modalMode={modalMode}\r\n        closeProductModal={closeProductModal}\r\n        handleUploadProduct={handleUploadProduct}\r\n        productModalRef={productModalRef}\r\n        BASE_URL={BASE_URL}\r\n        API_PATH={API_PATH}\r\n      />\r\n      {/* 刪除產品 Modal */}\r\n      <DeleteProductModal\r\n        tempProduct={tempProduct}\r\n        closeDelProductModal={closeDelProductModal}\r\n        handleDelProduct={handleDelProduct}\r\n        delProductModalRef={delProductModalRef}\r\n      />\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Product;","import  { useEffect, useState } from 'react';\r\nimport axios, { AxiosResponse } from 'axios';\r\nimport 'bootstrap/dist/css/bootstrap.min.css'; // 引入 bootstrap\r\n// import '@/styles/all.scss'; // 引入自訂的 scss 檔案\r\nimport Login from '../components/Login/Login';\r\nimport Product from '../components/Product/Product';\r\n\r\nfunction Week4() {\r\n  //定義 API 網址和路徑\r\n  const BASE_URL = import.meta.env.VITE_BASE_URL; // 從 .env 取得 API 網址\r\n  const API_PATH = import.meta.env.VITE_API_PATH; // 從 .env 取得 API 路徑\r\n\r\n  const [isAuth, setIsAuth] = useState(false); // 是否登入\r\n  // const [account, setAccount] = useState({\r\n  //   username: '',\r\n  //   password: ''\r\n  // })\r\n  \r\n    useEffect(() => {\r\n      const checkUserLogin = async () => {\r\n        try {\r\n          await axios.post(`${BASE_URL}/v2/api/user/check`);\r\n          // alert(\"使用者已登入\");\r\n          // getProducts();\r\n          setIsAuth(true);\r\n        } catch (error) {\r\n          console.error(error);\r\n          setIsAuth(false);\r\n        }\r\n      };\r\n      const token = document.cookie.replace(\r\n        /(?:(?:^|.*;\\s*)hexToken\\s*=\\s*([^;]*).*$)|^.*$/,\r\n        \"$1\",\r\n      );\r\n      axios.defaults.headers.common['Authorization'] = token;\r\n      checkUserLogin();\r\n    }, []);\r\n    \r\n  // 登入\r\n  const handleLogin = (username: string, password: string) => {\r\n    // console.log({ username, password })\r\n    axios.post(`${BASE_URL}/v2/api${API_PATH}/admin/signin`, { username, password })\r\n    // axios.post(`${import.meta.env.VITE_BASE_URL}/v2/admin/signin`, { username, password })\r\n      .then((res: AxiosResponse) => {\r\n        const { token, expired } = res.data; //解構賦值\r\n        // console.log(token, expired) // 顯示 token 和 expired\r\n        document.cookie = `hexToken=${token}; expires=${new Date(expired)}`; // 設定 cookie\r\n        axios.defaults.headers.common['Authorization'] = token; // 設定預設請求標頭\r\n\r\n        if (res.data.success === true) {\r\n          alert('登入成功');\r\n          // window.location.href = '/';\r\n          // getProducts(); // 取得產品列表\r\n          setIsAuth(true);// 登入成功\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        console.error(error);\r\n        alert('登入失敗');\r\n        setIsAuth(false);// 登入失敗\r\n\r\n      });\r\n  }\r\n  return (\r\n    <>\r\n      {isAuth ? (\r\n        // 如果已登入，顯示產品頁面\r\n        <Product isAuth={isAuth} />\r\n      ) : (\r\n        // 尚未登入就顯示登入畫面\r\n        <Login handleLogin={handleLogin} />\r\n      )}\r\n    </>\r\n  )\r\n}\r\n\r\nexport default Week4;\r\n","import { useEffect, useRef, useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport { Modal } from \"bootstrap\";\r\nimport { useForm } from 'react-hook-form';\r\nimport ReactLoading from 'react-loading';\r\n\r\nconst BASE_URL = import.meta.env.VITE_BASE_URL;\r\nconst API_PATH = import.meta.env.VITE_API_PATH;\r\n\r\nfunction Week5() {\r\n  const [products, setProducts] = useState<Product[]>([]);\r\n  const [tempProduct, setTempProduct] = useState({\r\n    id: \"\",\r\n    title: \"\",\r\n    imageUrl: \"\",\r\n    content: \"\",\r\n    description: \"\",\r\n    price: 0,\r\n    origin_price: 0,\r\n  });\r\n\r\n  const [cart, setCart] = useState<CartItem[]>([]);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const { register, handleSubmit, formState: { errors } } = useForm<IFormInputs>();\r\n\r\n  useEffect(() => {\r\n    const token = document.cookie.replace(\r\n      /(?:(?:^|.*;\\s*)hexToken\\s*=\\s*([^;]*).*$)|^.*$/,\r\n      \"$1\"\r\n    );\r\n    axios.defaults.headers.common['Authorization'] = token;\r\n\r\n    const getProducts = async () => {\r\n      setLoading(true);\r\n      try {\r\n        const res = await axios.get(`${BASE_URL}/v2/api${API_PATH}/products`);\r\n        setProducts(res.data.products);\r\n      } catch (error) {\r\n        alert(\"取得產品失敗\");\r\n        console.error(error);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n    getProducts();\r\n  }, []);\r\n\r\n  const productModalRef = useRef<HTMLDivElement>(null);\r\n  useEffect(() => {\r\n    if (productModalRef.current) {\r\n      new Modal(productModalRef.current, { backdrop: false });\r\n    }\r\n  }, []);\r\n\r\n  const openModal = () => {\r\n    const modalInstance = Modal.getInstance(productModalRef.current!);\r\n    if (modalInstance) {\r\n      modalInstance.show();\r\n    }\r\n  };\r\n\r\n  const closeModal = () => {\r\n    const modalInstance = Modal.getInstance(productModalRef.current!);\r\n    if (modalInstance) {\r\n      modalInstance.hide();\r\n    }\r\n  };\r\n\r\n  interface Product {\r\n    id: number | string;\r\n    title: string;\r\n    imageUrl: string;\r\n    content: string;\r\n    description: string;\r\n    price: number;\r\n    origin_price: number;\r\n  }\r\n\r\n  interface CartItem extends Product {\r\n    quantity: number;\r\n  }\r\n\r\n  const handleSeeMore = (product: Product) => {\r\n    setTempProduct({\r\n      id: String(product.id), // 將 product.id 轉換為字串\r\n      title: product.title,\r\n      imageUrl: product.imageUrl,\r\n      content: product.content,\r\n      description: product.description,\r\n      price: product.price,\r\n      origin_price: product.origin_price,\r\n    });\r\n    openModal();\r\n  };\r\n\r\n\r\n  const handleAddToCart = async (product: Product) => {\r\n    setLoading(true);\r\n    try {\r\n      await axios.post(`${BASE_URL}/v2/api${API_PATH}/cart`, {\r\n        data: {\r\n          product_id: product.id,\r\n          qty: 1\r\n        }\r\n      });\r\n      setCart((prev) => {\r\n        const found = prev.find((item) => item.id === product.id);\r\n        if (found) {\r\n          return prev.map((item) =>\r\n            item.id === product.id\r\n              ? { ...item, quantity: item.quantity + 1 }\r\n              : item\r\n          );\r\n        }\r\n        return [...prev, { ...product, quantity: 1 }];\r\n      });\r\n      alert('已加入購物車');\r\n    } catch (error) {\r\n      console.error(error);\r\n      alert('加入購物車失敗');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  interface IFormInputs {\r\n    email: string;\r\n    name: string;\r\n    tel: string;\r\n    address: string;\r\n    message?: string;\r\n  }\r\n\r\n  const onSubmit = async (data: IFormInputs) => {\r\n    if (cart.length === 0) {\r\n      alert('購物車無產品，無法結帳');\r\n      return;\r\n    }\r\n    try {\r\n      await axios.post(`${BASE_URL}/v2/api${API_PATH}/order`, {\r\n        data: {\r\n          user: {\r\n            name: data.name,\r\n            email: data.email,\r\n            tel: data.tel,\r\n            address: data.address\r\n          },\r\n          message: data.message\r\n        }\r\n      });\r\n      setCart([]);\r\n      alert('訂單已送出並清空購物車');\r\n    } catch (error) {\r\n      console.error(error);\r\n      alert('訂單發送失敗');\r\n    }\r\n  };\r\n\r\n  const [qtySelect, setQtySelect] = useState(1);\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      {loading && (\r\n        <div\r\n          style={{\r\n            position: 'fixed',\r\n            top: 0,\r\n            left: 0,\r\n            width: '100vw',\r\n            height: '100vh',\r\n            display: 'flex',\r\n            justifyContent: 'center',\r\n            alignItems: 'center',\r\n            backgroundColor: 'rgba(255, 255, 255, 0.5)'\r\n          }}\r\n        >\r\n          <ReactLoading type=\"spin\" color=\"#000\" />\r\n        </div>\r\n      )}\r\n      <div className=\"mt-4\">\r\n        <table className=\"table align-middle\">\r\n          <thead>\r\n            <tr>\r\n              <th>圖片</th>\r\n              <th>商品名稱</th>\r\n              <th>價格</th>\r\n              <th></th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {products.map((product) => (\r\n              <tr key={product.id}>\r\n                <td style={{ width: \"200px\" }}>\r\n                  <img\r\n                    className=\"img-fluid\"\r\n                    src={product.imageUrl}\r\n                    alt={product.title}\r\n                  />\r\n                </td>\r\n                <td>{product.title}</td>\r\n                <td>\r\n                  <del className=\"h6\">原價 {product.origin_price} 元</del>\r\n                  <div className=\"h5\">特價 {product.origin_price}元</div>\r\n                </td>\r\n                <td>\r\n                  <div className=\"btn-group btn-group-sm\">\r\n                    <button\r\n                      onClick={() => handleSeeMore(product)}\r\n                      type=\"button\"\r\n                      className=\"btn btn-outline-secondary\"\r\n                    >\r\n                      查看更多\r\n                    </button>\r\n                    <button\r\n                      onClick={() => handleAddToCart(product)}\r\n                      type=\"button\"\r\n                      className=\"btn btn-outline-danger\"\r\n                    >\r\n                      加到購物車\r\n                    </button>\r\n                  </div>\r\n                </td>\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n        </table>\r\n\r\n        <div\r\n          ref={productModalRef}\r\n          style={{ backgroundColor: \"rgba(0,0,0,0.5)\" }}\r\n          className=\"modal fade\"\r\n          id=\"productModal\"\r\n          tabIndex={-1}\r\n        >\r\n          <div className=\"modal-dialog modal-dialog-centered\">\r\n            <div className=\"modal-content\">\r\n              <div className=\"modal-header\">\r\n                <h2 className=\"modal-title fs-5\">\r\n                  產品名稱：{tempProduct.title}\r\n                </h2>\r\n                <button\r\n                  onClick={closeModal}\r\n                  type=\"button\"\r\n                  className=\"btn-close\"\r\n                  data-bs-dismiss=\"modal\"\r\n                  aria-label=\"Close\"\r\n                ></button>\r\n              </div>\r\n              <div className=\"modal-body\">\r\n                <img\r\n                  src={tempProduct.imageUrl}\r\n                  alt={tempProduct.title}\r\n                  className=\"img-fluid\"\r\n                />\r\n                <p>內容：{tempProduct.content}</p>\r\n                <p>描述：{tempProduct.description}</p>\r\n                <p>\r\n                  價錢：{tempProduct.price}{\" \"}\r\n                  <del>{tempProduct.origin_price}</del> 元\r\n                </p>\r\n                <div className=\"input-group align-items-center\">\r\n                  <label htmlFor=\"qtySelect\">數量：</label>\r\n                  <select\r\n                    value={qtySelect}\r\n                    onChange={(e) => setQtySelect(Number(e.target.value))}\r\n                    id=\"qtySelect\"\r\n                    className=\"form-select\"\r\n                  >\r\n                    {Array.from({ length: 10 }).map((_, index) => (\r\n                      <option key={index} value={index + 1}>\r\n                        {index + 1}\r\n                      </option>\r\n                    ))}\r\n                  </select>\r\n                </div>\r\n              </div>\r\n              <div className=\"modal-footer\">\r\n                <button\r\n                  type=\"button\"\r\n                  className=\"btn btn-primary\"\r\n                  onClick={() => tempProduct.id && handleAddToCart(tempProduct)} // 確保有 `id`\r\n                  disabled={!tempProduct.id} // 如果 `id` 不存在則禁用按鈕\r\n                >\r\n                  加入購物車\r\n                </button>\r\n\r\n              </div>\r\n\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"text-end py-3\">\r\n          <button\r\n            className=\"btn btn-outline-danger\"\r\n            type=\"button\"\r\n            onClick={() => setCart([])}\r\n          >\r\n            清空購物車\r\n          </button>\r\n        </div>\r\n\r\n        <table className=\"table align-middle\">\r\n          <thead>\r\n            <tr>\r\n              <th></th>\r\n              <th>品名</th>\r\n              <th style={{ width: \"150px\" }}>數量/單位</th>\r\n              <th className=\"text-end\">單價</th>\r\n            </tr>\r\n          </thead>\r\n\r\n          <tbody>\r\n            {cart.map((item) => (\r\n              <tr key={item.id}>\r\n                <td>\r\n                  <button\r\n                    type=\"button\"\r\n                    className=\"btn btn-outline-danger btn-sm\"\r\n                    onClick={() =>\r\n                      setCart((prev) =>\r\n                        prev.filter((cartItem) => cartItem.id !== item.id)\r\n                      )\r\n                    }\r\n                  >\r\n                    x\r\n                  </button>\r\n                </td>\r\n                <td>{item.title}</td>\r\n                <td style={{ width: \"150px\" }}>\r\n                  <div className=\"d-flex align-items-center\">\r\n                    <div className=\"btn-group me-2\" role=\"group\">\r\n                      <button\r\n                        type=\"button\"\r\n                        className=\"btn btn-outline-dark btn-sm\"\r\n                        onClick={() =>\r\n                          setCart((prev) =>\r\n                            prev.map((cartItem) =>\r\n                              cartItem.id === item.id && cartItem.quantity > 1\r\n                                ? { ...cartItem, quantity: cartItem.quantity - 1 }\r\n                                : cartItem\r\n                            )\r\n                          )\r\n                        }\r\n                      >\r\n                        -\r\n                      </button>\r\n                      <span\r\n                        className=\"btn border border-dark\"\r\n                        style={{ width: \"50px\", cursor: \"auto\" }}\r\n                      >\r\n                        {item.quantity}\r\n                      </span>\r\n                      <button\r\n                        type=\"button\"\r\n                        className=\"btn btn-outline-dark btn-sm\"\r\n                        onClick={() =>\r\n                          setCart((prev) =>\r\n                            prev.map((cartItem) =>\r\n                              cartItem.id === item.id\r\n                                ? { ...cartItem, quantity: cartItem.quantity + 1 }\r\n                                : cartItem\r\n                            )\r\n                          )\r\n                        }\r\n                      >\r\n                        +\r\n                      </button>\r\n                    </div>\r\n                    <span className=\"input-group-text bg-transparent border-0\">\r\n                      unit\r\n                    </span>\r\n                  </div>\r\n                </td>\r\n                <td className=\"text-end\">{item.price * item.quantity}</td>\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n          <tfoot>\r\n            <tr>\r\n              <td colSpan={3} className=\"text-end\">\r\n                總計：\r\n              </td>\r\n              <td className=\"text-end\" style={{ width: \"130px\" }}>\r\n                {cart.reduce((acc, item) => acc + item.price * item.quantity, 0)}\r\n              </td>\r\n            </tr>\r\n          </tfoot>\r\n        </table>\r\n      </div>\r\n\r\n      <div className=\"my-5 row justify-content-center\">\r\n        <form className=\"col-md-6\" onSubmit={handleSubmit(onSubmit)}>\r\n          <div className=\"mb-3\">\r\n            <label htmlFor=\"email\" className=\"form-label\">\r\n              Email\r\n            </label>\r\n            <input\r\n              id=\"email\"\r\n              type=\"email\"\r\n              className=\"form-control\"\r\n              placeholder=\"請輸入 Email\"\r\n              {...register('email', { required: '必填' })}\r\n            />\r\n            <p className=\"text-danger my-2\">{errors.email?.message}</p>\r\n          </div>\r\n\r\n          <div className=\"mb-3\">\r\n            <label htmlFor=\"name\" className=\"form-label\">\r\n              收件人姓名\r\n            </label>\r\n            <input\r\n              id=\"name\"\r\n              className=\"form-control\"\r\n              placeholder=\"請輸入姓名\"\r\n              {...register('name', { required: '必填' })}\r\n            />\r\n            <p className=\"text-danger my-2\">{errors.name?.message}</p>\r\n          </div>\r\n\r\n          <div className=\"mb-3\">\r\n            <label htmlFor=\"tel\" className=\"form-label\">\r\n              收件人電話\r\n            </label>\r\n            <input\r\n              id=\"tel\"\r\n              type=\"text\"\r\n              className=\"form-control\"\r\n              placeholder=\"請輸入電話\"\r\n              {...register('tel', { required: '必填',\r\n                pattern: {\r\n                  value: /^(0[2-8]\\d{7}|09\\d{8})$/,\r\n                  message: '請輸入正確的電話格式'\r\n                }\r\n              })}\r\n            />\r\n            <p className=\"text-danger my-2\">{errors.tel?.message}</p>\r\n          </div>\r\n\r\n          <div className=\"mb-3\">\r\n            <label htmlFor=\"address\" className=\"form-label\">\r\n              收件人地址\r\n            </label>\r\n            <input\r\n              id=\"address\"\r\n              type=\"text\"\r\n              className=\"form-control\"\r\n              placeholder=\"請輸入地址\"\r\n              {...register('address', { required: '必填' })}\r\n            />\r\n            <p className=\"text-danger my-2\">{errors.address?.message}</p>\r\n          </div>\r\n\r\n          <div className=\"mb-3\">\r\n            <label htmlFor=\"message\" className=\"form-label\">\r\n              留言\r\n            </label>\r\n            <textarea\r\n              id=\"message\"\r\n              className=\"form-control\"\r\n              cols={30}\r\n              rows={10}\r\n              {...register('message')}\r\n            ></textarea>\r\n          </div>\r\n          <div className=\"text-end\">\r\n            <button type=\"submit\" className=\"btn btn-danger\">\r\n              送出訂單\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Week5;\r\n","import { useEffect, useRef, useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport { Modal } from \"bootstrap\";\r\nimport { useForm } from 'react-hook-form';\r\nimport ReactLoading from 'react-loading';\r\nimport Navbar from '../components/Navbar';\r\nconst BASE_URL = import.meta.env.VITE_BASE_URL;\r\nconst API_PATH = import.meta.env.VITE_API_PATH;\r\n\r\nfunction Week6() {\r\n  const [products, setProducts] = useState<Product[]>([]);\r\n  const [tempProduct, setTempProduct] = useState({\r\n    title: \"\",\r\n    imageUrl: \"\",\r\n    content: \"\",\r\n    description: \"\",\r\n    price: 0,\r\n    origin_price: 0,\r\n  });\r\n\r\n  const [cart, setCart] = useState<CartItem[]>([]);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const { register, handleSubmit, formState: { errors } } = useForm<IFormInputs>();\r\n\r\n  useEffect(() => {\r\n    const token = document.cookie.replace(\r\n      /(?:(?:^|.*;\\s*)hexToken\\s*=\\s*([^;]*).*$)|^.*$/,\r\n      \"$1\"\r\n    );\r\n    axios.defaults.headers.common['Authorization'] = token;\r\n\r\n    const getProducts = async () => {\r\n      setLoading(true);\r\n      try {\r\n        const res = await axios.get(`${BASE_URL}/v2/api${API_PATH}/products`);\r\n        setProducts(res.data.products);\r\n      } catch (error) {\r\n        alert(\"取得產品失敗\");\r\n        console.error(error);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n    getProducts();\r\n  }, []);\r\n\r\n  const productModalRef = useRef<HTMLDivElement>(null);\r\n  useEffect(() => {\r\n    if (productModalRef.current) {\r\n      new Modal(productModalRef.current, { backdrop: false });\r\n    }\r\n  }, []);\r\n\r\n  const openModal = () => {\r\n    const modalInstance = Modal.getInstance(productModalRef.current!);\r\n    if (modalInstance) {\r\n      modalInstance.show();\r\n    }\r\n  };\r\n\r\n  const closeModal = () => {\r\n    const modalInstance = Modal.getInstance(productModalRef.current!);\r\n    if (modalInstance) {\r\n      modalInstance.hide();\r\n    }\r\n  };\r\n\r\n  interface Product {\r\n    id: number | string;\r\n    title: string;\r\n    imageUrl: string;\r\n    content: string;\r\n    description: string;\r\n    price: number;\r\n    origin_price: number;\r\n  }\r\n\r\n  interface CartItem extends Product {\r\n    quantity: number;\r\n  }\r\n\r\n  const handleSeeMore = (product: Product) => {\r\n    setTempProduct(product);\r\n    openModal();\r\n  };\r\n\r\n  const handleAddToCart = async (product: Product) => {\r\n    setLoading(true);\r\n    try {\r\n      await axios.post(`${BASE_URL}/v2/api${API_PATH}/cart`, {\r\n        data: {\r\n          product_id: product.id,\r\n          qty: 1\r\n        }\r\n      });\r\n      setCart((prev) => {\r\n        const found = prev.find((item) => item.id === product.id);\r\n        if (found) {\r\n          return prev.map((item) =>\r\n            item.id === product.id\r\n              ? { ...item, quantity: item.quantity + 1 }\r\n              : item\r\n          );\r\n        }\r\n        return [...prev, { ...product, quantity: 1 }];\r\n      });\r\n      alert('已加入購物車');\r\n    } catch (error) {\r\n      console.error(error);\r\n      alert('加入購物車失敗');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  interface IFormInputs {\r\n    email: string;\r\n    name: string;\r\n    tel: string;\r\n    address: string;\r\n    message?: string;\r\n  }\r\n\r\n  const onSubmit = async (data: IFormInputs) => {\r\n    if (cart.length === 0) {\r\n      alert('購物車無產品，無法結帳');\r\n      return;\r\n    }\r\n    try {\r\n      await axios.post(`${BASE_URL}/v2/api${API_PATH}/order`, {\r\n        data: {\r\n          user: {\r\n            name: data.name,\r\n            email: data.email,\r\n            tel: data.tel,\r\n            address: data.address\r\n          },\r\n          message: data.message\r\n        }\r\n      });\r\n      setCart([]);\r\n      alert('訂單已送出並清空購物車');\r\n    } catch (error) {\r\n      console.error(error);\r\n      alert('訂單發送失敗');\r\n    }\r\n  };\r\n\r\n  const [qtySelect, setQtySelect] = useState(1);\r\n\r\n  return (\r\n    <>\r\n      <Navbar /> {/* Add this line */}\r\n      <div className=\"container\">\r\n        {loading && (\r\n          <div\r\n            style={{\r\n              position: 'fixed',\r\n              top: 0,\r\n              left: 0,\r\n              width: '100vw',\r\n              height: '100vh',\r\n              display: 'flex',\r\n              justifyContent: 'center',\r\n              alignItems: 'center',\r\n              backgroundColor: 'rgba(255, 255, 255, 0.5)'\r\n            }}\r\n          >\r\n            <ReactLoading type=\"spin\" color=\"#000\" />\r\n          </div>\r\n        )}\r\n        <div className=\"mt-4\">\r\n          <table className=\"table align-middle\">\r\n            <thead>\r\n              <tr>\r\n                <th>圖片</th>\r\n                <th>商品名稱</th>\r\n                <th>價格</th>\r\n                <th></th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {products.map((product) => (\r\n                <tr key={product.id}>\r\n                  <td style={{ width: \"200px\" }}>\r\n                    <img\r\n                      className=\"img-fluid\"\r\n                      src={product.imageUrl}\r\n                      alt={product.title}\r\n                    />\r\n                  </td>\r\n                  <td>{product.title}</td>\r\n                  <td>\r\n                    <del className=\"h6\">原價 {product.origin_price} 元</del>\r\n                    <div className=\"h5\">特價 {product.origin_price}元</div>\r\n                  </td>\r\n                  <td>\r\n                    <div className=\"btn-group btn-group-sm\">\r\n                      <button\r\n                        onClick={() => handleSeeMore(product)}\r\n                        type=\"button\"\r\n                        className=\"btn btn-outline-secondary\"\r\n                      >\r\n                        查看更多\r\n                      </button>\r\n                      <button\r\n                        onClick={() => handleAddToCart(product)}\r\n                        type=\"button\"\r\n                        className=\"btn btn-outline-danger\"\r\n                      >\r\n                        加到購物車\r\n                      </button>\r\n                    </div>\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n\r\n          <div\r\n            ref={productModalRef}\r\n            style={{ backgroundColor: \"rgba(0,0,0,0.5)\" }}\r\n            className=\"modal fade\"\r\n            id=\"productModal\"\r\n            tabIndex={-1}\r\n          >\r\n            <div className=\"modal-dialog modal-dialog-centered\">\r\n              <div className=\"modal-content\">\r\n                <div className=\"modal-header\">\r\n                  <h2 className=\"modal-title fs-5\">\r\n                    產品名稱：{tempProduct.title}\r\n                  </h2>\r\n                  <button\r\n                    onClick={closeModal}\r\n                    type=\"button\"\r\n                    className=\"btn-close\"\r\n                    data-bs-dismiss=\"modal\"\r\n                    aria-label=\"Close\"\r\n                  ></button>\r\n                </div>\r\n                <div className=\"modal-body\">\r\n                  <img\r\n                    src={tempProduct.imageUrl}\r\n                    alt={tempProduct.title}\r\n                    className=\"img-fluid\"\r\n                  />\r\n                  <p>內容：{tempProduct.content}</p>\r\n                  <p>描述：{tempProduct.description}</p>\r\n                  <p>\r\n                    價錢：{tempProduct.price}{\" \"}\r\n                    <del>{tempProduct.origin_price}</del> 元\r\n                  </p>\r\n                  <div className=\"input-group align-items-center\">\r\n                    <label htmlFor=\"qtySelect\">數量：</label>\r\n                    <select\r\n                      value={qtySelect}\r\n                      onChange={(e) => setQtySelect(Number(e.target.value))}\r\n                      id=\"qtySelect\"\r\n                      className=\"form-select\"\r\n                    >\r\n                      {Array.from({ length: 10 }).map((_, index) => (\r\n                        <option key={index} value={index + 1}>\r\n                          {index + 1}\r\n                        </option>\r\n                      ))}\r\n                    </select>\r\n                  </div>\r\n                </div>\r\n                <div className=\"modal-footer\">\r\n                  <button type=\"button\" className=\"btn btn-primary\">\r\n                    加入購物車\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"text-end py-3\">\r\n            <button\r\n              className=\"btn btn-outline-danger\"\r\n              type=\"button\"\r\n              onClick={() => setCart([])}\r\n            >\r\n              清空購物車\r\n            </button>\r\n          </div>\r\n\r\n          <table className=\"table align-middle\">\r\n            <thead>\r\n              <tr>\r\n                <th></th>\r\n                <th>品名</th>\r\n                <th style={{ width: \"150px\" }}>數量/單位</th>\r\n                <th className=\"text-end\">單價</th>\r\n              </tr>\r\n            </thead>\r\n\r\n            <tbody>\r\n              {cart.map((item) => (\r\n                <tr key={item.id}>\r\n                  <td>\r\n                    <button\r\n                      type=\"button\"\r\n                      className=\"btn btn-outline-danger btn-sm\"\r\n                      onClick={() =>\r\n                        setCart((prev) =>\r\n                          prev.filter((cartItem) => cartItem.id !== item.id)\r\n                        )\r\n                      }\r\n                    >\r\n                      x\r\n                    </button>\r\n                  </td>\r\n                  <td>{item.title}</td>\r\n                  <td style={{ width: \"150px\" }}>\r\n                    <div className=\"d-flex align-items-center\">\r\n                      <div className=\"btn-group me-2\" role=\"group\">\r\n                        <button\r\n                          type=\"button\"\r\n                          className=\"btn btn-outline-dark btn-sm\"\r\n                          onClick={() =>\r\n                            setCart((prev) =>\r\n                              prev.map((cartItem) =>\r\n                                cartItem.id === item.id && cartItem.quantity > 1\r\n                                  ? { ...cartItem, quantity: cartItem.quantity - 1 }\r\n                                  : cartItem\r\n                              )\r\n                            )\r\n                          }\r\n                        >\r\n                          -\r\n                        </button>\r\n                        <span\r\n                          className=\"btn border border-dark\"\r\n                          style={{ width: \"50px\", cursor: \"auto\" }}\r\n                        >\r\n                          {item.quantity}\r\n                        </span>\r\n                        <button\r\n                          type=\"button\"\r\n                          className=\"btn btn-outline-dark btn-sm\"\r\n                          onClick={() =>\r\n                            setCart((prev) =>\r\n                              prev.map((cartItem) =>\r\n                                cartItem.id === item.id\r\n                                  ? { ...cartItem, quantity: cartItem.quantity + 1 }\r\n                                  : cartItem\r\n                              )\r\n                            )\r\n                          }\r\n                        >\r\n                          +\r\n                        </button>\r\n                      </div>\r\n                      <span className=\"input-group-text bg-transparent border-0\">\r\n                        unit\r\n                      </span>\r\n                    </div>\r\n                  </td>\r\n                  <td className=\"text-end\">{item.price * item.quantity}</td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n            <tfoot>\r\n              <tr>\r\n                <td colSpan={3} className=\"text-end\">\r\n                  總計：\r\n                </td>\r\n                <td className=\"text-end\" style={{ width: \"130px\" }}>\r\n                  {cart.reduce((acc, item) => acc + item.price * item.quantity, 0)}\r\n                </td>\r\n              </tr>\r\n            </tfoot>\r\n          </table>\r\n        </div>\r\n\r\n        <div className=\"my-5 row justify-content-center\">\r\n          <form className=\"col-md-6\" onSubmit={handleSubmit(onSubmit)}>\r\n            <div className=\"mb-3\">\r\n              <label htmlFor=\"email\" className=\"form-label\">\r\n                Email\r\n              </label>\r\n              <input\r\n                id=\"email\"\r\n                type=\"email\"\r\n                className=\"form-control\"\r\n                placeholder=\"請輸入 Email\"\r\n                {...register('email', { required: '必填' })}\r\n              />\r\n              <p className=\"text-danger my-2\">{errors.email?.message}</p>\r\n            </div>\r\n\r\n            <div className=\"mb-3\">\r\n              <label htmlFor=\"name\" className=\"form-label\">\r\n                收件人姓名\r\n              </label>\r\n              <input\r\n                id=\"name\"\r\n                className=\"form-control\"\r\n                placeholder=\"請輸入姓名\"\r\n                {...register('name', { required: '必填' })}\r\n              />\r\n              <p className=\"text-danger my-2\">{errors.name?.message}</p>\r\n            </div>\r\n\r\n            <div className=\"mb-3\">\r\n              <label htmlFor=\"tel\" className=\"form-label\">\r\n                收件人電話\r\n              </label>\r\n              <input\r\n                id=\"tel\"\r\n                type=\"text\"\r\n                className=\"form-control\"\r\n                placeholder=\"請輸入電話\"\r\n                {...register('tel', { required: '必填',      pattern: {\r\n                  value: /^(0[2-8]\\d{7}|09\\d{8})$/,\r\n                  message: '請輸入正確的電話格式'\r\n                } })}\r\n              />\r\n              <p className=\"text-danger my-2\">{errors.tel?.message}</p>\r\n            </div>\r\n\r\n            <div className=\"mb-3\">\r\n              <label htmlFor=\"address\" className=\"form-label\">\r\n                收件人地址\r\n              </label>\r\n              <input\r\n                id=\"address\"\r\n                type=\"text\"\r\n                className=\"form-control\"\r\n                placeholder=\"請輸入地址\"\r\n                {...register('address', { required: '必填' })}\r\n              />\r\n              <p className=\"text-danger my-2\">{errors.address?.message}</p>\r\n            </div>\r\n\r\n            <div className=\"mb-3\">\r\n              <label htmlFor=\"message\" className=\"form-label\">\r\n                留言\r\n              </label>\r\n              <textarea\r\n                id=\"message\"\r\n                className=\"form-control\"\r\n                cols={30}\r\n                rows={10}\r\n                {...register('message')}\r\n              ></textarea>\r\n            </div>\r\n            <div className=\"text-end\">\r\n              <button type=\"submit\" className=\"btn btn-danger\">\r\n                送出訂單\r\n              </button>\r\n            </div>\r\n          </form>\r\n        </div>\r\n        \r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Week6;\r\n","import { useEffect, useRef, useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport { Modal } from \"bootstrap\";\r\nimport { useForm } from 'react-hook-form';\r\nimport ReactLoading from 'react-loading';\r\nimport Navbar from '../components/Navbar';\r\nimport Toast from '../components/Toast'; // Add this line\r\nimport { useDispatch, useSelector } from 'react-redux'; // Add this line\r\nimport { showToast } from '../redux/slices/toastSlice'; // Add this line\r\nimport { addToCart, clearCart } from '../redux/slices/cartSlice'; // Add this line\r\nimport { RootState } from '../redux/store'; // Add this line\r\n\r\nconst BASE_URL = import.meta.env.VITE_BASE_URL;\r\nconst API_PATH = import.meta.env.VITE_API_PATH;\r\n\r\nfunction Week6() {\r\n  const [products, setProducts] = useState<Product[]>([]);\r\n  const [tempProduct, setTempProduct] = useState<Product>({\r\n    id: \"\",\r\n    title: \"\",\r\n    imageUrl: \"\",\r\n    content: \"\",\r\n    description: \"\",\r\n    price: 0,\r\n    origin_price: 0,\r\n  });\r\n\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const { register, handleSubmit, formState: { errors } } = useForm<IFormInputs>();\r\n\r\n  const dispatch = useDispatch(); // Add this line\r\n\r\n  const cart = useSelector((state: RootState) => state.cart); // Use Redux cart\r\n\r\n  useEffect(() => {\r\n    const token = document.cookie.replace(\r\n      /(?:(?:^|.*;\\s*)hexToken\\s*=\\s*([^;]*).*$)|^.*$/,\r\n      \"$1\"\r\n    );\r\n    axios.defaults.headers.common['Authorization'] = token;\r\n\r\n    const getProducts = async () => {\r\n      setLoading(true);\r\n      try {\r\n        const res = await axios.get(`${BASE_URL}/v2/api${API_PATH}/products`);\r\n        setProducts(res.data.products);\r\n      } catch (error) {\r\n        alert(\"取得產品失敗\");\r\n        console.error(error);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n    getProducts();\r\n  }, []);\r\n\r\n  const productModalRef = useRef<HTMLDivElement>(null);\r\n  useEffect(() => {\r\n    if (productModalRef.current) {\r\n      new Modal(productModalRef.current, { backdrop: false });\r\n    }\r\n  }, []);\r\n\r\n  const openModal = () => {\r\n    const modalInstance = Modal.getInstance(productModalRef.current!);\r\n    if (modalInstance) {\r\n      modalInstance.show();\r\n    }\r\n  };\r\n\r\n  const closeModal = () => {\r\n    const modalInstance = Modal.getInstance(productModalRef.current!);\r\n    if (modalInstance) {\r\n      modalInstance.hide();\r\n    }\r\n  };\r\n\r\n  interface Product {\r\n    id: number | string;\r\n    title: string;\r\n    imageUrl: string;\r\n    content: string;\r\n    description: string;\r\n    price: number;\r\n    origin_price: number;\r\n  }\r\n\r\n  //   interface CartItem extends Product {\r\n  //     quantity: number;\r\n  //   }\r\n\r\n  const handleSeeMore = (product: Product) => {\r\n    setTempProduct(product);\r\n    openModal();\r\n  };\r\n\r\n  const handleAddToCart = async (product: Product) => {\r\n    setLoading(true);\r\n    try {\r\n      await axios.post(`${BASE_URL}/v2/api${API_PATH}/cart`, {\r\n        data: {\r\n          product_id: product.id,\r\n          qty: 1\r\n        }\r\n      });\r\n      dispatch(addToCart({\r\n        product,\r\n        quantity: 1\r\n      }));\r\n      dispatch(showToast('已加入購物車')); // Add this line\r\n    } catch (error) {\r\n      console.error(error);\r\n      alert('加入購物車失敗');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleAddToCartFromModal = async () => {\r\n    setLoading(true);\r\n    try {\r\n      await axios.post(`${BASE_URL}/v2/api${API_PATH}/cart`, {\r\n        data: {\r\n          product_id: tempProduct.id,\r\n          qty: qtySelect\r\n        }\r\n      });\r\n      dispatch(addToCart({\r\n        product: tempProduct,\r\n        quantity: qtySelect\r\n      }));\r\n      dispatch(showToast(`已加入 ${qtySelect} 個 ${tempProduct.title} 至購物車`));\r\n      closeModal();\r\n    } catch (error) {\r\n      console.error(error);\r\n      alert('加入購物車失敗');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  interface IFormInputs {\r\n    email: string;\r\n    name: string;\r\n    tel: string;\r\n    address: string;\r\n    message?: string;\r\n  }\r\n\r\n  const onSubmit = async (data: IFormInputs) => {\r\n    if (cart.length === 0) {\r\n      alert('購物車無產品，無法結帳');\r\n      return;\r\n    }\r\n    try {\r\n      await axios.post(`${BASE_URL}/v2/api${API_PATH}/order`, {\r\n        data: {\r\n          user: {\r\n            name: data.name,\r\n            email: data.email,\r\n            tel: data.tel,\r\n            address: data.address\r\n          },\r\n          message: data.message\r\n        }\r\n      });\r\n      dispatch(clearCart());\r\n      dispatch(showToast('訂單已送出並清空購物車')); // Add this line\r\n    } catch (error) {\r\n      console.error(error);\r\n      alert('訂單發送失敗');\r\n    }\r\n  };\r\n\r\n  const [qtySelect, setQtySelect] = useState(1);\r\n\r\n  return (\r\n    <>\r\n      <Navbar /> \r\n      <Toast /> \r\n      <div className=\"container\">\r\n        {loading && (\r\n          <div\r\n            style={{\r\n              position: 'fixed',\r\n              top: 0,\r\n              left: 0,\r\n              width: '100vw',\r\n              height: '100vh',\r\n              display: 'flex',\r\n              justifyContent: 'center',\r\n              alignItems: 'center',\r\n              backgroundColor: 'rgba(255, 255, 255, 0.5)'\r\n            }}\r\n          >\r\n            <ReactLoading type=\"spin\" color=\"#000\" />\r\n          </div>\r\n        )}\r\n        <div className=\"mt-4\">\r\n          <table className=\"table align-middle\">\r\n            <thead>\r\n              <tr>\r\n                <th>圖片</th>\r\n                <th>商品名稱</th>\r\n                <th>價格</th>\r\n                <th></th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {products.map((product) => (\r\n                <tr key={product.id}>\r\n                  <td style={{ width: \"200px\" }}>\r\n                    <img\r\n                      className=\"img-fluid\"\r\n                      src={product.imageUrl}\r\n                      alt={product.title}\r\n                    />\r\n                  </td>\r\n                  <td>{product.title}</td>\r\n                  <td>\r\n                    <del className=\"h6\">原價 {product.origin_price} 元</del>\r\n                    <div className=\"h5\">特價 {product.origin_price}元</div>\r\n                  </td>\r\n                  <td>\r\n                    <div className=\"btn-group btn-group-sm\">\r\n                      <button\r\n                        onClick={() => handleSeeMore(product)}\r\n                        type=\"button\"\r\n                        className=\"btn btn-outline-secondary\"\r\n                      >\r\n                        查看更多\r\n                      </button>\r\n                      <button\r\n                        onClick={() => handleAddToCart(product)}\r\n                        type=\"button\"\r\n                        className=\"btn btn-outline-danger\"\r\n                      >\r\n                        加到購物車\r\n                      </button>\r\n                    </div>\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n\r\n          <div\r\n            ref={productModalRef}\r\n            style={{ backgroundColor: \"rgba(0,0,0,0.5)\" }}\r\n            className=\"modal fade\"\r\n            id=\"productModal\"\r\n            tabIndex={-1}\r\n          >\r\n            <div className=\"modal-dialog modal-dialog-centered\">\r\n              <div className=\"modal-content\">\r\n                <div className=\"modal-header\">\r\n                  <h2 className=\"modal-title fs-5\">\r\n                    產品名稱：{tempProduct.title}\r\n                  </h2>\r\n                  <button\r\n                    onClick={closeModal}\r\n                    type=\"button\"\r\n                    className=\"btn-close\"\r\n                    data-bs-dismiss=\"modal\"\r\n                    aria-label=\"Close\"\r\n                  ></button>\r\n                </div>\r\n                <div className=\"modal-body\">\r\n                  <img\r\n                    src={tempProduct.imageUrl}\r\n                    alt={tempProduct.title}\r\n                    className=\"img-fluid\"\r\n                  />\r\n                  <p>內容：{tempProduct.content}</p>\r\n                  <p>描述：{tempProduct.description}</p>\r\n                  <p>\r\n                    價錢：{tempProduct.price}{\" \"}\r\n                    <del>{tempProduct.origin_price}</del> 元\r\n                  </p>\r\n                  <div className=\"input-group align-items-center\">\r\n                    <label htmlFor=\"qtySelect\">數量：</label>\r\n                    <select\r\n                      value={qtySelect}\r\n                      onChange={(e) => setQtySelect(Number(e.target.value))}\r\n                      id=\"qtySelect\"\r\n                      className=\"form-select\"\r\n                    >\r\n                      {Array.from({ length: 10 }).map((_, index) => (\r\n                        <option key={index} value={index + 1}>\r\n                          {index + 1}\r\n                        </option>\r\n                      ))}\r\n                    </select>\r\n                  </div>\r\n                </div>\r\n                <div className=\"modal-footer\">\r\n                  <button \r\n                    type=\"button\" \r\n                    className=\"btn btn-primary\"\r\n                    onClick={handleAddToCartFromModal}\r\n                  >\r\n                    加入購物車\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"text-end py-3\">\r\n            <button\r\n              className=\"btn btn-outline-danger\"\r\n              type=\"button\"\r\n              onClick={() => dispatch(clearCart())}\r\n            >\r\n              清空購物車\r\n            </button>\r\n          </div>\r\n\r\n          <table className=\"table align-middle\">\r\n            <thead>\r\n              <tr>\r\n                <th></th>\r\n                <th>品名</th>\r\n                <th style={{ width: \"150px\" }}>數量/單位</th>\r\n                <th className=\"text-end\">單價</th>\r\n              </tr>\r\n            </thead>\r\n\r\n            <tbody>\r\n              {cart.map((item) => (\r\n                <tr key={item.id}>\r\n                  <td>\r\n                    <button\r\n                      type=\"button\"\r\n                      className=\"btn btn-outline-danger btn-sm\"\r\n                      onClick={() =>\r\n                        dispatch(clearCart())\r\n                      }\r\n                    >\r\n                      x\r\n                    </button>\r\n                  </td>\r\n                  <td>{item.title}</td>\r\n                  <td style={{ width: \"150px\" }}>\r\n                    <div className=\"d-flex align-items-center\">\r\n                      <div className=\"btn-group me-2\" role=\"group\">\r\n                        <button\r\n                          type=\"button\"\r\n                          className=\"btn btn-outline-dark btn-sm\"\r\n                          onClick={() =>\r\n                            dispatch(addToCart({\r\n                              product: item,\r\n                              quantity: item.quantity - 1\r\n                            }))\r\n                          }\r\n                        >\r\n                          -\r\n                        </button>\r\n                        <span\r\n                          className=\"btn border border-dark\"\r\n                          style={{ width: \"50px\", cursor: \"auto\" }}\r\n                        >\r\n                          {item.quantity}\r\n                        </span>\r\n                        <button\r\n                          type=\"button\"\r\n                          className=\"btn btn-outline-dark btn-sm\"\r\n                          onClick={() =>\r\n                            dispatch(addToCart({\r\n                              product: item,\r\n                              quantity: item.quantity + 1\r\n                            }))\r\n                          }\r\n                        >\r\n                          +\r\n                        </button>\r\n                      </div>\r\n                      <span className=\"input-group-text bg-transparent border-0\">\r\n                        unit\r\n                      </span>\r\n                    </div>\r\n                  </td>\r\n                  <td className=\"text-end\">{item.price * item.quantity}</td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n            <tfoot>\r\n              <tr>\r\n                <td colSpan={3} className=\"text-end\">\r\n                  總計：\r\n                </td>\r\n                <td className=\"text-end\" style={{ width: \"130px\" }}>\r\n                  {cart.reduce((acc, item) => acc + item.price * item.quantity, 0)}\r\n                </td>\r\n              </tr>\r\n            </tfoot>\r\n          </table>\r\n        </div>\r\n\r\n        <div className=\"my-5 row justify-content-center\">\r\n          <form className=\"col-md-6\" onSubmit={handleSubmit(onSubmit)}>\r\n            <div className=\"mb-3\">\r\n              <label htmlFor=\"email\" className=\"form-label\">\r\n                Email\r\n              </label>\r\n              <input\r\n                id=\"email\"\r\n                type=\"email\"\r\n                className=\"form-control\"\r\n                placeholder=\"請輸入 Email\"\r\n                {...register('email', { required: '必填' })}\r\n              />\r\n              <p className=\"text-danger my-2\">{errors.email?.message}</p>\r\n            </div>\r\n\r\n            <div className=\"mb-3\">\r\n              <label htmlFor=\"name\" className=\"form-label\">\r\n                收件人姓名\r\n              </label>\r\n              <input\r\n                id=\"name\"\r\n                className=\"form-control\"\r\n                placeholder=\"請輸入姓名\"\r\n                {...register('name', { required: '必填' })}\r\n              />\r\n              <p className=\"text-danger my-2\">{errors.name?.message}</p>\r\n            </div>\r\n\r\n            <div className=\"mb-3\">\r\n              <label htmlFor=\"tel\" className=\"form-label\">\r\n                收件人電話\r\n              </label>\r\n              <input\r\n                id=\"tel\"\r\n                type=\"text\"\r\n                className=\"form-control\"\r\n                placeholder=\"請輸入電話\"\r\n                {...register('tel', { required: '必填',      pattern: {\r\n                  value: /^(0[2-8]\\d{7}|09\\d{8})$/,\r\n                  message: '請輸入正確的電話格式'\r\n                } })}\r\n              />\r\n              <p className=\"text-danger my-2\">{errors.tel?.message}</p>\r\n            </div>\r\n\r\n            <div className=\"mb-3\">\r\n              <label htmlFor=\"address\" className=\"form-label\">\r\n                收件人地址\r\n              </label>\r\n              <input\r\n                id=\"address\"\r\n                type=\"text\"\r\n                className=\"form-control\"\r\n                placeholder=\"請輸入地址\"\r\n                {...register('address', { required: '必填' })}\r\n              />\r\n              <p className=\"text-danger my-2\">{errors.address?.message}</p>\r\n            </div>\r\n\r\n            <div className=\"mb-3\">\r\n              <label htmlFor=\"message\" className=\"form-label\">\r\n                留言\r\n              </label>\r\n              <textarea\r\n                id=\"message\"\r\n                className=\"form-control\"\r\n                cols={30}\r\n                rows={10}\r\n                {...register('message')}\r\n              ></textarea>\r\n            </div>\r\n            <div className=\"text-end\">\r\n              <button type=\"submit\" className=\"btn btn-danger\">\r\n                送出訂單\r\n              </button>\r\n            </div>\r\n          </form>\r\n        </div>\r\n        \r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Week6;\r\n","import { useEffect, useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport { Link } from \"react-router-dom\";\r\nimport ReactLoading from \"react-loading\";\r\n// import Navbar from \"../components/Navbar\";\r\nimport Toast from \"../components/Toast\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { showToast } from \"../redux/slices/toastSlice\";\r\n\r\nconst BASE_URL = import.meta.env.VITE_BASE_URL;\r\nconst API_PATH = import.meta.env.VITE_API_PATH;\r\n\r\ninterface Product {\r\n  id: number | string;\r\n  title: string;\r\n  imageUrl: string;\r\n  price: number;\r\n  origin_price: number;\r\n  category?: string; // 建議給個可選屬性作為類別\r\n}\r\n\r\ninterface CartItem {\r\n  id: number | string;\r\n  title: string;\r\n  price: number;\r\n  quantity: number;\r\n}\r\n\r\ninterface ProductsProps {\r\n  cart: CartItem[];\r\n  setCart: React.Dispatch<React.SetStateAction<CartItem[]>>;\r\n}\r\n\r\nconst Products: React.FC<ProductsProps> = ({ cart, setCart }) => {\r\n  const [products, setProducts] = useState<Product[]>([]);\r\n  const [loading, setLoading] = useState(false);\r\n  \r\n  // 分類篩選\r\n  const [categoryFilter, setCategoryFilter] = useState(\"全部\");\r\n  \r\n  // 分頁\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const itemsPerPage = 5; // 每頁顯示商品數量\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  // 取得產品資料\r\n  useEffect(() => {\r\n    const fetchProducts = async () => {\r\n      setLoading(true);\r\n      try {\r\n        const res = await axios.get(`${BASE_URL}/v2/api${API_PATH}/products`);\r\n        setProducts(res.data.products);\r\n      } catch (error) {\r\n        alert(\"取得產品失敗\");\r\n        console.error(error);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n    fetchProducts();\r\n  }, []);\r\n\r\n  // 新增至購物車\r\n  const handleAddToCart = async (product: Product) => {\r\n    setLoading(true);\r\n    try {\r\n      await axios.post(`${BASE_URL}/v2/api${API_PATH}/cart`, {\r\n        data: { product_id: product.id, qty: 1 },\r\n      });\r\n      setCart((prev) => {\r\n        const found = prev.find((item) => item.id === product.id);\r\n        if (found) {\r\n          return prev.map((item) =>\r\n            item.id === product.id ? { ...item, quantity: item.quantity + 1 } : item\r\n          );\r\n        }\r\n        return [...prev, { ...product, quantity: 1 }];\r\n      });\r\n      dispatch(showToast(\"已加入購物車\"));\r\n    } catch (error) {\r\n      console.error(error);\r\n      alert(\"加入購物車失敗\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // 從購物車移除\r\n  const handleDeleteFromCart = async (cartItemId: string | number) => {\r\n    setLoading(true);\r\n    try {\r\n      await axios.delete(`${BASE_URL}/v2/api${API_PATH}/cart/${cartItemId}`);\r\n      setCart((prev) => prev.filter((item) => item.id !== cartItemId));\r\n      dispatch(showToast(\"已從購物車移除產品\"));\r\n    } catch (error) {\r\n      console.error(error);\r\n      alert(\"從購物車移除產品失敗\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // 依照 categoryFilter 篩選（預設顯示全部）\r\n  const filteredProducts = categoryFilter === \"全部\"\r\n    ? products\r\n    : products.filter((p) => p.category === categoryFilter);\r\n\r\n  // 分頁計算\r\n  const totalPages = Math.ceil(filteredProducts.length / itemsPerPage);\r\n  const startIndex = (currentPage - 1) * itemsPerPage;\r\n  const endIndex = currentPage * itemsPerPage;\r\n  const pageProducts = filteredProducts.slice(startIndex, endIndex);\r\n\r\n  // 點選切換分類\r\n  const handleCategoryChange = (newCategory: string) => {\r\n    setCategoryFilter(newCategory);\r\n    setCurrentPage(1); // 切換分類時，回到第一頁\r\n  };\r\n\r\n  // 切換頁面\r\n  const handlePrevPage = () => {\r\n    if (currentPage > 1) {\r\n      setCurrentPage((prev) => prev - 1);\r\n    }\r\n  };\r\n  const handleNextPage = () => {\r\n    if (currentPage < totalPages) {\r\n      setCurrentPage((prev) => prev + 1);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {/* <Navbar /> */}\r\n      <Toast />\r\n      <div className=\"container mt-4\">\r\n        {loading && <ReactLoading type=\"spin\" color=\"#000\" className=\"d-block mx-auto\" />}\r\n\r\n        {/* 分類篩選按鈕 */}\r\n        <div className=\"mb-3\">\r\n          <span className=\"me-2\">分類篩選:</span>\r\n          {[\"全部\", \"貓砂\", \"貓砂盆\", \"貓糧\"].map((cat) => (\r\n            <button\r\n              key={cat}\r\n              className={`btn me-2 ${categoryFilter === cat ? \"btn-primary\" : \"btn-outline-primary\"}`}\r\n              onClick={() => handleCategoryChange(cat)}\r\n            >\r\n              {cat}\r\n            </button>\r\n          ))}\r\n        </div>\r\n\r\n        {/* 標題＋查看購物車 */}\r\n        <div className=\"d-flex justify-content-between align-items-center mb-3\">\r\n          <h1 className=\"m-0\">產品列表</h1>\r\n          <Link to=\"/cart\" className=\"btn btn-danger\">\r\n            查看購物車\r\n          </Link>\r\n        </div>\r\n\r\n        {/* 產品列表 (套用分頁後的結果) */}\r\n        <table className=\"table align-middle\">\r\n          <thead>\r\n            <tr>\r\n              <th>圖片</th>\r\n              <th>商品名稱</th>\r\n              <th>價格</th>\r\n              <th></th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {pageProducts.map((product) => (\r\n              <tr key={product.id}>\r\n                <td style={{ width: \"200px\" }}>\r\n                  <img className=\"img-fluid\" src={product.imageUrl} alt={product.title} />\r\n                </td>\r\n                <td>{product.title}</td>\r\n                <td>\r\n                  <del className=\"h6\">原價 {product.origin_price} 元</del>\r\n                  <div className=\"h5\">特價 {product.price} 元</div>\r\n                </td>\r\n                <td>\r\n                  <div className=\"btn-group btn-group-sm\">\r\n                    <Link to={`/products/${product.id}`} className=\"btn btn-outline-secondary\">\r\n                      查看更多\r\n                    </Link>\r\n                    <button\r\n                      onClick={() => handleAddToCart(product)}\r\n                      type=\"button\"\r\n                      className=\"btn btn-outline-danger\"\r\n                    >\r\n                      加到購物車\r\n                    </button>\r\n                  </div>\r\n                </td>\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n        </table>\r\n\r\n        {/* 分頁按鈕 (上一頁 / 下一頁) */}\r\n        <div className=\"d-flex justify-content-center align-items-center mb-5\">\r\n          <button\r\n            className=\"btn btn-secondary me-2\"\r\n            onClick={handlePrevPage}\r\n            disabled={currentPage === 1}\r\n          >\r\n            上一頁\r\n          </button>\r\n          <span>\r\n            第 {currentPage} / {totalPages} 頁\r\n          </span>\r\n          <button\r\n            className=\"btn btn-secondary ms-2\"\r\n            onClick={handleNextPage}\r\n            disabled={currentPage === totalPages || totalPages === 0}\r\n          >\r\n            下一頁\r\n          </button>\r\n        </div>\r\n\r\n        {/* 購物車清單 */}\r\n        {cart.length > 0 && (\r\n          <div className=\"mt-5\">\r\n            <h2>購物車</h2>\r\n            <table className=\"table align-middle\">\r\n              <thead>\r\n                <tr>\r\n                  <th></th>\r\n                  <th>品名</th>\r\n                  <th>數量</th>\r\n                  <th className=\"text-end\">單價</th>\r\n                  <th className=\"text-end\">小計</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {cart.map((item) => (\r\n                  <tr key={item.id}>\r\n                    <td>\r\n                      <button\r\n                        type=\"button\"\r\n                        className=\"btn btn-outline-danger btn-sm\"\r\n                        onClick={() => handleDeleteFromCart(item.id)}\r\n                      >\r\n                        x\r\n                      </button>\r\n                    </td>\r\n                    <td>{item.title}</td>\r\n                    <td>{item.quantity}</td>\r\n                    <td className=\"text-end\">{item.price}</td>\r\n                    <td className=\"text-end\">{item.price * item.quantity}</td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n              <tfoot>\r\n                <tr>\r\n                  <td colSpan={4} className=\"text-end\">\r\n                    總計：\r\n                  </td>\r\n                  <td className=\"text-end\">\r\n                    {cart.reduce((acc, item) => acc + item.price * item.quantity, 0)}\r\n                  </td>\r\n                </tr>\r\n              </tfoot>\r\n            </table>\r\n            <div className=\"text-end\">\r\n              <button\r\n                className=\"btn btn-danger\"\r\n                onClick={() => {\r\n                  setCart([]);\r\n                  dispatch(showToast(\"購物車已清空\"));\r\n                }}\r\n              >\r\n                清空購物車\r\n              </button>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Products;\r\n","import { useEffect, useState } from \"react\";\r\nimport { useParams, useNavigate } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport ReactLoading from \"react-loading\";\r\n// import Navbar from '../components/Navbar';\r\nimport { useDispatch } from \"react-redux\";\r\nimport { showToast } from \"../redux/slices/toastSlice\";\r\nimport { addToCart } from \"../redux/slices/cartSlice\";\r\n\r\nconst BASE_URL = import.meta.env.VITE_BASE_URL;\r\nconst API_PATH = import.meta.env.VITE_API_PATH;\r\n\r\ninterface Product {\r\n  id: number | string;\r\n  title: string;\r\n  imageUrl: string;\r\n  content: string;\r\n  description: string;\r\n  price: number;\r\n  origin_price: number;\r\n}\r\n\r\nconst ProductDetail: React.FC = () => {\r\n  const { id } = useParams<{ id: string }>();\r\n  const navigate = useNavigate();\r\n  const [product, setProduct] = useState<Product | null>(null);\r\n  const [loading, setLoading] = useState(false);\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    const fetchProduct = async () => {\r\n      setLoading(true);\r\n      try {\r\n        const res = await axios.get(`${BASE_URL}/v2/api${API_PATH}/product/${id}`);\r\n        setProduct(res.data.product);\r\n      } catch (error) {\r\n        alert(\"取得產品詳情失敗\");\r\n        console.error(error);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n    fetchProduct();\r\n  }, [id]);\r\n\r\n  const handleAddToCart = async () => {\r\n    if (!product) return;\r\n    setLoading(true);\r\n    try {\r\n      await axios.post(`${BASE_URL}/v2/api${API_PATH}/cart`, {\r\n        data: {\r\n          product_id: product.id,\r\n          qty: 1\r\n        }\r\n      });\r\n\r\n      dispatch(addToCart({\r\n        product: {\r\n          id: product.id,\r\n          title: product.title,\r\n          imageUrl: product.imageUrl,\r\n          price: product.price,\r\n          origin_price: product.origin_price,\r\n        },\r\n        quantity: 1\r\n      }));\r\n      dispatch(showToast(\"已加入購物車\"));\r\n    } catch (error) {\r\n      console.error(\"加入購物車失敗\", error);\r\n      alert(\"加入購物車失敗\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"d-flex justify-content-center align-items-center vh-100\">\r\n        <ReactLoading type=\"spin\" color=\"#000\" />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!product) {\r\n    return <h1 className=\"text-center mt-5\">找不到產品</h1>;\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {/* <Navbar /> */}\r\n      <div className=\"container mt-4\">\r\n        <div className=\"d-flex justify-content-between align-items-center\">\r\n          <h1>產品詳細頁</h1>\r\n          <button\r\n          className=\"btn btn-danger\"\r\n          onClick={handleAddToCart}\r\n        >\r\n          加到購物車\r\n        </button>\r\n        </div>\r\n        <img src={product.imageUrl} alt={product.title} className=\"img-fluid mb-3\" />\r\n        <h2>{product.title}</h2>\r\n        <p>{product.content}</p>\r\n        <p>{product.description}</p>\r\n        <p>\r\n          價格：{product.price} 元 <del>{product.origin_price} 元</del>\r\n        </p>\r\n        <button className=\"btn btn-outline-primary\" onClick={() => navigate(\"/products\")}>\r\n            返回產品列表\r\n          </button>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ProductDetail;\r\n","import { useState } from \"react\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport { Link } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { clearCart, removeFromCart, updateCartItemQuantity } from '../redux/slices/cartSlice';\r\nimport { showToast } from '../redux/slices/toastSlice';\r\nimport { RootState } from '../redux/store';\r\nimport Toast from '../components/Toast';\r\n\r\nconst BASE_URL = import.meta.env.VITE_BASE_URL;\r\nconst API_PATH = import.meta.env.VITE_API_PATH;\r\n\r\ninterface OrderForm {\r\n  email: string;\r\n  name: string;\r\n  tel: string;\r\n  address: string;\r\n  message?: string;\r\n}\r\n\r\n\r\nconst Cart = () => {\r\n  const { register, handleSubmit, formState: { errors } } = useForm<OrderForm>();\r\n  const [loading, setLoading] = useState(false);\r\n  \r\n  const cart = useSelector((state: RootState) => state.cart);\r\n  const dispatch = useDispatch();\r\n\r\n  const totalAmount = cart.reduce((acc, item) => acc + item.price * item.quantity, 0);\r\n\r\n  const onSubmit = async (data: OrderForm) => {\r\n    if (cart.length === 0) {\r\n      dispatch(showToast(\"購物車是空的，無法送出訂單！\"));\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n\r\n    try {\r\n      await axios.post(`${BASE_URL}/v2/api${API_PATH}/order`, {\r\n        data: {\r\n          user: {\r\n            name: data.name,\r\n            email: data.email,\r\n            tel: data.tel,\r\n            address: data.address,\r\n          },\r\n          message: data.message,\r\n          products: cart.map((item) => ({\r\n            product_id: item.id,\r\n            qty: item.quantity,\r\n          })),\r\n        },\r\n      });\r\n\r\n      // dispatch(showToast(\"訂單。送出成功！\"));\r\n      alert(\"訂單送出成功！\");\r\n      dispatch(clearCart());\r\n      window.location.reload();\r\n    } catch (error) {\r\n      console.error(\"訂單送出失敗\", error);\r\n      // dispatch(showToast(\"訂單送出失敗，請稍後再試！\"));\r\n      alert(\"訂單送出失敗，請稍後再試！\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleDeleteItem = async (itemId: string | number) => {\r\n    setLoading(true);\r\n    try {\r\n      await axios.delete(`${BASE_URL}/v2/api${API_PATH}/cart/${itemId}`);\r\n      dispatch(removeFromCart(itemId));\r\n      dispatch(showToast('已從購物車移除商品'));\r\n    } catch (error) {\r\n      console.error('刪除購物車商品失敗', error);\r\n      dispatch(showToast('刪除購物車商品失敗，請稍後再試'));\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleRemoveOne = async (item: { id: string | number; title: string; quantity: number; price: number; }) => {\r\n    setLoading(true);\r\n    try {\r\n      if (item.quantity > 1) {\r\n        const newQty = item.quantity - 1;\r\n        await axios.post(`${BASE_URL}/v2/api${API_PATH}/cart`, {\r\n          data: {\r\n            product_id: item.id,\r\n            qty: newQty\r\n          }\r\n        });\r\n        dispatch(updateCartItemQuantity({ id: item.id, quantity: newQty }));\r\n        dispatch(showToast(`已減少 1 個 ${item.title}`));\r\n      } else {\r\n        // If only 1 left, remove the item entirely\r\n        await axios.delete(`${BASE_URL}/v2/api${API_PATH}/cart/${item.id}`);\r\n        dispatch(removeFromCart(item.id));\r\n        dispatch(showToast(`已從購物車移除 ${item.title}`));\r\n      }\r\n    } catch (error) {\r\n      console.error('更新購物車失敗', error);\r\n      dispatch(showToast('更新購物車失敗，請稍後再試'));\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleAddOne = async (item: { id: string | number; title: string; quantity: number; price: number; }) => {\r\n    setLoading(true);\r\n    try {\r\n      const newQty = item.quantity + 1;\r\n      await axios.post(`${BASE_URL}/v2/api${API_PATH}/cart`, {\r\n        data: {\r\n          product_id: item.id,\r\n          qty: newQty\r\n        }\r\n      });\r\n      dispatch(updateCartItemQuantity({ id: item.id, quantity: newQty }));\r\n      dispatch(showToast(`已增加 1 個 ${item.title}`));\r\n    } catch (error) {\r\n      console.error('更新購物車失敗', error);\r\n      dispatch(showToast('更新購物車失敗，請稍後再試'));\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Toast />\r\n      <div className=\"container mt-4\">\r\n        <div className=\"d-flex justify-content-between align-items-center\">\r\n          <h1 className=\"text-orange fw-bold\">購物車</h1>\r\n          <Link to=\"/products\" className=\"btn btn-outline-primary mt-3\">\r\n            返回產品列表\r\n          </Link>\r\n        </div>\r\n        {cart.length === 0 ? (\r\n          <div className=\"text-center mt-5\">\r\n            <div className=\"text-danger col-12\">\r\n            <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"#000000\" width=\"80px\" height=\"80px\" viewBox=\"0 0 22 22\" id=\"memory-cart\"><path d=\"M19 14V16H6V15H5V11H4V8H3V3H1V1H5V4H21V8H20V11H19V12H7V14H19M5 7H6V10H18V7H19V6H5V7M7 17H9V18H10V20H9V21H7V20H6V18H7V17M15 17H17V18H18V20H17V21H15V20H14V18H15V17Z\" /></svg>\r\n            </div>\r\n            <h2 className=\"text-muted mt-3\">您的購物車是空的</h2>\r\n            <p className=\"text-muted\">趕快去選購您喜愛的商品吧！</p>\r\n            <Link to=\"/products\" className=\"btn btn-primary mt-3\">\r\n              返回產品列表\r\n            </Link>\r\n          </div>\r\n        ) : (\r\n          <>\r\n            <table className=\"table\">\r\n              <thead>\r\n                <tr>\r\n                  <th>品名</th>\r\n                  <th>數量</th>\r\n                  <th>單價</th>\r\n                  <th>總價</th>\r\n                  <th>操作</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {cart.map((item) => (\r\n                  <tr key={item.id}>\r\n                    <td>{item.title}</td>\r\n                    <td>\r\n                      <button \r\n                        className=\"btn btn-outline-secondary btn-sm me-2\"\r\n                        onClick={() => handleRemoveOne(item)}\r\n                      >\r\n                        -\r\n                      </button>\r\n                      {item.quantity}\r\n                      <button\r\n                        className=\"btn btn-outline-secondary btn-sm ms-2\"\r\n                        onClick={() => handleAddOne(item)}\r\n                      >\r\n                        +\r\n                      </button>\r\n                    </td>\r\n                    <td>{item.price} 元</td>\r\n                    <td>{item.price * item.quantity} 元</td>\r\n                    <td>\r\n                      <button \r\n                        className=\"btn btn-outline-danger btn-sm\"\r\n                        onClick={() => handleDeleteItem(item.id)}\r\n                      >\r\n                        移除\r\n                      </button>\r\n                    </td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n              <tfoot>\r\n                <tr>\r\n                  <td colSpan={3} className=\"text-end fw-bold\">總計：</td>\r\n                  <td className=\"fw-bold\">{totalAmount} 元</td>\r\n                </tr>\r\n              </tfoot>\r\n            </table>\r\n\r\n            <div className=\"my-5 row justify-content-center\">\r\n              <form className=\"col-md-6\" onSubmit={handleSubmit(onSubmit)}>\r\n                <div className=\"mb-3\">\r\n                  <label htmlFor=\"email\" className=\"form-label\">Email</label>\r\n                  <input\r\n                    id=\"email\"\r\n                    type=\"email\"\r\n                    className=\"form-control\"\r\n                    placeholder=\"請輸入 Email\"\r\n                    {...register(\"email\", { required: \"必填\" })}\r\n                  />\r\n                  <p className=\"text-danger my-2\">{errors.email?.message}</p>\r\n                </div>\r\n\r\n                <div className=\"mb-3\">\r\n                  <label htmlFor=\"name\" className=\"form-label\">收件人姓名</label>\r\n                  <input\r\n                    id=\"name\"\r\n                    className=\"form-control\"\r\n                    placeholder=\"請輸入姓名\"\r\n                    {...register(\"name\", { required: \"必填\" })}\r\n                  />\r\n                  <p className=\"text-danger my-2\">{errors.name?.message}</p>\r\n                </div>\r\n\r\n                <div className=\"mb-3\">\r\n                  <label htmlFor=\"tel\" className=\"form-label\">收件人電話</label>\r\n                  <input\r\n                    id=\"tel\"\r\n                    type=\"text\"\r\n                    className=\"form-control\"\r\n                    placeholder=\"請輸入電話\"\r\n                    {...register(\"tel\", { required: \"必填\",      \r\n                      pattern: {\r\n                      value: /^(0[2-8]\\d{7}|09\\d{8})$/,\r\n                      message: '請輸入正確的電話格式'\r\n                    } })}\r\n                  />\r\n                  <p className=\"text-danger my-2\">{errors.tel?.message}</p>\r\n                </div>\r\n\r\n                <div className=\"mb-3\">\r\n                  <label htmlFor=\"address\" className=\"form-label\">收件人地址</label>\r\n                  <input\r\n                    id=\"address\"\r\n                    type=\"text\"\r\n                    className=\"form-control\"\r\n                    placeholder=\"請輸入地址\"\r\n                    {...register(\"address\", { required: \"必填\" })}\r\n                  />\r\n                  <p className=\"text-danger my-2\">{errors.address?.message}</p>\r\n                </div>\r\n\r\n                <div className=\"mb-3\">\r\n                  <label htmlFor=\"message\" className=\"form-label\">留言</label>\r\n                  <textarea\r\n                    id=\"message\"\r\n                    className=\"form-control\"\r\n                    cols={30}\r\n                    rows={3}\r\n                    {...register(\"message\")}\r\n                  ></textarea>\r\n                </div>\r\n\r\n                <div className=\"text-center\">\r\n                  <button type=\"submit\" className=\"btn btn-danger\" disabled={loading}>\r\n                    {loading ? \"送出中...\" : \"送出訂單\"}\r\n                  </button>\r\n                  <button\r\n                    type=\"button\"\r\n                    className=\"btn btn-outline-secondary ms-2\"\r\n                    onClick={() => {\r\n                      dispatch(clearCart());\r\n                      window.location.reload();\r\n                    }}\r\n                  >\r\n                    清空購物車\r\n                  </button>\r\n                </div>\r\n              </form>\r\n            </div>\r\n          </>\r\n        )}\r\n\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Cart;\r\n","import { useEffect, useState } from 'react';\r\nimport axios, { AxiosResponse } from 'axios';\r\nimport 'bootstrap/dist/css/bootstrap.min.css'; // 引入 bootstrap\r\n// import '@/styles/all.scss'; // 引入自訂的 scss 檔案\r\nimport Login from '../components/Login/Login';\r\nimport Product from '../components/Product/Product';\r\n// import Navbar from '../components/Navbar';\r\nimport Toast from '../components/Toast';\r\nimport { Link } from 'react-router-dom';\r\n\r\n// 添加全局配置\r\naxios.defaults.withCredentials = true;\r\n\r\nfunction Admin() {\r\n  //定義 API 網址和路徑\r\n  const BASE_URL = import.meta.env.VITE_BASE_URL; // 從 .env 取得 API 網址\r\n  // const API_PATH = import.meta.env.VITE_API_PATH; // 從 .env 取得 API 路徑\r\n\r\n  const [isAuth, setIsAuth] = useState(false); // 是否登入\r\n  // const [account, setAccount] = useState({\r\n  //   username: '',\r\n  //   password: ''\r\n  // })\r\n\r\n  useEffect(() => {\r\n    const checkUserLogin = async () => {\r\n      try {\r\n        await axios.post(`${BASE_URL}/v2/api/user/check`);\r\n        // alert(\"使用者已登入\");\r\n        // getProducts();\r\n        setIsAuth(true);\r\n      } catch (error) {\r\n        console.error(error);\r\n        setIsAuth(false);\r\n      }\r\n    };\r\n    const token = document.cookie.replace(\r\n      /(?:(?:^|.*;\\s*)hexToken\\s*=\\s*([^;]*).*$)|^.*$/,\r\n      \"$1\",\r\n    );\r\n    axios.defaults.headers.common['Authorization'] = token;\r\n    checkUserLogin();\r\n  }, [BASE_URL]);\r\n\r\n  // 登入\r\n  const handleLogin = (username: string, password: string) => {\r\n    // console.log({ username, password })\r\n    // Update to use the BASE_URL constant\r\n    axios.post(`${BASE_URL}/v2/admin/signin`, { username, password })\r\n      .then((res: AxiosResponse) => {\r\n        const { token, expired } = res.data; //解構賦值\r\n        // console.log(token, expired) // 顯示 token 和 expired\r\n        // 添加 SameSite 和 Secure 屬性\r\n        // 設定 cookie\r\n        document.cookie = `hexToken=${token}; expires=${new Date(expired)}; path=/; SameSite=None; Secure`;\r\n        axios.defaults.headers.common['Authorization'] = token;\r\n\r\n        if (res.data.success === true) {\r\n          alert('登入成功');\r\n          // window.location.href = '/';\r\n          // getProducts(); // 取得產品列表\r\n          setIsAuth(true);// 登入成功\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        console.error(error);\r\n        alert('登入失敗');\r\n        setIsAuth(false);// 登入失敗\r\n\r\n      });\r\n  }\r\n  return (\r\n    <>\r\n      {/* <Navbar \r\n      isAuth={isAuth} \r\n      onLogout={() => setIsAuth(false)} \r\n    /> */}\r\n      <Toast />\r\n      {isAuth ? (\r\n        <>\r\n          {/* 已登入狀態下，顯示「前往優惠券管理」連結 */}\r\n          <div className=\"container my-3\">\r\n            <Link to=\"/admin/coupon\" className=\"btn btn-outline-primary me-2\">\r\n              優惠券管理\r\n            </Link>\r\n            {/* 前往後台訂單管理 */}\r\n            <Link to=\"/admin/order\" className=\"btn btn-outline-primary me-2\">\r\n              訂單管理\r\n            </Link>\r\n          </div>\r\n\r\n          {/* 已登入則顯示產品管理頁 (Product) */}\r\n          <Product\r\n            isAuth={isAuth}\r\n            token={axios.defaults.headers.common['Authorization'] as string}\r\n          />\r\n        </>\r\n      ) : (\r\n        // 尚未登入就顯示登入畫面\r\n        <Login handleLogin={handleLogin} />\r\n      )}\r\n    </>\r\n  )\r\n}\r\n\r\nexport default Admin;\r\n","import { useEffect } from \"react\";\r\n\r\nfunction About() {\r\n\r\n  useEffect(() => {\r\n    // 選取所有要做淡入效果的元素\r\n    const sections = document.querySelectorAll(\".fade-in-section\");\r\n\r\n    // 建立 IntersectionObserver\r\n    const observer = new IntersectionObserver(\r\n      (entries) => {\r\n        entries.forEach((entry) => {\r\n          if (entry.isIntersecting) {\r\n            // 進入視窗：加上 show，觸發淡入\r\n            entry.target.classList.add(\"show\");\r\n          } else {\r\n            // 離開視窗：移除 show，讓動畫可以再次播放\r\n            entry.target.classList.remove(\"show\");\r\n          }\r\n        });\r\n      },\r\n      {\r\n        threshold: 0.2, // 元素有 20% 進入視窗範圍就觸發\r\n      }\r\n    );\r\n\r\n    // 讓每個目標元素都被監聽\r\n    sections.forEach((section) => observer.observe(section));\r\n\r\n    // 組件卸載時，停止觀察\r\n    return () => {\r\n      sections.forEach((section) => observer.unobserve(section));\r\n    };\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"container my-5\">\r\n      <h1 className=\"mb-4 fw-bold text-center text-orange\">關於我們</h1>\r\n\r\n      {/* 品牌故事 (含圖片) */}\r\n      <section className=\"row align-items-center mb-5 fade-in-section\">\r\n        <div className=\"col-md-4 mb-3 mb-md-0\">\r\n          <img\r\n            src=\"https://storage.googleapis.com/vue-course-api.appspot.com/product-backend/1742746264593.jpg\"\r\n            alt=\"Brand Story\"\r\n            className=\"img-fluid rounded shadow\"\r\n            style={{ height: \"auto\" }}\r\n          />\r\n        </div>\r\n        <div className=\"col-md-6\">\r\n          <h2 className=\"fs-4 mb-3 fw-bold text-orange\">品牌故事</h2>\r\n          <p>\r\n            Cat's Store 由一群熱愛貓咪、並相信「貓咪就是家人」理念的夥伴所創立。最初，我們在一間小小的工作室裡，從客製化貓咪玩具開始，秉持著「給毛孩子更好生活」的初衷，一步步擴展至目前提供全方位貓咪用品的平台。\r\n          </p>\r\n          <p>\r\n            經過不斷摸索與學習，我們深深瞭解到，只有用心投入並關注每個細節，才能帶給貓咪與飼主最舒適安心的體驗。\r\n          </p>\r\n        </div>\r\n      </section>\r\n\r\n      {/* 我們的使命 (卡片式呈現) */}\r\n      <section className=\"mb-5 fade-in-section\">\r\n        <h2 className=\"fs-4 mb-3 fw-bold text-orange\">我們的使命</h2>\r\n        <div className=\"card shadow-sm border-0\">\r\n          <div className=\"card-body\">\r\n            <p className=\"card-text\">\r\n              在 Cat's Store，我們始終堅持提供高品質、符合貓咪生理與心理需求的商品。我們與多家優質品牌與飼育專家合作，積極研發符合國際安全標準的貓咪糧食、玩具及周邊商品，只為了確保每一位貓奴都能在這裡找到最適合自家寶貝的產品。\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </section>\r\n\r\n      {/* 核心價值 (Icon + 文字) */}\r\n      <section className=\"mb-5 fade-in-section\">\r\n        <h2 className=\"fs-4 mb-4 fw-bold text-orange\">核心價值</h2>\r\n        <div className=\"row text-center g-4\">\r\n          <div className=\"col-md-3\">\r\n            <div className=\"bg-light rounded p-4 shadow-sm h-100\">\r\n              <i className=\"bi bi-shield-check fs-1 mb-3\"></i>\r\n              <h5 className=\"mb-2\">專業</h5>\r\n              <p className=\"text-muted\">\r\n                透過飼養經驗、專業課程與不斷學習，提供最完整的養貓知識與服務。\r\n              </p>\r\n            </div>\r\n          </div>\r\n          <div className=\"col-md-3\">\r\n            <div className=\"bg-light rounded p-4 shadow-sm h-100\">\r\n              <i className=\"bi bi-heart fs-1 mb-3\"></i>\r\n              <h5 className=\"mb-2 fw-bold\">關懷</h5>\r\n              <p className=\"text-muted\">\r\n                將貓咪視為家人，重視牠們的健康、快樂與舒適，並持續投入產品研發與改良。\r\n              </p>\r\n            </div>\r\n          </div>\r\n          <div className=\"col-md-3\">\r\n            <div className=\"bg-light rounded p-4 shadow-sm h-100\">\r\n              <i className=\"bi bi-star fs-1 mb-3\"></i>\r\n              <h5 className=\"mb-2 fw-bold\">可靠</h5>\r\n              <p className=\"text-muted\">\r\n                所有商品皆經過嚴謹篩選與測試，給消費者最安心的購物體驗。\r\n              </p>\r\n            </div>\r\n          </div>\r\n          <div className=\"col-md-3\">\r\n            <div className=\"bg-light rounded p-4 shadow-sm h-100\">\r\n              <i className=\"bi bi-lightbulb fs-1 mb-3\"></i>\r\n              <h5 className=\"mb-2 fw-bold\">創新</h5>\r\n              <p className=\"text-muted\">\r\n                與貓咪行為學家、設計師合作，不斷推出更好、更有趣的產品，讓貓咪和飼主都能感到驚喜。\r\n              </p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </section>\r\n\r\n      {/* 社群與公益 */}\r\n      <section className=\"row align-items-center mb-5 fade-in-section\">\r\n        <div className=\"col-md-6 order-md-2 mb-3 mb-md-0\">\r\n          <img\r\n            src=\"https://storage.googleapis.com/vue-course-api.appspot.com/product-backend/1742746560094.jpg\"\r\n            alt=\"Community and Charity\"\r\n            className=\"img-fluid rounded shadow\"\r\n          />\r\n        </div>\r\n        <div className=\"col-md-6 order-md-1\">\r\n          <h2 className=\"fs-4 mb-3 fw-bold text-orange\">社群與公益</h2>\r\n          <p>\r\n            我們深知仍有許多流浪貓需要關懷與幫助，因此 Cat's Store\r\n            會將部分收益捐贈給動物救援機構，以助力於浪浪救援、醫療與中途照顧。同時我們也定期舉辦線上線下活動，邀請愛貓人士一起分享養貓經驗。\r\n          </p>\r\n          <p>\r\n            推廣正確的飼養觀念，期望有一天，所有的貓咪都能得到應有的照顧與愛。\r\n          </p>\r\n        </div>\r\n      </section>\r\n\r\n      {/* 展望未來 */}\r\n      <section className=\"mb-5 fade-in-section\">\r\n        <h2 className=\"fs-4 mb-3 fw-bold text-orange\">展望未來</h2>\r\n        <p>\r\n          Cat's Store 不僅是購買貓咪用品的商店，更是所有貓奴們共享熱情、快樂與知識的交流空間。我們會持續開發與引進新穎、優質的貓咪商品，並且提供更多專業文章與活動，讓每一位貓奴都能與自家毛孩子一起擁有更美好、更健康的生活。\r\n        </p>\r\n      </section>\r\n\r\n      <div className=\"bg-light p-4 rounded shadow text-center fade-in-section\">\r\n        <p className=\"text-secondary mb-0 fw-bold\">\r\n          <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"40\" height=\"40\" viewBox=\"0 0 512 512\"><path fill=\"currentColor\" d=\"M363.656 30.03c-41.495.564-83.634 22.155-110.844 69.282c-41.912-117.77-236.492-76.29-232 64.5c4.682 146.597 214.483 232.04 237.063 316.313c20.666-77.113 240.752-175.82 236.344-316.313c-2.65-84.358-65.832-134.66-130.564-133.78zm-154.03 58.657c15.38 22.305 27.868 49.554 4.093 51.438c-23.2 1.84-14.18-28.684-4.095-51.438zm97.186 0c10.087 22.754 19.136 53.28-4.062 51.438c-23.776-1.884-11.318-29.133 4.063-51.438zm79.282 56.938c3.65 24.62 4.21 56.43-17.656 48.47c-22.412-8.164-3.117-31.078 17.656-48.47m-264.031 5.594c22.394 15.26 43.843 36.17 22.343 46.5c-20.976 10.074-23.553-21.644-22.344-46.5zm99.28.624c12.818.15 24.67 14.076 27.157 32.625c2.652 19.784-6.356 37.34-20.125 39.186s-27.098-12.715-29.75-32.5s6.388-37.31 20.156-39.156a18 18 0 0 1 2.564-.156zm73.782 0c.854-.01 1.702.04 2.563.156c13.768 1.846 22.776 19.37 20.125 39.156c-2.652 19.785-15.95 34.346-29.72 32.5c-13.768-1.845-22.776-19.402-20.124-39.187c2.485-18.55 14.338-32.477 27.155-32.626zM161.5 206.72c12.172-.038 25.272 10.956 31.47 27.56c7.343 19.68 2.194 39.797-11.5 44.907c-13.697 5.11-30.75-6.695-38.095-26.375s-2.195-39.795 11.5-44.906a19 19 0 0 1 6.625-1.187zm191.406.53q2.694-.075 5.344.625c14.132 3.737 21.246 23.224 15.875 43.53c-5.37 20.31-21.18 33.74-35.313 30c-14.132-3.736-21.245-23.223-15.875-43.53c4.7-17.77 17.402-30.28 29.97-30.625zm-94.75 28.344c18.32 0 33.624 19.908 37.563 46.594c.605.163 1.204.323 1.81.5c34.163 9.926 57.242 36.7 51.533 59.812c-5.71 23.11-38.027 33.802-72.188 23.875c-6.65-1.933-12.884-4.504-18.563-7.563a95 95 0 0 1-18.53 7.563c-34.162 9.927-66.478-.764-72.188-23.875c-5.71-23.11 17.338-49.886 51.5-59.813c.482-.14.956-.274 1.437-.406c3.917-26.732 19.285-46.686 37.626-46.686z\" /></svg>\r\n          <span className=\"mx-2\">\r\n            感謝你選擇並信任 Cat's Store，我們期待與你和你的毛孩子攜手共度每一個溫暖動人的日常時刻。\r\n          </span>\r\n        </p>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default About;","import React from 'react';\r\n\r\ninterface Coupon {\r\n\tid?: string | number;\r\n\ttitle: string;\r\n\tis_enabled: number;\r\n\tpercent: number;\r\n\tdue_date: number;\r\n\tcode: string;\r\n}\r\n\r\ninterface CouponModalProps {\r\n\tmodalRef: React.RefObject<HTMLDivElement>;\r\n\tmodalMode: 'create' | 'edit';\r\n\ttempCoupon: Coupon;\r\n\tsetTempCoupon: React.Dispatch<React.SetStateAction<Coupon>>;\r\n\tonSaveCoupon: () => void;\r\n\tonCloseModal: () => void;\r\n}\r\n\r\nconst CouponModal: React.FC<CouponModalProps> = ({\r\n\tmodalRef,\r\n\tmodalMode,\r\n\ttempCoupon,\r\n\tsetTempCoupon,\r\n\tonSaveCoupon,\r\n\tonCloseModal\r\n}) => {\r\n\r\n\t// 處理表單輸入\r\n\tconst handleInputChange = (\r\n\t\te: React.ChangeEvent<HTMLInputElement | HTMLSelectElement>\r\n\t) => {\r\n\t\tconst { name, value } = e.target;\r\n\t\t// 針對 is_enabled 做特殊轉型 (string -> number)\r\n\t\tif (name === 'is_enabled') {\r\n\t\t\tsetTempCoupon((prev) => ({ ...prev, [name]: Number(value) }));\r\n\t\t} else if (name === 'percent') {\r\n\t\t\tsetTempCoupon((prev) => ({ ...prev, [name]: Number(value) }));\r\n\t\t} else if (name === 'due_date') {\r\n\t\t\tsetTempCoupon((prev) => ({ ...prev, [name]: Number(value) }));\r\n\t\t} else {\r\n\t\t\tsetTempCoupon((prev) => ({ ...prev, [name]: value }));\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div\r\n\t\t\tclassName=\"modal fade\"\r\n\t\t\tref={modalRef}\r\n\t\t\ttabIndex={-1}\r\n\t\t\taria-labelledby=\"couponModalLabel\"\r\n\t\t\taria-hidden=\"true\"\r\n\t\t>\r\n\t\t\t<div className=\"modal-dialog\">\r\n\t\t\t\t<div className=\"modal-content\">\r\n\t\t\t\t\t<div className=\"modal-header\">\r\n\t\t\t\t\t\t<h5 className=\"modal-title\" id=\"couponModalLabel\">\r\n\t\t\t\t\t\t\t{modalMode === 'create' ? '新增優惠券' : '編輯優惠券'}\r\n\t\t\t\t\t\t</h5>\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t\t\tclassName=\"btn-close\"\r\n\t\t\t\t\t\t\taria-label=\"Close\"\r\n\t\t\t\t\t\t\tonClick={onCloseModal}\r\n\t\t\t\t\t\t></button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"modal-body\">\r\n\t\t\t\t\t\t<div className=\"mb-3\">\r\n\t\t\t\t\t\t\t<label htmlFor=\"title\" className=\"form-label\">\r\n\t\t\t\t\t\t\t\t優惠券名稱\r\n\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\tid=\"title\"\r\n\t\t\t\t\t\t\t\tname=\"title\"\r\n\t\t\t\t\t\t\t\tclassName=\"form-control\"\r\n\t\t\t\t\t\t\t\tvalue={tempCoupon.title}\r\n\t\t\t\t\t\t\t\tonChange={handleInputChange}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"mb-3\">\r\n\t\t\t\t\t\t\t<label htmlFor=\"code\" className=\"form-label\">\r\n\t\t\t\t\t\t\t\t優惠碼\r\n\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\tid=\"code\"\r\n\t\t\t\t\t\t\t\tname=\"code\"\r\n\t\t\t\t\t\t\t\tclassName=\"form-control\"\r\n\t\t\t\t\t\t\t\tvalue={tempCoupon.code}\r\n\t\t\t\t\t\t\t\tonChange={handleInputChange}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"mb-3\">\r\n\t\t\t\t\t\t\t<label htmlFor=\"percent\" className=\"form-label\">\r\n\t\t\t\t\t\t\t\t折扣（%）\r\n\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\ttype=\"number\"\r\n\t\t\t\t\t\t\t\tid=\"percent\"\r\n\t\t\t\t\t\t\t\tname=\"percent\"\r\n\t\t\t\t\t\t\t\tclassName=\"form-control\"\r\n\t\t\t\t\t\t\t\tvalue={tempCoupon.percent}\r\n\t\t\t\t\t\t\t\tonChange={handleInputChange}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"mb-3\">\r\n\t\t\t\t\t\t\t<label htmlFor=\"due_date\" className=\"form-label\">\r\n\t\t\t\t\t\t\t\t到期日 (UNIX Timestamp)\r\n\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\ttype=\"number\"\r\n\t\t\t\t\t\t\t\tid=\"due_date\"\r\n\t\t\t\t\t\t\t\tname=\"due_date\"\r\n\t\t\t\t\t\t\t\tclassName=\"form-control\"\r\n\t\t\t\t\t\t\t\tvalue={tempCoupon.due_date}\r\n\t\t\t\t\t\t\t\tonChange={handleInputChange}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<small className=\"text-muted\">\r\n\t\t\t\t\t\t\t\t例如 1691779200 (2023/08/12) ，可透過線上 Epoch Converter 查看\r\n\t\t\t\t\t\t\t</small>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"mb-3\">\r\n\t\t\t\t\t\t\t<label htmlFor=\"is_enabled\" className=\"form-label\">\r\n\t\t\t\t\t\t\t\t是否啟用\r\n\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t<select\r\n\t\t\t\t\t\t\t\tid=\"is_enabled\"\r\n\t\t\t\t\t\t\t\tname=\"is_enabled\"\r\n\t\t\t\t\t\t\t\tclassName=\"form-select\"\r\n\t\t\t\t\t\t\t\tvalue={tempCoupon.is_enabled}\r\n\t\t\t\t\t\t\t\tonChange={handleInputChange}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<option value={0}>未啟用</option>\r\n\t\t\t\t\t\t\t\t<option value={1}>啟用</option>\r\n\t\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"modal-footer\">\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t\t\tclassName=\"btn btn-secondary\"\r\n\t\t\t\t\t\t\tonClick={onCloseModal}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t取消\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t\t\tclassName=\"btn btn-primary\"\r\n\t\t\t\t\t\t\tonClick={onSaveCoupon}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t確定\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default CouponModal;\r\n","import React from 'react';\r\n\r\ninterface Coupon {\r\n\tid?: string | number;\r\n\ttitle: string;\r\n\tis_enabled: number;\r\n\tpercent: number;\r\n\tdue_date: number;\r\n\tcode: string;\r\n}\r\n\r\ninterface DeleteCouponModalProps {\r\n\tmodalRef: React.RefObject<HTMLDivElement>;\r\n\ttempCoupon: Coupon;\r\n\tonCloseModal: () => void;\r\n\tonDeleteCoupon: () => void;\r\n}\r\n\r\nconst DeleteCouponModal: React.FC<DeleteCouponModalProps> = ({\r\n\tmodalRef,\r\n\ttempCoupon,\r\n\tonCloseModal,\r\n\tonDeleteCoupon\r\n}) => {\r\n\treturn (\r\n\t\t<div\r\n\t\t\tclassName=\"modal fade\"\r\n\t\t\tref={modalRef}\r\n\t\t\ttabIndex={-1}\r\n\t\t\taria-labelledby=\"deleteCouponModalLabel\"\r\n\t\t\taria-hidden=\"true\"\r\n\t\t>\r\n\t\t\t<div className=\"modal-dialog\">\r\n\t\t\t\t<div className=\"modal-content\">\r\n\t\t\t\t\t<div className=\"modal-header\">\r\n\t\t\t\t\t\t<h5 className=\"modal-title\" id=\"deleteCouponModalLabel\">\r\n\t\t\t\t\t\t\t刪除優惠券\r\n\t\t\t\t\t\t</h5>\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t\t\tclassName=\"btn-close\"\r\n\t\t\t\t\t\t\tonClick={onCloseModal}\r\n\t\t\t\t\t\t\taria-label=\"Close\"\r\n\t\t\t\t\t\t></button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"modal-body\">\r\n\t\t\t\t\t\t確定要刪除「{tempCoupon.title}」嗎？\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"modal-footer\">\r\n\t\t\t\t\t\t<button type=\"button\" className=\"btn btn-secondary\" onClick={onCloseModal}>\r\n\t\t\t\t\t\t\t取消\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t<button type=\"button\" className=\"btn btn-danger\" onClick={onDeleteCoupon}>\r\n\t\t\t\t\t\t\t確定刪除\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default DeleteCouponModal;\r\n","import React from \"react\";\r\n\r\ninterface PageInfo {\r\n  total_pages: number;\r\n  current_page: number;\r\n  has_pre?: boolean;\r\n  has_next?: boolean;\r\n}\r\n\r\ninterface PaginationProps {\r\n  pageInfo: PageInfo;\r\n  handlePageChange: (page: number) => void;\r\n}\r\n\r\nconst Pagination: React.FC<PaginationProps> = ({ pageInfo, handlePageChange }) => {\r\n  const { total_pages, current_page, has_pre, has_next } = pageInfo;\r\n\r\n  return (\r\n    <nav>\r\n      <ul className=\"pagination\">\r\n        {/* 上一頁 */}\r\n        <li className={`page-item ${!has_pre ? \"disabled\" : \"\"}`}>\r\n          <button\r\n            onClick={() => has_pre && handlePageChange(current_page - 1)}\r\n            className=\"page-link\"\r\n            disabled={!has_pre}\r\n          >\r\n            上一頁\r\n          </button>\r\n        </li>\r\n\r\n        {/* 頁碼 */}\r\n        {Array.from({ length: total_pages }, (_, index) => (\r\n          <li key={index} className={`page-item ${current_page === index + 1 ? \"active\" : \"\"}`}>\r\n            <button\r\n              onClick={() => handlePageChange(index + 1)}\r\n              className=\"page-link\"\r\n            >\r\n              {index + 1}\r\n            </button>\r\n          </li>\r\n        ))}\r\n\r\n        {/* 下一頁 */}\r\n        <li className={`page-item ${!has_next ? \"disabled\" : \"\"}`}>\r\n          <button\r\n            onClick={() => has_next && handlePageChange(current_page + 1)}\r\n            className=\"page-link\"\r\n            disabled={!has_next}\r\n          >\r\n            下一頁\r\n          </button>\r\n        </li>\r\n      </ul>\r\n    </nav>\r\n  );\r\n};\r\n\r\nexport default Pagination;\r\n","import React, { useCallback, useEffect, useRef, useState } from 'react';\r\nimport axios from 'axios';\r\nimport { Modal } from 'bootstrap';\r\nimport { useDispatch } from 'react-redux';\r\nimport { showToast } from '../../redux/slices/toastSlice';\r\nimport { Link } from 'react-router-dom';\r\n\r\n// 既有的共用元件\r\nimport CouponModal from './CouponModal';\r\nimport DeleteCouponModal from './DeleteCouponModal';\r\nimport Pagination from './Pagination';\r\n\r\n// 環境變數 (若不同，可自行調整)\r\nconst BASE_URL = import.meta.env.VITE_BASE_URL;\r\nconst API_PATH = 'product-backend'; // 假設是 /v2/api/product-backend/...\r\n\r\n// 定義 Coupon 介面\r\ninterface Coupon {\r\n\tid?: string | number;\r\n\ttitle: string;\r\n\tis_enabled: number;  // 1=啟用, 0=未啟用\r\n\tpercent: number;\r\n\tdue_date: number;    // UNIX 時間戳\r\n\tcode: string;\r\n}\r\n\r\n// 分頁資訊介面\r\ninterface PageInfo {\r\n\ttotal_pages: number;\r\n\tcurrent_page: number;\r\n\thas_pre?: boolean;\r\n\thas_next?: boolean;\r\n}\r\n\r\ninterface CouponProps {\r\n\ttoken?: string;    // 傳入的後端 token\r\n}\r\n\r\n// const CouponPage: React.FC<CouponProps> = ({ isAuth, token }) => {\r\nconst CouponPage: React.FC<CouponProps> = ({ token }) => {\r\n\tconst dispatch = useDispatch();\r\n\r\n\t// 優惠券列表\r\n\tconst [couponList, setCouponList] = useState<Coupon[]>([]);\r\n\r\n\t// 分頁資訊\r\n\tconst [pageInfo, setPageInfo] = useState<PageInfo>({\r\n\t\ttotal_pages: 0,\r\n\t\tcurrent_page: 1\r\n\t});\r\n\r\n\t// Modal 狀態\r\n\tconst [modalMode, setModalMode] = useState<'create' | 'edit'>('create');\r\n\t// 用於存放單筆 Coupon 資料\r\n\tconst defaultCoupon: Coupon = {\r\n\t\tid: '',\r\n\t\ttitle: '',\r\n\t\tis_enabled: 0,\r\n\t\tpercent: 0,\r\n\t\tdue_date: 0,\r\n\t\tcode: ''\r\n\t};\r\n\tconst [tempCoupon, setTempCoupon] = useState<Coupon>(defaultCoupon);\r\n\r\n\t// Modal 參考 (Bootstrap)\r\n\tconst couponModalRef = useRef<HTMLDivElement>(null);\r\n\tconst delCouponModalRef = useRef<HTMLDivElement>(null);\r\n\r\n\t// 通用 headers\r\n\tuseEffect(() => {\r\n\t\tif (token) {\r\n\t\t\taxios.defaults.headers.common['Authorization'] = token;\r\n\t\t}\r\n\t}, [token]);\r\n\r\n\t/* ---------------- 取得優惠券列表 (含分頁) ---------------- */\r\n\tconst getCoupons = useCallback(\r\n\t\tasync (page = 1) => {\r\n\t\t\ttry {\r\n\t\t\t\t// GET /v2/api/product-backend/admin/coupons?page=${page}\r\n\t\t\t\tconst res = await axios.get(\r\n\t\t\t\t\t`${BASE_URL}/v2/api/${API_PATH}/admin/coupons?page=${page}`\r\n\t\t\t\t);\r\n\t\t\t\t// 取得成功後，更新列表與分頁資訊\r\n\t\t\t\tsetCouponList(res.data.coupons);\r\n\t\t\t\tsetPageInfo(res.data.pagination);\r\n\t\t\t\tdispatch(showToast('取得優惠券列表成功'));\r\n\t\t\t} catch (error) {\r\n\t\t\t\tconsole.error(error);\r\n\t\t\t\talert('取得優惠券失敗');\r\n\t\t\t}\r\n\t\t},\r\n\t\t[dispatch]\r\n\t);\r\n\r\n\t// 首次載入 / 分頁切換時呼叫\r\n\tuseEffect(() => {\r\n\t\tgetCoupons(1);\r\n\t}, [getCoupons]);\r\n\r\n\t/* ---------------- Bootstrap Modal 初始化 ---------------- */\r\n\tuseEffect(() => {\r\n\t\t// 只在首次渲染後做 Modal 初始化\r\n\t\tnew Modal(couponModalRef.current!);\r\n\t\tnew Modal(delCouponModalRef.current!);\r\n\t}, []);\r\n\r\n\t/* ---------------- 開啟 / 關閉 Modal ---------------- */\r\n\tconst openCouponModal = (mode: 'create' | 'edit', coupon?: Coupon) => {\r\n\t\tsetModalMode(mode);\r\n\t\tif (coupon) {\r\n\t\t\t// 編輯模式：帶入既有資料\r\n\t\t\tsetTempCoupon({ ...coupon });\r\n\t\t} else {\r\n\t\t\t// 新增模式：清空\r\n\t\t\tsetTempCoupon({ ...defaultCoupon });\r\n\t\t}\r\n\t\tconst modalInstance = Modal.getInstance(couponModalRef.current!);\r\n\t\tmodalInstance?.show();\r\n\t};\r\n\r\n\tconst closeCouponModal = () => {\r\n\t\tconst modalInstance = Modal.getInstance(couponModalRef.current!);\r\n\t\tmodalInstance?.hide();\r\n\t\t// 重置 tempCoupon\r\n\t\tsetTempCoupon({ ...defaultCoupon });\r\n\t};\r\n\r\n\t// 開啟刪除確認視窗\r\n\tconst openDelCouponModal = (coupon: Coupon) => {\r\n\t\tsetTempCoupon({ ...coupon });\r\n\t\tconst modalInstance = Modal.getInstance(delCouponModalRef.current!);\r\n\t\tmodalInstance?.show();\r\n\t};\r\n\r\n\tconst closeDelCouponModal = () => {\r\n\t\tconst modalInstance = Modal.getInstance(delCouponModalRef.current!);\r\n\t\tmodalInstance?.hide();\r\n\t\tsetTempCoupon({ ...defaultCoupon });\r\n\t};\r\n\r\n\t/* ---------------- 新增 / 更新 優惠券 ---------------- */\r\n\tconst createCoupon = async () => {\r\n\t\t// POST /v2/api/product-backend/admin/coupon\r\n\t\t// { data: { title, is_enabled, percent, due_date, code } }\r\n\t\tawait axios.post(`${BASE_URL}/v2/api/${API_PATH}/admin/coupon`, {\r\n\t\t\tdata: { ...tempCoupon }\r\n\t\t});\r\n\t};\r\n\r\n\tconst updateCoupon = async () => {\r\n\t\t// PUT /v2/api/product-backend/admin/coupon/{id}\r\n\t\tawait axios.put(`${BASE_URL}/v2/api/${API_PATH}/admin/coupon/${tempCoupon.id}`, {\r\n\t\t\tdata: { ...tempCoupon }\r\n\t\t});\r\n\t};\r\n\r\n\t// 確認儲存（Modal 中點「確定」）:\r\n\tconst handleSaveCoupon = async () => {\r\n\t\ttry {\r\n\t\t\tif (modalMode === 'create') {\r\n\t\t\t\tawait createCoupon();\r\n\t\t\t\tdispatch(showToast('新增優惠券成功'));\r\n\t\t\t} else {\r\n\t\t\t\tawait updateCoupon();\r\n\t\t\t\tdispatch(showToast('更新優惠券成功'));\r\n\t\t\t}\r\n\t\t\tgetCoupons(pageInfo.current_page); // 重新取得當前頁\r\n\t\t\tcloseCouponModal();\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error(error);\r\n\t\t\talert('優惠券儲存失敗');\r\n\t\t}\r\n\t};\r\n\r\n\t/* ---------------- 刪除優惠券 ---------------- */\r\n\tconst deleteCoupon = async () => {\r\n\t\t// DELETE /v2/api/product-backend/admin/coupon/{id}\r\n\t\tawait axios.delete(`${BASE_URL}/v2/api/${API_PATH}/admin/coupon/${tempCoupon.id}`);\r\n\t};\r\n\r\n\t// 刪除確認（Modal 中點「確定」）\r\n\tconst handleDeleteCoupon = async () => {\r\n\t\ttry {\r\n\t\t\tawait deleteCoupon();\r\n\t\t\tdispatch(showToast('刪除優惠券成功'));\r\n\t\t\tgetCoupons(pageInfo.current_page);\r\n\t\t\tcloseDelCouponModal();\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error(error);\r\n\t\t\talert('刪除優惠券失敗');\r\n\t\t}\r\n\t};\r\n\r\n\t/* ---------------- 分頁切換 ---------------- */\r\n\tconst handlePageChange = (page: number) => {\r\n\t\tgetCoupons(page);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<section className=\"container mt-2\">\r\n\t\t\t{/* 回到admin.tsx */}\r\n\t\t\t<Link to=\"/Admin\" className=\"btn btn-outline-primary me-2 mb-4\">\r\n\t\t\t\t回到管理頁面\r\n\t\t\t</Link>\r\n\t\t\t<h2 className=\"fw-bold mb-3\">優惠券管理</h2>\r\n\r\n\t\t\t{/* 新增按鈕 */}\r\n\t\t\t<div className=\"mb-4 text-end\">\r\n\t\t\t\t<button\r\n\t\t\t\t\tclassName=\"btn btn-primary\"\r\n\t\t\t\t\tonClick={() => openCouponModal('create')}\r\n\t\t\t\t>\r\n\t\t\t\t\t<i className=\"bi bi-plus-lg\"></i> 建立新的優惠券\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\r\n\t\t\t{/* 優惠券列表 */}\r\n\t\t\t<table className=\"table\">\r\n\t\t\t\t<thead>\r\n\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t<th>優惠券名稱</th>\r\n\t\t\t\t\t\t<th>代碼</th>\r\n\t\t\t\t\t\t<th>折扣（%）</th>\r\n\t\t\t\t\t\t<th>到期日</th>\r\n\t\t\t\t\t\t<th>是否啟用</th>\r\n\t\t\t\t\t\t<th>操作</th>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</thead>\r\n\t\t\t\t<tbody>\r\n\t\t\t\t\t{couponList.map((coupon) => (\r\n\t\t\t\t\t\t<tr key={coupon.id}>\r\n\t\t\t\t\t\t\t<td>{coupon.title}</td>\r\n\t\t\t\t\t\t\t<td>{coupon.code}</td>\r\n\t\t\t\t\t\t\t<td>{coupon.percent}%</td>\r\n\t\t\t\t\t\t\t<td>{new Date(coupon.due_date * 1000).toLocaleDateString()}</td>\r\n\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t{coupon.is_enabled === 1 ? (\r\n\t\t\t\t\t\t\t\t\t<span className=\"text-success fw-bold\">啟用</span>\r\n\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t<span className=\"text-danger\">未啟用</span>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\tclassName=\"btn btn-sm btn-primary me-2\"\r\n\t\t\t\t\t\t\t\t\tonClick={() => openCouponModal('edit', coupon)}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<i className=\"bi bi-pencil-square\"></i> 編輯\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\tclassName=\"btn btn-sm btn-danger\"\r\n\t\t\t\t\t\t\t\t\tonClick={() => openDelCouponModal(coupon)}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<i className=\"bi bi-trash3-fill\"></i> 刪除\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t))}\r\n\t\t\t\t</tbody>\r\n\t\t\t</table>\r\n\r\n\t\t\t{/* 分頁元件 */}\r\n\t\t\t<div className=\"d-flex justify-content-center\">\r\n\t\t\t\t<Pagination pageInfo={pageInfo} handlePageChange={handlePageChange} />\r\n\t\t\t</div>\r\n\r\n\t\t\t{/* 新增 / 編輯 Modal */}\r\n\t\t\t<CouponModal\r\n\t\t\t\tmodalRef={couponModalRef}\r\n\t\t\t\ttempCoupon={tempCoupon}\r\n\t\t\t\tsetTempCoupon={setTempCoupon}\r\n\t\t\t\tmodalMode={modalMode}\r\n\t\t\t\tonSaveCoupon={handleSaveCoupon}\r\n\t\t\t\tonCloseModal={closeCouponModal}\r\n\t\t\t/>\r\n\r\n\t\t\t{/* 刪除確認 Modal */}\r\n\t\t\t<DeleteCouponModal\r\n\t\t\t\tmodalRef={delCouponModalRef}\r\n\t\t\t\ttempCoupon={tempCoupon}\r\n\t\t\t\tonCloseModal={closeDelCouponModal}\r\n\t\t\t\tonDeleteCoupon={handleDeleteCoupon}\r\n\t\t\t/>\r\n\t\t</section>\r\n\t);\r\n};\r\n\r\nexport default CouponPage;\r\n","import React from 'react';\r\n\r\ninterface Order {\r\n\tid: string;\r\n\tuser: {\r\n\t\tname: string;\r\n\t\temail: string;\r\n\t\ttel: string;\r\n\t\taddress: string;\r\n\t};\r\n\tcreate_at: number;\r\n\tis_paid: boolean;\r\n\tmessage: string;\r\n\tproducts: {\r\n\t\t[key: string]: {\r\n\t\t\tid: string;\r\n\t\t\tproduct_id: string;\r\n\t\t\tqty: number;\r\n\t\t}\r\n\t};\r\n\tnum: number;\r\n}\r\n\r\ninterface OrderModalProps {\r\n\torderModalRef: React.RefObject<HTMLDivElement>;\r\n\ttempOrder: Order;\r\n\tsetTempOrder: React.Dispatch<React.SetStateAction<Order>>;\r\n\tmodalMode: 'view' | 'edit';\r\n\tonCloseModal: () => void;\r\n\tonSaveOrder: () => void;\r\n}\r\n\r\nconst OrderModal: React.FC<OrderModalProps> = ({\r\n\torderModalRef,\r\n\ttempOrder,\r\n\tsetTempOrder,\r\n\tmodalMode,\r\n\tonCloseModal,\r\n\tonSaveOrder\r\n}) => {\r\n\r\n\tconst handleInputChange = (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) => {\r\n\t\tconst { name, value, type } = e.target;\r\n\t\t// 若為 checkbox (is_paid), 則先將 target 型別轉為 HTMLInputElement 以取得 checked 屬性\r\n\t\tif (type === 'checkbox') {\r\n\t\t\tconst target = e.target as HTMLInputElement;\r\n\t\t\tsetTempOrder((prev) => ({ ...prev, [name]: target.checked }));\r\n\t\t} else {\r\n\t\t\tsetTempOrder((prev) => ({ ...prev, [name]: value }));\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div\r\n\t\t\tclassName=\"modal fade\"\r\n\t\t\tref={orderModalRef}\r\n\t\t\ttabIndex={-1}\r\n\t\t\taria-labelledby=\"orderModalLabel\"\r\n\t\t\taria-hidden=\"true\"\r\n\t\t>\r\n\t\t\t<div className=\"modal-dialog modal-lg\"> {/* 彈窗可加大 */}\r\n\t\t\t\t<div className=\"modal-content\">\r\n\t\t\t\t\t<div className=\"modal-header\">\r\n\t\t\t\t\t\t<h5 className=\"modal-title\">\r\n\t\t\t\t\t\t\t{modalMode === 'view' ? '查看訂單' : '編輯訂單'}\r\n\t\t\t\t\t\t</h5>\r\n\t\t\t\t\t\t<button type=\"button\" className=\"btn-close\" onClick={onCloseModal}></button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"modal-body\">\r\n\t\t\t\t\t\t{/* 訂單基本資訊 */}\r\n\t\t\t\t\t\t<div className=\"mb-3 row\">\r\n\t\t\t\t\t\t\t<label className=\"col-sm-3 col-form-label\">訂單編號</label>\r\n\t\t\t\t\t\t\t<div className=\"col-sm-9\">\r\n\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\t\treadOnly\r\n\t\t\t\t\t\t\t\t\tclassName=\"form-control\"\r\n\t\t\t\t\t\t\t\t\tvalue={tempOrder.num}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t<div className=\"mb-3 row align-items-center\">\r\n\t\t\t\t\t\t\t<label className=\"col-sm-3 col-form-label\">付款狀態</label>\r\n\t\t\t\t\t\t\t<div className=\"col-sm-9\">\r\n\t\t\t\t\t\t\t\t{modalMode === 'view' ? (\r\n\t\t\t\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t\t\t\t{tempOrder.is_paid ? '已付款' : '未付款'}\r\n\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t<div className=\"form-check\">\r\n\t\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"form-check-input\"\r\n\t\t\t\t\t\t\t\t\t\t\ttype=\"checkbox\"\r\n\t\t\t\t\t\t\t\t\t\t\tid=\"is_paid\"\r\n\t\t\t\t\t\t\t\t\t\t\tname=\"is_paid\"\r\n\t\t\t\t\t\t\t\t\t\t\tchecked={tempOrder.is_paid}\r\n\t\t\t\t\t\t\t\t\t\t\tonChange={handleInputChange}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t<label className=\"form-check-label\" htmlFor=\"is_paid\">\r\n\t\t\t\t\t\t\t\t\t\t\t是否已付款\r\n\t\t\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t{/* 訂購人資訊 */}\r\n\t\t\t\t\t\t<hr />\r\n\t\t\t\t\t\t<h6>訂購人資料</h6>\r\n\t\t\t\t\t\t<div className=\"mb-3 row\">\r\n\t\t\t\t\t\t\t<label className=\"col-sm-3 col-form-label\">姓名</label>\r\n\t\t\t\t\t\t\t<div className=\"col-sm-9\">\r\n\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\t\tname=\"user.name\"\r\n\t\t\t\t\t\t\t\t\tclassName=\"form-control\"\r\n\t\t\t\t\t\t\t\t\treadOnly={modalMode === 'view'} // 僅在 edit 模式下可改\r\n\t\t\t\t\t\t\t\t\tvalue={tempOrder.user.name}\r\n\t\t\t\t\t\t\t\t\tonChange={(e) => {\r\n\t\t\t\t\t\t\t\t\t\tsetTempOrder((prev) => ({\r\n\t\t\t\t\t\t\t\t\t\t\t...prev,\r\n\t\t\t\t\t\t\t\t\t\t\tuser: { ...prev.user, name: e.target.value }\r\n\t\t\t\t\t\t\t\t\t\t}));\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"mb-3 row\">\r\n\t\t\t\t\t\t\t<label className=\"col-sm-3 col-form-label\">Email</label>\r\n\t\t\t\t\t\t\t<div className=\"col-sm-9\">\r\n\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\t\tname=\"user.email\"\r\n\t\t\t\t\t\t\t\t\tclassName=\"form-control\"\r\n\t\t\t\t\t\t\t\t\treadOnly={modalMode === 'view'}\r\n\t\t\t\t\t\t\t\t\tvalue={tempOrder.user.email}\r\n\t\t\t\t\t\t\t\t\tonChange={(e) => {\r\n\t\t\t\t\t\t\t\t\t\tsetTempOrder((prev) => ({\r\n\t\t\t\t\t\t\t\t\t\t\t...prev,\r\n\t\t\t\t\t\t\t\t\t\t\tuser: { ...prev.user, email: e.target.value }\r\n\t\t\t\t\t\t\t\t\t\t}));\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"mb-3 row\">\r\n\t\t\t\t\t\t\t<label className=\"col-sm-3 col-form-label\">電話</label>\r\n\t\t\t\t\t\t\t<div className=\"col-sm-9\">\r\n\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\t\tname=\"user.tel\"\r\n\t\t\t\t\t\t\t\t\tclassName=\"form-control\"\r\n\t\t\t\t\t\t\t\t\treadOnly={modalMode === 'view'}\r\n\t\t\t\t\t\t\t\t\tvalue={tempOrder.user.tel}\r\n\t\t\t\t\t\t\t\t\tonChange={(e) => {\r\n\t\t\t\t\t\t\t\t\t\tsetTempOrder((prev) => ({\r\n\t\t\t\t\t\t\t\t\t\t\t...prev,\r\n\t\t\t\t\t\t\t\t\t\t\tuser: { ...prev.user, tel: e.target.value }\r\n\t\t\t\t\t\t\t\t\t\t}));\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"mb-3 row\">\r\n\t\t\t\t\t\t\t<label className=\"col-sm-3 col-form-label\">地址</label>\r\n\t\t\t\t\t\t\t<div className=\"col-sm-9\">\r\n\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\t\tname=\"user.address\"\r\n\t\t\t\t\t\t\t\t\tclassName=\"form-control\"\r\n\t\t\t\t\t\t\t\t\treadOnly={modalMode === 'view'}\r\n\t\t\t\t\t\t\t\t\tvalue={tempOrder.user.address}\r\n\t\t\t\t\t\t\t\t\tonChange={(e) => {\r\n\t\t\t\t\t\t\t\t\t\tsetTempOrder((prev) => ({\r\n\t\t\t\t\t\t\t\t\t\t\t...prev,\r\n\t\t\t\t\t\t\t\t\t\t\tuser: { ...prev.user, address: e.target.value }\r\n\t\t\t\t\t\t\t\t\t\t}));\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t{/* 留言 */}\r\n\t\t\t\t\t\t<hr />\r\n\t\t\t\t\t\t<div className=\"mb-3\">\r\n\t\t\t\t\t\t\t<label className=\"form-label\">留言</label>\r\n\t\t\t\t\t\t\t{modalMode === 'view' ? (\r\n\t\t\t\t\t\t\t\t<div>{tempOrder.message}</div>\r\n\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t<textarea\r\n\t\t\t\t\t\t\t\t\tclassName=\"form-control\"\r\n\t\t\t\t\t\t\t\t\tname=\"message\"\r\n\t\t\t\t\t\t\t\t\trows={3}\r\n\t\t\t\t\t\t\t\t\tvalue={tempOrder.message}\r\n\t\t\t\t\t\t\t\t\tonChange={handleInputChange}\r\n\t\t\t\t\t\t\t\t></textarea>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t{/* 購買產品清單 (簡易呈現) */}\r\n\t\t\t\t\t\t<hr />\r\n\t\t\t\t\t\t<h6>產品清單</h6>\r\n\t\t\t\t\t\t<ul>\r\n\t\t\t\t\t\t\t{Object.values(tempOrder.products).map((p) => (\r\n\t\t\t\t\t\t\t\t<li key={p.id}>\r\n\t\t\t\t\t\t\t\t\t產品ID: {p.product_id}, 數量: {p.qty}\r\n\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"modal-footer\">\r\n\t\t\t\t\t\t{modalMode === 'edit' && (\r\n\t\t\t\t\t\t\t<button className=\"btn btn-primary\" onClick={onSaveOrder}>\r\n\t\t\t\t\t\t\t\t儲存\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t<button className=\"btn btn-secondary\" onClick={onCloseModal}>\r\n\t\t\t\t\t\t\t關閉\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default OrderModal;\r\n","import React from 'react';\r\n\r\ninterface Order {\r\n  id: string;\r\n  user: {\r\n    name: string;\r\n    email: string;\r\n    tel: string;\r\n    address: string;\r\n  };\r\n  create_at: number;\r\n  is_paid: boolean;\r\n  message: string;\r\n  products: {\r\n    [key: string]: {\r\n      id: string;\r\n      product_id: string;\r\n      qty: number;\r\n    }\r\n  };\r\n  num: number;\r\n}\r\n\r\ninterface DeleteOrderModalProps {\r\n  delOrderModalRef: React.RefObject<HTMLDivElement>;\r\n  tempOrder: Order;\r\n  onCloseModal: () => void;\r\n  onDeleteOrder: () => void;\r\n}\r\n\r\nconst DeleteOrderModal: React.FC<DeleteOrderModalProps> = ({\r\n  delOrderModalRef,\r\n  tempOrder,\r\n  onCloseModal,\r\n  onDeleteOrder,\r\n}) => {\r\n  return (\r\n    <div\r\n      className=\"modal fade\"\r\n      ref={delOrderModalRef}\r\n      tabIndex={-1}\r\n      aria-labelledby=\"deleteOrderModalLabel\"\r\n      aria-hidden=\"true\"\r\n    >\r\n      <div className=\"modal-dialog\">\r\n        <div className=\"modal-content\">\r\n          <div className=\"modal-header\">\r\n            <h5 className=\"modal-title\" id=\"deleteOrderModalLabel\">\r\n              刪除訂單\r\n            </h5>\r\n            <button type=\"button\" className=\"btn-close\" onClick={onCloseModal}></button>\r\n          </div>\r\n          <div className=\"modal-body\">\r\n            確定要刪除「訂單編號 {tempOrder.num}」嗎？\r\n          </div>\r\n          <div className=\"modal-footer\">\r\n            <button className=\"btn btn-secondary\" onClick={onCloseModal}>\r\n              取消\r\n            </button>\r\n            <button className=\"btn btn-danger\" onClick={onDeleteOrder}>\r\n              確定刪除\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DeleteOrderModal;\r\n","import React from \"react\";\r\n\r\ninterface PageInfo {\r\n  total_pages: number;\r\n  current_page: number;\r\n  has_pre?: boolean;\r\n  has_next?: boolean;\r\n}\r\n\r\ninterface PaginationProps {\r\n  pageInfo: PageInfo;\r\n  handlePageChange: (page: number) => void;\r\n}\r\n\r\nconst Pagination: React.FC<PaginationProps> = ({ pageInfo, handlePageChange }) => {\r\n  const { total_pages, current_page, has_pre, has_next } = pageInfo;\r\n\r\n  return (\r\n    <nav>\r\n      <ul className=\"pagination\">\r\n        {/* 上一頁 */}\r\n        <li className={`page-item ${!has_pre ? \"disabled\" : \"\"}`}>\r\n          <button\r\n            onClick={() => has_pre && handlePageChange(current_page - 1)}\r\n            className=\"page-link\"\r\n            disabled={!has_pre}\r\n          >\r\n            上一頁\r\n          </button>\r\n        </li>\r\n\r\n        {/* 頁碼 */}\r\n        {Array.from({ length: total_pages }, (_, index) => (\r\n          <li key={index} className={`page-item ${current_page === index + 1 ? \"active\" : \"\"}`}>\r\n            <button\r\n              onClick={() => handlePageChange(index + 1)}\r\n              className=\"page-link\"\r\n            >\r\n              {index + 1}\r\n            </button>\r\n          </li>\r\n        ))}\r\n\r\n        {/* 下一頁 */}\r\n        <li className={`page-item ${!has_next ? \"disabled\" : \"\"}`}>\r\n          <button\r\n            onClick={() => has_next && handlePageChange(current_page + 1)}\r\n            className=\"page-link\"\r\n            disabled={!has_next}\r\n          >\r\n            下一頁\r\n          </button>\r\n        </li>\r\n      </ul>\r\n    </nav>\r\n  );\r\n};\r\n\r\nexport default Pagination;\r\n","import React, { useCallback, useEffect, useRef, useState } from 'react';\r\nimport axios from 'axios';\r\nimport { Modal } from 'bootstrap';\r\nimport { useDispatch } from 'react-redux';\r\nimport { showToast } from '../../redux/slices/toastSlice';\r\nimport { Link } from 'react-router-dom';\r\n\r\n// 這些你可自行拆分至獨立檔案\r\nimport OrderModal from './OrderModal';\r\nimport DeleteOrderModal from './DeleteOrderModal';\r\nimport Pagination from './Pagination';\r\n\r\nconst BASE_URL = import.meta.env.VITE_BASE_URL;\r\nconst API_PATH = 'product-backend'; // 假設為 /v2/api/product-backend/...\r\n\r\n// 訂單資料結構\r\ninterface Order {\r\n\tid: string;\r\n\tuser: {\r\n\t\tname: string;\r\n\t\temail: string;\r\n\t\ttel: string;\r\n\t\taddress: string;\r\n\t};\r\n\tcreate_at: number;\r\n\tis_paid: boolean;\r\n\tmessage: string;\r\n\tproducts: {\r\n\t\t[key: string]: {\r\n\t\t\tid: string;\r\n\t\t\tproduct_id: string;\r\n\t\t\tqty: number;\r\n\t\t}\r\n\t};\r\n\tnum: number; // 訂單編號或其他資訊\r\n}\r\n\r\n// 分頁資訊\r\ninterface PageInfo {\r\n\ttotal_pages: number;\r\n\tcurrent_page: number;\r\n\thas_pre?: boolean;\r\n\thas_next?: boolean;\r\n\tcategory?: string;\r\n}\r\n\r\ninterface OrderListProps {\r\n\ttoken?: string;     // 從外部傳入的 token, 若已在 axios.defaults 也可不傳\r\n\tisAuth?: boolean;   // 若要驗證使用者是否登入\r\n}\r\n\r\nconst OrderList: React.FC<OrderListProps> = ({ token }) => {\r\n\tconst dispatch = useDispatch();\r\n\r\n\t// 訂單列表\r\n\tconst [orderList, setOrderList] = useState<Order[]>([]);\r\n\t// 分頁資訊\r\n\tconst [pageInfo, setPageInfo] = useState<PageInfo>({\r\n\t\ttotal_pages: 0,\r\n\t\tcurrent_page: 1,\r\n\t});\r\n\r\n\t// Modal 狀態\r\n\tconst [modalMode, setModalMode] = useState<'view' | 'edit'>('view');\r\n\tconst defaultOrder: Order = {\r\n\t\tid: '',\r\n\t\tuser: { name: '', email: '', tel: '', address: '' },\r\n\t\tcreate_at: 0,\r\n\t\tis_paid: false,\r\n\t\tmessage: '',\r\n\t\tproducts: {},\r\n\t\tnum: 0\r\n\t};\r\n\tconst [tempOrder, setTempOrder] = useState<Order>(defaultOrder);\r\n\r\n\t// modal 參考\r\n\tconst orderModalRef = useRef<HTMLDivElement>(null);\r\n\tconst delOrderModalRef = useRef<HTMLDivElement>(null);\r\n\r\n\t// 初始化 axios (token)\r\n\tuseEffect(() => {\r\n\t\tif (token) {\r\n\t\t\taxios.defaults.headers.common['Authorization'] = token;\r\n\t\t}\r\n\t}, [token]);\r\n\r\n\t/* ---------------- 取得訂單列表 ---------------- */\r\n\tconst getOrders = useCallback(\r\n\t\tasync (page = 1) => {\r\n\t\t\ttry {\r\n\t\t\t\tconst res = await axios.get(\r\n\t\t\t\t\t`${BASE_URL}/v2/api/${API_PATH}/admin/orders?page=${page}`\r\n\t\t\t\t);\r\n\t\t\t\tsetOrderList(res.data.orders);        // 設定訂單資料\r\n\t\t\t\tsetPageInfo(res.data.pagination);     // 設定分頁資訊\r\n\t\t\t\tdispatch(showToast('成功取得訂單列表'));\r\n\t\t\t} catch (error) {\r\n\t\t\t\tconsole.error(error);\r\n\t\t\t\talert('取得訂單失敗');\r\n\t\t\t}\r\n\t\t},\r\n\t\t[dispatch]\r\n\t);\r\n\r\n\t// 首次/切頁 時取得訂單列表\r\n\tuseEffect(() => {\r\n\t\tgetOrders(1);\r\n\t}, [getOrders]);\r\n\r\n\t/* ---------------- Modal 初始化 ---------------- */\r\n\tuseEffect(() => {\r\n\t\tnew Modal(orderModalRef.current!);\r\n\t\tnew Modal(delOrderModalRef.current!);\r\n\t}, []);\r\n\r\n\t/* ---------------- 開/關 Modal ---------------- */\r\n\tconst openOrderModal = (mode: 'view' | 'edit', order: Order) => {\r\n\t\tsetModalMode(mode);\r\n\t\tsetTempOrder({ ...order });\r\n\t\tconst modalInstance = Modal.getInstance(orderModalRef.current!);\r\n\t\tmodalInstance?.show();\r\n\t};\r\n\r\n\tconst closeOrderModal = () => {\r\n\t\tconst modalInstance = Modal.getInstance(orderModalRef.current!);\r\n\t\tmodalInstance?.hide();\r\n\t\tsetTempOrder({ ...defaultOrder });\r\n\t};\r\n\r\n\t// 刪除彈窗\r\n\tconst openDelOrderModal = (order: Order) => {\r\n\t\tsetTempOrder({ ...order });\r\n\t\tconst modalInstance = Modal.getInstance(delOrderModalRef.current!);\r\n\t\tmodalInstance?.show();\r\n\t};\r\n\tconst closeDelOrderModal = () => {\r\n\t\tconst modalInstance = Modal.getInstance(delOrderModalRef.current!);\r\n\t\tmodalInstance?.hide();\r\n\t\tsetTempOrder({ ...defaultOrder });\r\n\t};\r\n\r\n\t/* ---------------- 更新訂單 (例如切換付款狀態) ---------------- */\r\n\tconst updateOrder = async () => {\r\n\t\t// PUT /v2/api/product-backend/admin/orders/{id}\r\n\t\t// {\r\n\t\t//   \"data\": { ...tempOrder }\r\n\t\t// }\r\n\t\tawait axios.put(`${BASE_URL}/v2/api/${API_PATH}/admin/orders/${tempOrder.id}`, {\r\n\t\t\tdata: { ...tempOrder }\r\n\t\t});\r\n\t};\r\n\r\n\tconst handleSaveOrder = async () => {\r\n\t\ttry {\r\n\t\t\tawait updateOrder();\r\n\t\t\tdispatch(showToast('訂單更新成功'));\r\n\t\t\tgetOrders(pageInfo.current_page);\r\n\t\t\tcloseOrderModal();\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error(error);\r\n\t\t\talert('更新訂單失敗');\r\n\t\t}\r\n\t};\r\n\r\n\t/* ---------------- 刪除單筆訂單 ---------------- */\r\n\tconst deleteOrder = async () => {\r\n\t\t// DELETE /v2/api/product-backend/admin/orders/{id}\r\n\t\tawait axios.delete(`${BASE_URL}/v2/api/${API_PATH}/admin/orders/${tempOrder.id}`);\r\n\t};\r\n\r\n\tconst handleDeleteOrder = async () => {\r\n\t\ttry {\r\n\t\t\tawait deleteOrder();\r\n\t\t\tdispatch(showToast('刪除訂單成功'));\r\n\t\t\tgetOrders(pageInfo.current_page);\r\n\t\t\tcloseDelOrderModal();\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error(error);\r\n\t\t\talert('刪除訂單失敗');\r\n\t\t}\r\n\t};\r\n\r\n\t/* ---------------- 刪除所有訂單 ---------------- */\r\n\tconst deleteAllOrders = async () => {\r\n\t\t// DELETE /v2/api/product-backend/admin/orders/all\r\n\t\tawait axios.delete(`${BASE_URL}/v2/api/${API_PATH}/admin/orders/all`);\r\n\t};\r\n\r\n\tconst handleDeleteAllOrders = async () => {\r\n\t\tif (!window.confirm(\"確定要刪除所有訂單嗎？\")) return;\r\n\t\ttry {\r\n\t\t\tawait deleteAllOrders();\r\n\t\t\tdispatch(showToast('已刪除所有訂單'));\r\n\t\t\tgetOrders(1);\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error(error);\r\n\t\t\talert('刪除全部訂單失敗');\r\n\t\t}\r\n\t};\r\n\r\n\t/* ---------------- 分頁 ---------------- */\r\n\tconst handlePageChange = (page: number) => {\r\n\t\tgetOrders(page);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div className=\"container mt-2\">\r\n\t\t\t{/* 回到admin.tsx */}\r\n\t\t\t<Link to=\"/Admin\" className=\"btn btn-outline-primary me-2 mb-4\">\r\n\t\t\t\t回到管理頁面\r\n\t\t\t</Link>\r\n\t\t\t<h2 className=\"fw-bold mb-3\">訂單管理</h2>\r\n\r\n\t\t\t{/* 刪除全部訂單 */}\r\n\t\t\t<div className=\"text-end mb-4\">\r\n\t\t\t\t<button className=\"btn btn-danger\" onClick={handleDeleteAllOrders}>\r\n\t\t\t\t\t刪除全部訂單\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\r\n\t\t\t{/* 訂單列表 */}\r\n\t\t\t<table className=\"table\">\r\n\t\t\t\t<thead>\r\n\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t<th>訂單編號</th>\r\n\t\t\t\t\t\t<th>訂購人</th>\r\n\t\t\t\t\t\t<th>Email</th>\r\n\t\t\t\t\t\t<th>建立時間</th>\r\n\t\t\t\t\t\t<th>付款狀態</th>\r\n\t\t\t\t\t\t<th>操作</th>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</thead>\r\n\t\t\t\t<tbody>\r\n\t\t\t\t\t{orderList.map((order) => (\r\n\t\t\t\t\t\t<tr key={order.id}>\r\n\t\t\t\t\t\t\t<td>{order.num}</td>\r\n\t\t\t\t\t\t\t<td>{order.user.name}</td>\r\n\t\t\t\t\t\t\t<td>{order.user.email}</td>\r\n\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t{new Date(order.create_at * 1000).toLocaleString()}\r\n\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t{order.is_paid ? (\r\n\t\t\t\t\t\t\t\t\t<span className=\"text-success fw-bold\">已付款</span>\r\n\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t<span className=\"text-danger\">未付款</span>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t{/* 查看 / 編輯 */}\r\n\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\tclassName=\"btn btn-sm btn-info me-2\"\r\n\t\t\t\t\t\t\t\t\tonClick={() => openOrderModal('view', order)}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t查看\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\tclassName=\"btn btn-sm btn-primary me-2\"\r\n\t\t\t\t\t\t\t\t\tonClick={() => openOrderModal('edit', order)}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t編輯\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t{/* 刪除 */}\r\n\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\tclassName=\"btn btn-sm btn-danger\"\r\n\t\t\t\t\t\t\t\t\tonClick={() => openDelOrderModal(order)}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t刪除\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t))}\r\n\t\t\t\t</tbody>\r\n\t\t\t</table>\r\n\r\n\t\t\t{/* 分頁 */}\r\n\t\t\t<div className=\"d-flex justify-content-center\">\r\n\t\t\t\t<Pagination pageInfo={pageInfo} handlePageChange={handlePageChange} />\r\n\t\t\t</div>\r\n\r\n\t\t\t{/* 詳細 & 編輯 Modal */}\r\n\t\t\t<OrderModal\r\n\t\t\t\torderModalRef={orderModalRef}\r\n\t\t\t\ttempOrder={tempOrder}\r\n\t\t\t\tsetTempOrder={setTempOrder}\r\n\t\t\t\tmodalMode={modalMode}\r\n\t\t\t\tonCloseModal={closeOrderModal}\r\n\t\t\t\tonSaveOrder={handleSaveOrder}\r\n\t\t\t/>\r\n\r\n\t\t\t{/* 刪除彈窗 */}\r\n\t\t\t<DeleteOrderModal\r\n\t\t\t\tdelOrderModalRef={delOrderModalRef}\r\n\t\t\t\ttempOrder={tempOrder}\r\n\t\t\t\tonCloseModal={closeDelOrderModal}\r\n\t\t\t\tonDeleteOrder={handleDeleteOrder}\r\n\t\t\t/>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default OrderList;\r\n","import { HashRouter, Routes, Route } from \"react-router-dom\";\r\n\r\n// Components\r\nimport Layout from \"./components/Layout\";\r\nimport Home from \"./components/Home\";\r\n// Pages\r\nimport Week2 from \"./pages/Week2\";\r\nimport Week3 from \"./pages/Week3\";\r\nimport Week4 from \"./pages/Week4\";\r\nimport Week5 from \"./pages/Week5\";\r\nimport Week6 from \"./pages/Week6\";\r\nimport Week7 from \"./pages/Week7\";\r\nimport Products from \"./pages/Products\";\r\nimport ProductDetail from \"./pages/ProductDetail\";\r\nimport Cart from \"./pages/Cart\";\r\nimport Admin from \"./pages/Admin\";\r\nimport About from \"./pages/About\";\r\nimport Coupon from \"./components/Coupon/Coupon\";\r\nimport OrderList from \"./components/Order/OrderList\";\r\n\r\nconst RouteConf = () => {\r\n  // Get the base URL from the environment\r\n  // const basename = import.meta.env.BASE_URL;\r\n\r\n  return (\r\n    // <BrowserRouter basename={basename}>\r\n    <HashRouter>\r\n      <Routes>\r\n        <Route path=\"/\" element={<Layout />}>\r\n          <Route index element={<Home />} />\r\n          <Route path=\"week2\" element={<Week2 />} />\r\n          <Route path=\"week3\" element={<Week3 />} />\r\n          <Route path=\"week4\" element={<Week4 />} />\r\n          <Route path=\"week5\" element={<Week5 />} />\r\n          <Route path=\"week6\" element={<Week6 />} />\r\n          <Route path=\"week7\" element={<Week7 />} />\r\n          <Route path=\"products\" element={<Products cart={[]} setCart={() => {}} />} />\r\n          <Route path=\"products/:id\" element={<ProductDetail />} />\r\n          <Route path=\"cart\" element={<Cart />} />\r\n          <Route path=\"admin\" element={<Admin />} />\r\n          <Route path=\"about\" element={<About />} />\r\n          {/* /admin/coupon */}\r\n          <Route path=\"admin/coupon\" element={<Coupon/>} />\r\n          <Route path=\"admin/order\" element={<OrderList/>} />\r\n          <Route path=\"*\" element={<h1>Not Found</h1>} />\r\n        </Route>\r\n      </Routes>\r\n    </HashRouter>\r\n    // </BrowserRouter>\r\n  );\r\n};\r\n\r\nexport default RouteConf;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport { Provider } from 'react-redux';\nimport store from './redux/store';\nimport './index.css';\nimport RouteConf from './RouteConf';\nimport 'bootstrap/dist/js/bootstrap.bundle.min.js';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport'./styles/all.scss';\n\nReactDOM.createRoot(document.getElementById('root')!).render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <RouteConf/>\n    </Provider>\n  </React.StrictMode>,\n);\n"],"names":["initialState","toastSlice","createSlice","state","action","showToast","hideToast","toastReducer","cartSlice","product","quantity","existingItem","item","itemId","id","addToCart","removeFromCart","updateCartItemQuantity","clearCart","cartReducer","store","configureStore","Navbar","isAuth","onLogout","cartCount","handleLogout","axios","error","handleToggle","collapseElement","bsCollapse","Collapse","jsx","jsxs","Link","e","NavLink","isActive","Toast","message","visible","useSelector","dispatch","useDispatch","useEffect","timer","toastHeaderClassName","Layout","setIsAuth","useState","Fragment","Outlet","HomePage","Week2","tempProduct","setTempProduct","React","productList","setProducts","account","setAccount","handleInputChange","value","name","handleLogin","res","token","expired","image","index","Week3","BASE_URL","API_PATH","defaultModalState","modalMode","setModalMode","getProducts","checkUserLogin","productModalRef","useRef","delProductModalRef","Modal","openProductModal","mode","modalInstance","openDelProductModal","closeProductModal","closeDelProductModal","handleModalInputChange","type","checked","prevProduct","handleModalImageChange","newImagesUrl","handleAddImageClick","handleCancelImageClick","createProduct","_b","_a","updateProduct","handleUploadProduct","result","delProduct","handleDelProduct","url","Login","prev","onSubmitLogin","ProductModal","forceUpdate","handleFileChange","file","formData","uploadImageUrl","n","handleAdditionalFileChange","Pagination","pageInfo","handlePageChange","total_pages","current_page","has_pre","has_next","_","DeleteProductModal","Product","setPageInfo","useCallback","page","apiCall","Week4","username","password","Week5","products","cart","setCart","loading","setLoading","register","handleSubmit","errors","useForm","openModal","closeModal","handleSeeMore","handleAddToCart","onSubmit","data","qtySelect","setQtySelect","ReactLoading","cartItem","acc","_c","_d","Week6","handleAddToCartFromModal","Products","categoryFilter","setCategoryFilter","currentPage","setCurrentPage","itemsPerPage","handleDeleteFromCart","cartItemId","filteredProducts","p","totalPages","startIndex","endIndex","pageProducts","handleCategoryChange","newCategory","handlePrevPage","handleNextPage","cat","ProductDetail","useParams","navigate","useNavigate","setProduct","Cart","totalAmount","handleDeleteItem","handleRemoveOne","newQty","handleAddOne","Admin","About","sections","observer","entries","entry","section","CouponModal","modalRef","tempCoupon","setTempCoupon","onSaveCoupon","onCloseModal","DeleteCouponModal","onDeleteCoupon","CouponPage","couponList","setCouponList","defaultCoupon","couponModalRef","delCouponModalRef","getCoupons","openCouponModal","coupon","closeCouponModal","openDelCouponModal","closeDelCouponModal","createCoupon","updateCoupon","handleSaveCoupon","deleteCoupon","handleDeleteCoupon","OrderModal","orderModalRef","tempOrder","setTempOrder","onSaveOrder","target","DeleteOrderModal","delOrderModalRef","onDeleteOrder","OrderList","orderList","setOrderList","defaultOrder","getOrders","openOrderModal","order","closeOrderModal","openDelOrderModal","closeDelOrderModal","updateOrder","handleSaveOrder","deleteOrder","handleDeleteOrder","deleteAllOrders","handleDeleteAllOrders","RouteConf","HashRouter","Routes","Route","Home","Week7","Coupon","ReactDOM","Provider"],"mappings":"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"}